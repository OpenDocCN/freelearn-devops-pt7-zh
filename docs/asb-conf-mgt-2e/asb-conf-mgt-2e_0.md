# 前言

自从 1993 年 Mark Burgess 创建了 CFEngine 以来，配置管理工具一直在不断发展。紧随其后的是 Puppet 和 Chef 等现代工具的出现，现在系统管理员可选择的工具种类繁多。

Ansible 是配置管理领域中新出现的工具之一。其他工具侧重于完整性和可配置性，而 Ansible 则打破了这一趋势，专注于简单性和易用性。

本书的目标是向你展示如何使用 Ansible，从它的命令行工具的基础开始，到编写 playbooks，再到管理大型复杂的环境。最后，我们将教你如何构建自己的模块并通过编写插件扩展 Ansible，增加新功能。

# 本书内容

第一章，*Ansible 入门*，教你 Ansible 的基础知识，如何在 Windows 和 Linux 上安装它，如何构建库存，如何使用模块，最重要的是，如何获取帮助。

第二章，*简单 Playbooks*，教你如何将多个模块结合起来创建 Ansible playbooks 来管理主机，同时也介绍了一些有用的模块。

第三章，*高级 Playbooks*，深入讲解 Ansible 的脚本语言，并教授更复杂的语言构造；在这里我们还解释了如何调试 playbooks。

第四章，*更大规模的项目*，教你如何将 Ansible 的配置扩展到大规模部署，使用多个复杂的系统，包括如何管理你可能用来配置系统的各种机密。

第五章，*自定义模块*，教你如何通过编写模块和插件将 Ansible 扩展到现有功能之外。

# 本书所需的内容

要使用本书，你至少需要以下内容：

+   一款文本编辑器

+   一台运行 Linux 操作系统的计算机

+   Python 2.6.x 或 Python 2.7.x

然而，为了充分发挥 Ansible 的作用，你应该至少拥有几台 Linux 机器进行管理。如果需要，你可以使用虚拟化平台来模拟多个主机。要使用 Windows 模块，你需要一台 Windows 机器作为被管理主机，并且需要一台 Linux 机器作为控制主机。

# 本书适用人群

本书面向希望了解 Ansible 工作原理基础的人。预计读者具备一定的 Linux 系统设置和配置知识。在本书的某些部分，我们将介绍 BIND、MySQL 以及其他 Linux 守护进程的配置文件；了解这些内容将非常有帮助，但并非必需。

# 约定

在本书中，你会发现一些文本样式，用以区分不同种类的信息。以下是这些样式的一些示例，以及它们的含义说明。

文本中的代码词汇、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 用户名会以如下方式显示：“这与使用`vars_files`指令的方式类似。”

一块代码会如下所示：

```
[group]
machine1
machine2
machine3
```

当我们希望引起你对某段代码块中特定部分的注意时，相关的行或项会以**粗体**显示：

```
tasks:
  - name: install apache
    action: yum name=httpd state=installed

  - name: configure apache
    copy: src=files/httpd.conf dest=/etc/httpd/conf/httpd.conf
```

所有命令行输入或输出都会如下所示：

```
ansible machinename -u root -k -m ping

```

**新术语**和**重要词汇**以粗体显示。你在屏幕上看到的、菜单或对话框中的词语例如，会以这样的方式出现在文本中：“点击**下一步**按钮会将你带到下一个屏幕。”

### 注意

警告或重要注释以这样的框显示。

### 提示

提示和技巧以这种方式出现。

# 读者反馈

我们始终欢迎读者的反馈。告诉我们你对本书的看法——你喜欢的部分或可能不喜欢的部分。读者反馈对我们来说很重要，它帮助我们开发出你能真正受益的书籍。

要向我们提供一般反馈，只需发送电子邮件至`<feedback@packtpub.com>`，并通过邮件主题提到书名。

如果你在某个领域具有专业知识，并且有兴趣撰写或贡献一本书，可以查看我们在[www.packtpub.com/authors](http://www.packtpub.com/authors)上的作者指南。

# 客户支持

现在你是一本 Packt 书籍的自豪拥有者，我们提供了许多帮助你充分利用购买的资源。

## 下载示例代码

你可以从你的账户在[`www.packtpub.com`](http://www.packtpub.com)下载你购买的所有 Packt 书籍的示例代码文件。如果你在其他地方购买了本书，你可以访问[`www.packtpub.com/support`](http://www.packtpub.com/support)并注册，将文件直接通过电子邮件发送给你。

## 勘误

尽管我们已经尽力确保内容的准确性，但错误仍然会发生。如果你在我们的书中发现错误——无论是文本还是代码中的错误——我们将非常感激你能报告这个问题。通过这样做，你可以帮助其他读者避免困扰，并帮助我们改进后续版本的书籍。如果你发现任何勘误，请访问[`www.packtpub.com/submit-errata`](http://www.packtpub.com/submit-errata)报告，选择你的书籍，点击**勘误提交表单**链接，输入你的勘误详细信息。一旦你的勘误被验证，你的提交将被接受，并且勘误将被上传到我们的网站，或者添加到现有勘误列表中，列在该书籍的勘误部分。你可以通过选择你的书名访问[`www.packtpub.com/support`](http://www.packtpub.com/support)查看现有勘误。

## 盗版

互联网上的版权盗版问题是所有媒体面临的持续性问题。在 Packt，我们非常重视版权和许可证的保护。如果您在互联网上发现我们作品的任何非法复制品，无论形式如何，请立即提供相关地址或网站名称，以便我们采取相应的措施。

请通过 `<copyright@packtpub.com>` 与我们联系，并提供涉嫌侵权材料的链接。

我们感谢您为保护我们的作者以及帮助我们为您提供有价值内容所做的贡献。

## 问题

如果您在书籍的任何方面遇到问题，您可以通过 `<questions@packtpub.com>` 与我们联系，我们会尽力解决您的问题。
