# 前言

Git 是最受欢迎的开源分布式版本控制系统。版本控制系统帮助软件团队管理项目源代码随时间变化的内容。在任何协作开发中使用版本控制都是必须的，即使你是单独工作，版本控制也同样有用。

*掌握 Git* 将帮助 Git 初学者达到专家级水平，理解 Git 的概念以及基本和高级 Git 任务背后的思维模型。使用 Git 的开发人员将能够利用其强大的功能让工作变得更加轻松。*掌握 Git* 将在开发过程中帮助你完成各种任务，节省时间和精力。

本书精心设计，帮助你深入了解 Git 的架构、底层概念、行为和最佳实践。

你将从一个简单的 Git 协作开发示例开始，以建立对 Git 操作任务和概念的基本理解。在你逐步阅读本书时，接下来的章节将详细描述 Git 使用的各个领域——从管理自己的工作、源代码考古，到与其他开发人员协作。你将学习如何检查和探索项目历史，创建和管理你的贡献，设置用于集中式和分布式工作流的仓库和分支，集成其他开发人员发送的工作，定制和扩展 Git，并从仓库错误中恢复。

版本控制的相关话题伴随着对 Git 架构和行为相关部分的详细描述。通过探索 Git 的高级实践并了解 Git 工作的细节，你将对其行为有更深入的理解，从而能够定制和扩展现有的做法，并编写你自己的做法。

# 本书适合谁

如果你是一个对 Git 有一定了解的用户，并且熟悉其基本概念，如分支、合并、暂存和工作流，那么这本书适合你。如果你已经使用 Git 很长时间，本书将帮助你理解 Git 的工作原理，充分利用其强大功能，学习高级工具、技巧和工作流。

如果你是系统管理员、项目负责人或运营经理，本书将帮助你配置 Git，以实现更好的协作开发，选择最适合团队和项目需求的工作流和分支模式。

安装 Git 和软件配置管理基本概念的知识至关重要。书中的第一章《Git 基础实践》应作为一个复习，并帮助你更新知识。本书假设你具备一定的命令行操作技能，尽管这不是严格要求的。

# 本书涵盖的内容

*第一章*，*Git 基础实操*，提醒读者 Git 版本控制的基础知识。重点介绍技术的实际应用，采用一个简单项目的开发作为示例。本章将展示并解释示范项目开发过程中基本的版本控制操作，以及两个开发者如何使用 Git 进行协作。

*第二章*，*使用 Git 进行开发*，展示了如何选择性地提交文件并交互式地选择提交内容。你将学习如何创建新的修订版本和新的开发线。本章介绍了提交的暂存区（索引）的概念，并解释了如何查看和读取工作目录、索引和当前修订之间的差异。还将教你如何创建、列出和切换分支，如何回溯历史，以及如何撤销更改或修正上次提交。

*第三章*，*管理工作树*，教你如何详细管理文件，以准备提交内容。将解释索引和文件状态的概念，教你如何检查工作区的状态，如何在工作树、索引和仓库之间移动文件内容，如何更改文件状态。还将展示如何管理需要特殊处理的文件，介绍忽略文件和文件属性的概念。

*第四章*，*探索项目历史*，介绍了修订版本图的概念，并解释了这一概念如何与 Git 中的分支、标签和当前分支等思想相关联。你将学习如何选择并查看某个修订版本或修订版本范围，以及如何引用这些版本。这些技能将帮助你聚焦于项目历史的特定部分，选择其中有趣的部分进行进一步的查找。

*第五章*，*在仓库中搜索*，探索如何从选定的提交中提取你所需的信息。你将学习如何根据修订元数据（如提交信息的内容）限制搜索，或者查看文件的更改。这些技能将帮助你聚焦于项目历史的特定部分，从中提取信息，查看何时以及如何发生了变化，甚至通过历史二分法找到错误。

*第六章*，*使用 Git 进行协作开发*，从全局视角展示了各种协作方式，展示了不同的集中式和分布式工作流，它们的优缺点以及如何设置这些工作流。本章将重点讨论协作开发中的仓库级别交互。你还将学习信任链的概念，以及如何使用签名标签、签名合并、签名提交和签名推送。

*第七章*，*发布更改*，探讨了 Git 如何在本地仓库和远程仓库之间交换信息和数据，描述了在传输协议方面的选择，并展示了 Git 如何帮助管理访问这些远程仓库时可能需要的凭证。本章还将教你如何将更改推送到上游，以便它们可以出现在项目的官方历史仓库中。

*第八章*，*高级分支技术*，深入探讨了分布式开发中协作的细节。它探讨了本地分支和远程仓库中的分支之间的关系，并描述了同步分支和标签的技术。你将学习使用分支时的不同模式，包括基于主干的工作流和主题分支（也叫功能分支）工作流，它们的优缺点，以及何时使用它们。

*第九章*，*合并更改*，教授你如何使用合并（merge）和变基（rebase）（以及压缩合并 squash merge）将来自不同开发分支的更改合并在一起。本章还将解释不同类型的合并冲突，如何检查这些冲突以及如何解决它们。你将学会如何使用 cherry-pick 复制更改，以及如何应用单个补丁和补丁系列。

*第十章*，*保持历史清洁*，解释了为什么你可能想保持清晰的历史，什么时候可以并且应该这样做，以及如何做到这一点。你将找到逐步的指引，教你如何重新排序、压缩和拆分提交。本章还演示了如何从历史重写中恢复，并解释了如果不能重写历史应该怎么做，如何撤销提交的影响，如何为提交添加备注，以及如何通过替换机制改变项目历史的视图。

*第十一章*，*管理子项目*，解释并展示了如何将不同项目连接到框架超级项目的单一仓库中，从通过嵌入一个项目的代码到另一个项目中的强连接（单体仓库和子树）到通过嵌套仓库（子模块和类似解决方案）实现的轻连接。

*第十二章*，*管理大型仓库*，介绍了针对大型 Git 仓库的各种解决方案，无论它们是由于历史悠久、包含大量文件，还是包含包含一些大文件的项目。

*第十三章*，*自定义和扩展 Git*，涵盖了配置和扩展 Git 以适应你的需求。在这里，你将找到如何设置命令行以便更轻松使用的详细信息，并简要介绍图形界面。本章解释了如何使用钩子自动化 Git（重点是客户端钩子）——例如，如何让 Git 检查正在创建的提交是否符合特定的编码规范。

*第十四章*，*Git 管理*，关注 Git 的管理方面。它简要介绍了服务 Git 仓库的话题。在这里，你将学习如何使用服务器端钩子进行日志记录、访问控制、强制执行开发策略等其他目的。

*第十五章*，*Git 最佳实践*，汇集了版本控制、通用和 Git 特定的建议和最佳实践。这些内容涉及如何管理工作目录、创建提交及提交系列（拉取请求）、提交更改以供合并和同行评审等问题。

# 为了最大限度地从本书中获益

为了跟随本书中的示例并运行提供的命令，你需要安装 Git 软件（[`git-scm.com/`](https://git-scm.com/)），最好使用 2.41.0 或更高版本。Git 在每个平台上都有免费版本（如 Linux、Windows 和 macOS）。所有示例都使用文本版的 Git 界面，使用 bash shell（Git for Microsoft Windows 提供该 shell，而在默认情况下，Windows 系统没有它）。

| **本书涵盖的软件** | **操作系统要求** |
| --- | --- |
| Git | Windows、macOS 或 Linux |

要跟踪示例程序的开发过程，你需要参照 *第一章*，*Git 基础实践*，作为使用版本控制的示例演示，你还需要一个网页浏览器和文本编辑器（虽然推荐使用程序员编辑器或集成开发环境 IDE）。

# 下载示例代码文件

你可以从 GitHub 下载本书的示例代码文件，网址是 [`github.com/PacktPublishing/Mastering-Git---Second-Edition`](https://github.com/PacktPublishing/Mastering-Git---Second-Edition)。如果代码有更新，它将在 GitHub 仓库中更新。

我们还提供了来自我们丰富书籍和视频目录的其他代码包，网址是 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/)。快去看看吧！

# 使用的约定

本书中使用了多种文本约定。

`文本中的代码`: 表示文本中的代码字词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟网址、用户输入和 Twitter 句柄。示例如下：“然后，Bob 编写了负责网页应用行为的 JavaScript 源代码（`random.js`）。”

代码块的设置方式如下：

```
function getRandomInt(max) {
    return Math.floor(Math.random() * max) + 1;
}
function generateRandom() {
    let max = document.getElementById('max').value;
    alert(getRandomInt(max));
}
```

当我们希望你关注某个代码块的特定部分时，相关的行或项目会以粗体显示：

```
<body>
<button disabled>Generate number</button>
<label for="max">up to</label>
<input type="number" id="max" name="rand_max" value="10" />
<div id="result"></div>
</body>
</html>
```

任何命令行输入或输出均按如下方式书写：

```
$ mkdir css
$ cd css
```

**粗体**：表示新术语、重要单词或在屏幕上显示的单词。例如，菜单或对话框中的单词通常是**粗体**的。以下是一个示例：“从**管理**面板中选择**系统信息**。”

提示或重要说明

显示方式如下。

# 与我们联系

我们始终欢迎读者的反馈。

**一般反馈**：如果你对本书的任何方面有问题，可以通过电子邮件联系 customercare@packtpub.com，并在邮件主题中注明书名。

**勘误**：虽然我们已经非常仔细地确保内容的准确性，但错误还是会发生。如果你发现本书中有任何错误，我们将非常感激你能向我们报告。请访问[www.packtpub.com/support/errata](http://www.packtpub.com/support/errata)并填写表单。

**盗版**：如果你在互联网上发现我们作品的任何非法复制品，请提供其位置地址或网站名称。请通过版权@packt.com 联系我们，并附上该材料的链接。

**如果你有兴趣成为作者**：如果你在某个领域拥有专业知识，并且有兴趣写作或参与编写书籍，请访问[authors.packtpub.com](http://authors.packtpub.com)。

# 分享你的想法

阅读完*掌握 Git*后，我们非常希望听到你的想法！请[点击这里直接访问亚马逊评论页面](https://packt.link/r/1-835-08607-1)并分享你的反馈。

你的评论对我们和技术社区非常重要，它将帮助我们确保提供优质内容。

# 下载这本书的免费 PDF 副本

感谢购买这本书！

你喜欢在路上阅读，但又不能随时携带纸质书籍吗？

你的电子书购买是否与你选择的设备不兼容？

不用担心，现在购买每本 Packt 书籍，你都会免费获得该书的无 DRM PDF 版本。

在任何地方、任何设备上阅读。可以从你最喜欢的技术书籍中直接搜索、复制和粘贴代码到你的应用程序中。

优惠不仅仅止步于此，你还可以独享折扣、新闻通讯和每天免费内容的电子邮件。

按照这些简单的步骤来获得优惠：

1.  扫描二维码或访问下面的链接

![](img/B21194_QR_Free_PDF.jpg)

[`packt.link/free-ebook/978-1-83508-607-0`](https://packt.link/free-ebook/978-1-83508-607-0)

1.  提交你的购买证明

1.  就这样！我们会直接通过电子邮件将免费 PDF 和其他福利发送给你。
