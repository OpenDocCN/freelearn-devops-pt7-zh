- en: Jira Workflows
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Jira工作流
- en: Workflows are one of the core and most powerful features in Jira. They control
    how issues in Jira move from one stage to another as they are being worked on,
    sometimes being re-assigned to other users and capturing additional information
    during the process. For this reason, workflows can be thought of as the life cycle
    of issues.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 工作流是Jira中最核心和最强大的功能之一。它们控制着Jira中问题如何从一个阶段流转到另一个阶段，同时可能会重新分配给其他用户，并在过程中捕获附加信息。因此，工作流可以被看作是问题的生命周期。
- en: Unlike many other systems, Jira allows you to create your own workflows to resemble
    the work processes you may already have in your organization. This is a good example
    of how Jira is able to adapt to your needs without you having to change the way
    you work.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 与许多其他系统不同，Jira允许您创建自定义工作流，模拟您在组织中可能已有的工作流程。这是Jira如何适应您的需求，而不必改变工作方式的一个好例子。
- en: In this chapter, we will learn not only about how to create workflows with the
    new workflow designer, but also how to use workflow components, such as conditions
    and validators, to add additional behavior to your workflows. We will also look
    at the many different apps that are available to expand the possibilities of what
    you can do with workflows.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将不仅学习如何使用新的工作流设计器创建工作流，还将学习如何使用工作流组件，如条件和验证器，为工作流添加额外的行为。我们还将了解许多可用的应用程序，以扩展您在工作流中可以实现的功能。
- en: 'In this chapter, we will cover the following recipes:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将介绍以下几个配方：
- en: Setting up different workflows for your project
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为您的项目设置不同的工作流
- en: Capturing additional information during workflow transitions
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在工作流转换中捕获附加信息
- en: Using common transitions
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用常见转换
- en: Using global transitions
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用全局转换
- en: Restricting the availability of workflow transitions
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制工作流转换的可用性
- en: Validating user input in workflow transitions
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在工作流转换中验证用户输入
- en: Performing additional processing after a transition is executed
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在转换执行后进行额外处理
- en: Reacting to events coming from outside of Jira
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 响应来自Jira外部的事件
- en: Rearranging the workflow transition bar
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 调整工作流转换栏的顺序
- en: Restricting the resolution values in a transition
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 限制转换中的解决方案值
- en: Preventing issue updates in selected statuses
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 防止在选定状态下更新问题
- en: Making a field required during a workflow transition
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在工作流转换过程中使字段变为必填
- en: Creating custom workflow transition logic
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建自定义工作流转换逻辑
- en: Setting up different workflows for your project
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 为您的项目设置不同的工作流
- en: A workflow is like a flowchart in which issues can go from one state to another
    by following the direction paths between the states. In Jira's workflow terminology,
    the states are called **statuses**, and the paths are called **transitions**.
    We will use these two major components when customizing a workflow.
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 工作流就像一个流程图，问题可以通过遵循状态之间的方向路径，从一个状态流转到另一个状态。在Jira的工作流术语中，状态被称为**状态**，而路径被称为**转换**。我们将使用这两个主要组件来定制工作流。
- en: In this recipe, we will create a new, simple workflow from scratch. We will
    look at how to use existing statuses, create new statuses, and link them together
    using transitions.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个配方中，我们将从头开始创建一个新的简单工作流。我们将学习如何使用现有状态，创建新状态，并通过转换将它们链接在一起。
- en: How to do it...
  id: totrans-21
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'The first step is to create a new skeleton workflow in Jira:'
  id: totrans-22
  prefs: []
  type: TYPE_NORMAL
  zh: 第一步是创建一个新的骨架工作流：
- en: Log into Jira with a user that has a Jira Administrator's permission.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用具有Jira管理员权限的用户登录Jira。
- en: Navigate to **Administration** > **Issues** > **Workflows**.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** > **问题** > **工作流**。
- en: Click on the **Add workflow** button, and name the workflow `Simple Workflow`.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加工作流**按钮，并将工作流命名为`简单工作流`。
- en: Click on the **Diagram** button to use the workflow designer or diagram mode.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**图表**按钮以使用工作流设计器或图表模式。
- en: 'The following screenshot explains some of the key elements of the workflow
    designer:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图解释了工作流设计器的一些关键元素：
- en: '![](img/06e9cede-00d3-4d8e-b697-0aa0bf252811.png)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![](img/06e9cede-00d3-4d8e-b697-0aa0bf252811.png)'
- en: 'Now we have created a new, inactive workflow. The next step is to add various
    statuses for the issues to go through. Jira comes with a number of existing statuses,
    such as In Progress and Resolved, for us to use:'
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经创建了一个新的非激活工作流。下一步是为问题添加各种状态，问题将在这些状态之间流转。Jira 提供了一些现有的状态，例如“进行中”和“已解决”，供我们使用：
- en: Click on the **Add status **button.
  id: totrans-30
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加状态**按钮。
- en: Select the **In Progress **status from the list, and click on **Add**.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从列表中选择**进行中**状态，然后点击**添加**。
- en: Repeat the steps to add the Closed status.
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复步骤，添加关闭状态。
- en: You can type the status name into the field, and Jira will automatically find
    the status for you.
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以在字段中输入状态名称，Jira 会自动为你找到该状态。
- en: 'Once you have added the statuses to the workflow, you can drag them around
    to reposition them on the canvas. We can also create new statuses, as follows:'
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦你将状态添加到工作流中，你可以拖动它们以重新定位它们在画布上的位置。我们还可以创建新的状态，如下所示：
- en: Click on the **Add status **button.
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加状态**按钮。
- en: 'Name the new status `Frozen`, check the **Allow all statuses to transition
    to this one** option, and click on **Add**, as shown in the following screenshot:'
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新状态命名为`Frozen`，勾选**允许所有状态转换到此状态**选项，然后点击**添加**，如以下截图所示：
- en: '![](img/95e0e238-9dde-4ee4-9abe-65720327317d.png)'
  id: totrans-37
  prefs: []
  type: TYPE_IMG
  zh: '![](img/95e0e238-9dde-4ee4-9abe-65720327317d.png)'
- en: Jira will let you know if the status you are entering is new by showing the
    text (new status) next to the status name.
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你输入的状态是新的，Jira 会通过在状态名称旁边显示文本（新状态）来通知你。
- en: 'Now that we have added the statuses, we need to link them using transitions:'
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经添加了状态，我们需要通过转换来链接它们：
- en: Select the originating status, which, in this example, is **OPEN**.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择原始状态，本示例中是**OPEN**。
- en: 'Click on the small circle around the **OPEN **status and drag your cursor onto
    the **IN PROGRESS **status. This will prompt you to provide details for the new
    transition, as shown in the following screenshot:'
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**OPEN**状态周围的小圆圈，将光标拖到**IN PROGRESS**状态。这将提示你提供新转换的详细信息，如下截图所示：
- en: '![](img/e7f6ccee-8370-4934-bf4e-c996a15769a4.png)'
  id: totrans-42
  prefs: []
  type: TYPE_IMG
  zh: '![](img/e7f6ccee-8370-4934-bf4e-c996a15769a4.png)'
- en: Name the new transition `Start Progress`, and select the **None **option for
    the screen.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将新转换命名为`Start Progress`，并为屏幕选择**无**选项。
- en: Repeat the steps to create a transition called `Close` between the **IN** **PROGRESS **and **CLOSED **statuses.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复步骤，在**IN PROGRESS**和**CLOSED**状态之间创建一个名为`Close`的转换。
- en: 'You should finish with a workflow that looks like the following screenshot:'
  id: totrans-45
  prefs: []
  type: TYPE_NORMAL
  zh: 你应该完成一个如下所示的工作流：
- en: '![](img/8bc69826-320f-42a2-8f0c-10aa32b28eee.png)'
  id: totrans-46
  prefs: []
  type: TYPE_IMG
  zh: '![](img/8bc69826-320f-42a2-8f0c-10aa32b28eee.png)'
- en: 'At this point, the workflow is inactive, which means it is not being used by
    a project and you can edit it without any restrictions. Workflows are applied
    on a project and issue type basis. Perform the following steps to apply the new
    workflow to a project:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，工作流是非活动的，这意味着它尚未被项目使用，你可以在没有任何限制的情况下进行编辑。工作流是基于项目和问题类型应用的。执行以下步骤，将新工作流应用到项目：
- en: Select the project to apply the workflow to.
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要应用工作流的项目。
- en: Click on the **Administration **tab to go to the project administration page.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**管理**标签，进入项目管理页面。
- en: Select **Workflows **from the left-hand side of the page.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在页面左侧选择**工作流**。
- en: Click on **Add Existing **from the **Add Workflow **menu.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**添加工作流**菜单中点击**添加现有**。
- en: Select the new **Simple Workflow **from the dialog, and click on **Next**.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从对话框中选择新的**Simple Workflow**，然后点击**下一步**。
- en: Choose the issue types to apply (for example, Bug) the workflow to, and click
    on **Finish**.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要应用工作流的 issue 类型（例如，Bug），然后点击**完成**。
- en: After we have applied the workflow to a project, the workflow is placed in the
    active state. So, if we now create a new issue in the target project of the selected
    issue type, our new Simple Workflow will be used.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 在将工作流应用到项目后，工作流会处于活动状态。因此，如果我们现在在选定问题类型的目标项目中创建新问题，新的简单工作流将会被使用。
- en: Capturing additional information during workflow transitions
  id: totrans-55
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在工作流转换过程中捕获额外信息
- en: When users execute a workflow transition, we have an option to display an intermediate
    workflow screen. This is a very useful way of collecting some additional information
    from the user. For example, the default Jira workflow will display a screen for
    users to select the Resolution value when the issue is resolved.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 当用户执行工作流转换时，我们有一个选项可以显示一个中间的工作流屏幕。这是从用户那里收集额外信息的非常有用的方式。例如，默认的 Jira 工作流会在问题解决时显示一个屏幕，让用户选择分辨率值。
- en: Issues with resolution values are considered completed. You should only add
    the Resolution field to workflow screens that represent the closing of an issue.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 带有分辨率值的问题被认为是已完成的。你应该只将分辨率字段添加到表示问题关闭的工作流屏幕中。
- en: Getting ready
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: We need to have a workflow to configure, such as the Simple Workflow that was
    created in the previous recipe. We also need to have screens to display; Jira's
    out-of-the-box workflow screen and **Result Issue **Screen will suffice, but if
    you have created your own screens, they can also be used.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要配置一个工作流，比如在前面的示例中创建的简单工作流。我们还需要有显示屏幕；Jira 的开箱即用工作流屏幕和**结果问题**屏幕就足够了，但如果你已经创建了自己的屏幕，也可以使用它们。
- en: How to do it...
  id: totrans-60
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to add a screen to a workflow transition:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，将屏幕添加到工作流过渡中：
- en: Select the workflow to update, such as our **Simple Workflow**.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要更新的工作流，比如我们的**简单工作流**。
- en: Click on the **Edit **button if the workflow is active. This will create a draft
    workflow for us to work on.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果工作流是激活状态，点击**编辑**按钮。这将为我们创建一个草稿工作流以供修改。
- en: Select the **Start Progress **transition, and click on the **Edit **link from
    the panel on the right-hand side.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**开始进展**过渡，然后从右侧面板点击**编辑**链接。
- en: Select the screen you want to use, such as the workflow screen from the **Screen**
    drop-down menu, and click on **Save**.
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你想要使用的屏幕，比如从**屏幕**下拉菜单中选择工作流屏幕，然后点击**保存**。
- en: Repeat *step 3* and *step 4 *to add Resolve Issue Screen to the **Close** transition.
  id: totrans-66
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重复*步骤3*和*步骤4*，将解决问题屏幕添加到**关闭**过渡。
- en: If we are working with a draft workflow, we must click on the Publish Draft
    button to apply our changes to the live workflow.
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们正在使用草稿工作流，我们必须点击发布草稿按钮，将更改应用到实时工作流中。
- en: If you do not see your changes reflected, it is most likely you forgot to publish
    your draft workflow.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有看到更改生效，很可能是你忘记发布草稿工作流。
- en: Using common transitions
  id: totrans-69
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用常见过渡
- en: Often, you will have transitions that need to be made available from several
    different statuses in a workflow, such as the **Resolve** and **Close** transitions.
    In other words, these are transitions that have a common destination status but
    many different originating statuses.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，你会有一些需要从工作流中的多个不同状态提供的过渡，比如**解决**和**关闭**过渡。换句话说，这些过渡具有相同的目标状态，但来源状态不同。
- en: To help you simplify the process of creating these transitions, Jira lets you
    reuse an existing transition as a common transition if it has the same destination
    status.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 为了简化这些过渡的创建过程，Jira 允许你将现有的过渡重用为常见过渡，只要它们具有相同的目标状态。
- en: Common transitions are transitions that have the same destination status but
    different originating statuses.
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 常见过渡是指目标状态相同但来源状态不同的过渡。
- en: A common transition has an additional advantage of ensuring that transition
    screens and other relevant configurations, such as **validators**, will stay consistent.
    Otherwise, you will have to constantly check the various transitions every time
    you make a change to one of them.
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 常见过渡的一个额外优势是确保过渡屏幕和其他相关配置（如**验证器**）保持一致。否则，每次更改其中一个过渡时，你必须不断检查各种过渡。
- en: How to do it...
  id: totrans-74
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to create and use common transitions in your workflow:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，在工作流中创建并使用常见过渡：
- en: Select the workflow, and click on the **Edit** link to create a draft.
  id: totrans-76
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择工作流，然后点击**编辑**链接以创建草稿。
- en: Select the **Diagram** mode.
  id: totrans-77
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图表**模式。
- en: Create a transition between two statuses, for example, **Open** and **Closed**.
  id: totrans-78
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在两个状态之间创建过渡，例如**打开**和**关闭**。
- en: 'Create another transition from a different status to the same destination status,
    and click on the **Reuse a transition** tab, as seen in the following screenshot:'
  id: totrans-79
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从不同的状态创建另一个过渡到相同的目标状态，并点击**重用过渡**选项卡，如下图所示：
- en: '![](img/5bc646fd-c593-4341-9097-eba33493034d.png)'
  id: totrans-80
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5bc646fd-c593-4341-9097-eba33493034d.png)'
- en: Select the transition created in *step 3* from the **Transition to reuse** drop-down
    menu, and click on **Add**.
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**重用过渡**下拉菜单中选择在*步骤3*中创建的过渡，然后点击**添加**。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-82
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: See also
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另见
- en: Refer to the *Using global transitions* recipe, which helps us to create complicated
    workflows with ease by allowing an issue to transition into a status at any time.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 请参阅*使用全局过渡*示例，这将帮助我们轻松创建复杂的工作流，通过允许问题随时过渡到某个状态。
- en: Using global transitions
  id: totrans-85
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用全局过渡
- en: While a common transition is a great way to share transitions in a workflow
    and reduce the amount of management work that would otherwise be required, it
    has the limitation of having to manually create the transitions between the various
    statuses.
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然公共转换是共享工作流中的转换并减少管理工作量的好方法，但它的限制在于需要手动创建各个状态之间的转换。
- en: As your workflow starts becoming more complicated, explicitly creating the transitions
    becomes a tedious job; this is where **global transitions** come in.
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 随着工作流变得越来越复杂，显式地创建转换变得是一项繁琐的工作；这时**全局转换**就派上用场了。
- en: A global transition is similar to a common transition in the sense that they
    both share the property of having a single destination status. The difference
    between the two is that the global transition is a single transition that is available
    to all the statuses in a workflow.
  id: totrans-88
  prefs: []
  type: TYPE_NORMAL
  zh: 全局转换类似于公共转换，因为它们都具有一个单一的目标状态。二者的区别在于，全局转换是一个可供工作流中所有状态使用的单一转换。
- en: In this recipe, we will look at how to use global transitions so that issues
    can be transitioned to the Frozen status from any status throughout the workflow.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: 在本方案中，我们将展示如何使用全局转换，以便问题可以从工作流中的任何状态转换到冻结状态。
- en: Getting ready
  id: totrans-90
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: As usual, you need to have a workflow you can edit. Since we will be demonstrating
    how global transitions work, you need to have a status called Frozen in your workflow
    and ensure that there are no transitions linked to it.
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 如常，你需要有一个可以编辑的工作流。由于我们将演示全局转换的工作原理，因此需要在工作流中拥有一个名为冻结的状态，并确保没有任何转换链接到它。
- en: How to do it...
  id: totrans-92
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to create and use global transitions in your workflow:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以在工作流中创建并使用全局转换：
- en: Select and edit the workflow you will be adding the global transition to.
  id: totrans-94
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑你将添加全局转换的工作流。
- en: Select **Diagram** mode.
  id: totrans-95
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图示**模式。
- en: Select the **Frozen**status.
  id: totrans-96
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**冻结**状态。
- en: Check the **Allow all statuses to transition to this one** option.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选**允许所有状态转换到此状态**选项。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: 'The following screenshot depicts the preceding steps:'
  id: totrans-99
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了之前的步骤：
- en: '![](img/92e5b7ea-42b5-49b1-abd7-1a95eed7ec97.png)'
  id: totrans-100
  prefs: []
  type: TYPE_IMG
  zh: '![](img/92e5b7ea-42b5-49b1-abd7-1a95eed7ec97.png)'
- en: 'Once you have created a global transition for a status, it will be represented
    as an **All** transition, as shown in the following screenshot:'
  id: totrans-101
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 一旦为某个状态创建了全局转换，它将被表示为**全部**转换，如下图所示：
- en: '![](img/dd7b70b5-5a9b-41d2-9d46-83adc432f3fd.png)'
  id: totrans-102
  prefs: []
  type: TYPE_IMG
  zh: '![](img/dd7b70b5-5a9b-41d2-9d46-83adc432f3fd.png)'
- en: After the global transition is added to the **Frozen** status, you will be able
    to transition issues to FROZEN regardless of their current status.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 在**冻结**状态添加全局转换后，无论问题当前处于何种状态，你都可以将其转换为冻结状态。
- en: You can only add global transitions in Diagram mode.
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 你只能在图示模式下添加全局转换。
- en: See also
  id: totrans-105
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另见
- en: Refer to the *Restricting the availability of workflow transitions* recipe,
    which explains how to remove a transition when an issue is already in the Frozen
    status.
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 请参考*限制工作流转换可用性的*方案，其中解释了如何在问题已经处于冻结状态时移除转换。
- en: Restricting the availability of workflow transitions
  id: totrans-107
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 限制工作流转换可用性
- en: 'Workflow transitions, by default, are accessible to anyone who has access to
    the issue. There will be times when you want to restrict access to certain transitions.
    For example, you might want to restrict access to the Freeze Issue transition
    for the following reasons:'
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，工作流转换对所有有权限访问问题的用户都可以使用。有时候，你可能希望限制某些转换的访问。例如，你可能希望限制冻结问题转换的访问，原因如下：
- en: You want the transition to be available only to users in specific groups or
    project roles.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 你希望该转换仅对特定组或项目角色中的用户可用。
- en: Since the transition is a global transition, it is available to all the workflow
    statuses, but it does not make sense to show the transition when the issue is
    already in the **Frozen** status.
  id: totrans-110
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 由于该转换是全局转换，它对所有工作流状态都可用，但当问题已经处于**冻结**状态时，显示该转换没有意义。
- en: To restrict the availability of a workflow transition, we can use workflow conditions.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 要限制工作流转换的可用性，我们可以使用工作流条件。
- en: Getting ready
  id: totrans-112
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'For this recipe, we need to have the JSU Automation Suite for Jira Workflows
    app installed. You can download it from the following link, or install it directly
    from the **Universal Plugin Manager** (**UPM**): [https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities).'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个教程，我们需要安装JSU Automation Suite for Jira Workflows应用程序。您可以通过以下链接下载该应用程序，或者直接通过**通用插件管理器**（**UPM**）安装：[https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities)。
- en: How to do it...
  id: totrans-114
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'We need to add a new workflow condition to the transition we want to apply
    restrictions to:'
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 我们需要向我们希望应用限制的过渡添加一个新的工作流条件：
- en: Select and edit the workflow to configure.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑工作流进行配置。
- en: Select **Diagram** mode.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图表**模式。
- en: Click on the **Frozen** global workflow transition.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**冻结**全局工作流过渡。
- en: Click on the **Conditions** link from the panel on the right-hand side.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击右侧面板中的**条件**链接。
- en: Click on **Add condition**, select Value Field (JSU) from the list, and click
    on **Add**.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加条件**，从列表中选择Value Field (JSU)，然后点击**添加**。
- en: 'Configure the condition with the following parameters:'
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下参数配置条件：
- en: The `Status` field for **Field**
  id: totrans-122
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Status`字段用于**字段**'
- en: The not-equal sign, `!=`, for **Condition**
  id: totrans-123
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 不等于符号，`!=`，用于**条件**
- en: '`Frozen` for **Value**'
  id: totrans-124
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`Frozen`用于**值**'
- en: '`String` for **Comparison Type**'
  id: totrans-125
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`String`用于**比较类型**'
- en: 'This means that the transition will be shown only if the issue''s status field
    value is not Frozen as shown in the following screenshot:'
  id: totrans-126
  prefs: []
  type: TYPE_NORMAL
  zh: 这意味着，只有当问题的状态字段值不是冻结时，才会显示该过渡，如以下截图所示：
- en: '![](img/2e72af28-4680-4fe8-80b2-480d6eaa25db.png)'
  id: totrans-127
  prefs: []
  type: TYPE_IMG
  zh: '![](img/2e72af28-4680-4fe8-80b2-480d6eaa25db.png)'
- en: Click on the **Add** button to complete the condition setup.
  id: totrans-128
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮以完成条件设置。
- en: At this point, we have added a condition that will make sure that the Freeze
    Issue transition is not shown when the issue is already in the Frozen status.
    The next step is to add another condition to restrict the transition to be available
    only to users in the Developer role.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，我们已经添加了一个条件，确保当问题已经处于冻结状态时，不会显示冻结问题的过渡。下一步是添加另一个条件，限制该过渡仅对开发者角色的用户可用。
- en: Click on **Add condition** again and select **User in the Project Role** condition.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 再次点击**添加条件**，并选择**项目角色中的用户**条件。
- en: Select the Developer project role and click on **Add**.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择开发者项目角色并点击**添加**。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-132
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: After you have applied the workflow conditions, the Frozen transition will no
    longer be available if the issue is already in the Frozen status, and/or if the
    current user is not in the Developer project role.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦应用了工作流条件，如果问题已经处于冻结状态，或者当前用户不在开发者项目角色中，则冻结过渡将不再可用。
- en: How it works...
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: When a workflow transition option is to be rendered on the page, such as when
    viewing an issue, all its associated conditions are evaluated to determine if
    the option should be displayed. If there is more than one condition, the transition
    with conditions will only be displayed when one or all of the conditions pass,
    depending on the logic setting (see the following section) for the conditions.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: 当工作流过渡选项在页面上呈现时，比如查看问题时，所有相关的条件都会被评估，以确定是否显示该选项。如果有多个条件，只有当一个或全部条件通过时，才会显示带有条件的过渡，具体取决于条件的逻辑设置（参见以下部分）。
- en: There's more...
  id: totrans-136
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多……
- en: Using the Value Field condition (which comes with the JSU Automation Suite for
    Jira Workflows app) is one of the many ways in which we can restrict the availability
    of a transition based on the issue's current status. There is another app, called
    **Jira Misc Workflow Extensions**, which comes with a previous status condition
    for checking against the previous status an issue was in. You can download it
    from [https://marketplace.atlassian.com/plugins/com.innovalog.jmwe.jira-misc-workflow-extensions](https://marketplace.atlassian.com/plugins/com.innovalog.jmwe.jira-misc-workflow-extensions).
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Value Field条件（它随JSU Automation Suite for Jira Workflows应用程序提供）是根据问题的当前状态限制过渡可用性的多种方式之一。还有另一个名为**Jira
    Misc Workflow Extensions**的应用程序，提供了一个检查问题上一个状态的条件。您可以从[https://marketplace.atlassian.com/plugins/com.innovalog.jmwe.jira-misc-workflow-extensions](https://marketplace.atlassian.com/plugins/com.innovalog.jmwe.jira-misc-workflow-extensions)下载它。
- en: When you have more than one workflow condition applied to the transition, as
    in our example, the default behavior is that all conditions must pass for the
    transition to be available.
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 当对过渡应用多个工作流条件时，如我们的示例所示，默认行为是所有条件必须通过，过渡才会生效。
- en: 'You can change this so that only one condition needs to pass for the transition
    to be available by changing the condition group logic from **All of the following
    conditions** to **Any of the following conditions**, as shown in the following
    screenshot:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以更改此设置，使得仅需通过一个条件，过渡就会生效，方法是将条件组逻辑从**所有以下条件**更改为**任何以下条件**，如下所示：
- en: '![](img/f3c517ee-a848-413c-919b-a1ebd488d3f9.png)'
  id: totrans-140
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f3c517ee-a848-413c-919b-a1ebd488d3f9.png)'
- en: Make sure you pay close attention when configuring this to make sure you do
    not expose workflow transitions to users who should not be allowed to execute
    them.
  id: totrans-141
  prefs: []
  type: TYPE_NORMAL
  zh: 在配置此项时，请务必仔细检查，确保不会将工作流过渡暴露给那些不应执行这些过渡的用户。
- en: Validating user input in workflow transitions
  id: totrans-142
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在工作流过渡中验证用户输入
- en: For workflow transitions that have transition screens, you can add validation
    logic to make sure what the users put in is what you are expecting. This is a
    great way to ensure data integrity, and we can do this with workflow validators.
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: 对于具有过渡屏幕的工作流过渡，您可以添加验证逻辑，以确保用户输入的内容符合预期。这是确保数据完整性的好方法，我们可以通过工作流验证器来实现。
- en: In this recipe, we will add a validator to perform a date comparison between
    a custom field and the issue's creation date, so the date value we select for
    the custom field must be after the issue's creation date.
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: 在此方案中，我们将添加一个验证器，以执行自定义字段与问题创建日期之间的日期比较，因此我们为自定义字段选择的日期值必须晚于问题的创建日期。
- en: Getting ready
  id: totrans-145
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'For this recipe, we need to have the JSU Automation Suite for Jira Workflows
    app installed. You can download it from the following link, or install it directly
    using the UPM: [https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities).'
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 对于此方案，我们需要安装JSU自动化套件 for Jira Workflows应用。您可以通过以下链接下载，或直接使用UPM安装：[https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities)。
- en: Since we are also doing a date comparison, we need to create a new date custom
    field called `Start Date` and add it to the workflow screen.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们也在进行日期比较，因此需要创建一个名为`开始日期`的新日期自定义字段，并将其添加到工作流屏幕中。
- en: How to do it...
  id: totrans-148
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to add validation rules during a workflow transition:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以在工作流过渡中添加验证规则：
- en: Select and edit the workflow to configure.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑工作流进行配置。
- en: Select the **Diagram** mode.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图表**模式。
- en: Select the **Start Progress** transition and click on the **Validators** link
    on the right-hand side.
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**开始进度**过渡，并点击右侧的**验证器**链接。
- en: Click on the **Add validator** link and select **Date Compare (JSU)** from the
    list.
  id: totrans-153
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加验证器**链接，并从列表中选择**日期比较（JSU）**。
- en: 'Configure the validator with the following parameters:'
  id: totrans-154
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下参数配置验证器：
- en: The `Start Date` custom field for **This date.**
  id: totrans-155
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`开始日期`自定义字段为**此日期**。'
- en: The greater-than sign, `>`, for **Condition**
  id: totrans-156
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 大于号`>`用于**条件**
- en: '`Created` for Compare with'
  id: totrans-157
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`创建时间`用于进行比较'
- en: An optional custom error message, or leave it blank and a default error message
    will be displayed if the validation fails
  id: totrans-158
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可选的自定义错误信息，或者如果验证失败，可以留空，系统将显示默认的错误信息。
- en: 'Click on **Add** to add the validator:'
  id: totrans-159
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**以添加验证器：
- en: '![](img/f2463e8d-4309-4289-bcbc-6045a4973d56.png)'
  id: totrans-160
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f2463e8d-4309-4289-bcbc-6045a4973d56.png)'
- en: Click on **Publish Draft** to apply the change.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: 'After adding the validator, if we now try to select a date that is before the
    issue''s create date, Jira will prompt you with an error message and stop the
    transition from going through, as shown in the following screenshot:'
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 添加验证器后，如果我们尝试选择一个早于问题创建日期的日期，Jira会提示错误信息，并阻止过渡进行，如下图所示：
- en: '![](img/1b0825c9-fcc9-4108-8c0d-11bf7de82f66.png)'
  id: totrans-163
  prefs: []
  type: TYPE_IMG
  zh: '![](img/1b0825c9-fcc9-4108-8c0d-11bf7de82f66.png)'
- en: As we can see, the date validation fails, and our custom defined error message
    is displayed.
  id: totrans-164
  prefs: []
  type: TYPE_NORMAL
  zh: 如我们所见，日期验证失败，且我们自定义的错误信息被显示。
- en: How it works...
  id: totrans-165
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: Validators are run before the workflow transition is executed. This way, validators
    can intercept and prevent a transition from going through if any validation logic
    fails.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 验证器在工作流过渡执行之前运行。这样，如果任何验证逻辑失败，验证器可以拦截并阻止过渡的进行。
- en: If you have more than one validator, all of them must pass for the transition
    to go through.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有多个验证器，必须确保所有验证器都通过，转换才能继续进行。
- en: See also
  id: totrans-168
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另见
- en: Validators can be used to make a field required only during workflow transitions.
    Refer to the *Making a field required during a workflow transition* recipe for
    more details.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 验证器可用于使字段在工作流转换过程中仅为必填项。有关详细信息，请参阅*在工作流转换过程中使字段为必填项*的方案。
- en: Performing additional processing after a transition is executed
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在转换执行后执行额外的处理
- en: Jira allows you to perform additional tasks as part of a workflow transition
    through the use of post functions. Jira makes heavy use of post functions internally;
    for example, in the case of an out-of-the-box workflow, the resolution field value
    is cleared automatically when you reopen an issue.
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 允许您通过使用后置操作在工作流转换过程中执行额外的任务。Jira 在内部大量使用后置操作；例如，在开箱即用的工作流中，当您重新打开问题时，解决方案字段的值会自动清空。
- en: In this recipe, we will look at how to add post functions to a workflow transition.
    We will add a post function to automatically clear out the value stored in a **Reason
    for Freezing** custom field when we take it out of the **Frozen** status.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在此方案中，我们将学习如何向工作流转换中添加后置操作。我们将添加一个后置操作，在我们将问题从**冻结**状态移除时自动清空**冻结原因**自定义字段中的值。
- en: Getting ready
  id: totrans-173
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: Since we are clearing the value of a custom field called Reason for Freezing,
    we need to have a Text field (multi-line) custom field created and add it to the
    screens used by the project.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们要清除名为“冻结原因”的自定义字段的值，因此需要创建一个文本字段（多行）类型的自定义字段，并将其添加到项目使用的屏幕中。
- en: By default, Jira comes with a post function that can change the values for standard
    issue fields, but since **Reason for Freezing** will be a custom field, we need
    to have the JSU Automation Suite for Jira Workflows app installed.
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Jira 带有一个后置操作，可以更改标准问题字段的值，但由于**冻结原因**将是一个自定义字段，我们需要安装 JSU 自动化套件 for Jira
    工作流应用。
- en: 'You can download it from the following link, or install it directly using the
    UPM: [https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities).'
  id: totrans-176
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以通过以下链接下载，或使用 UPM 直接安装：[https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities)。
- en: How to do it...
  id: totrans-177
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to add processing logic after a workflow transition
    is executed:'
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，在工作流转换执行后添加处理逻辑：
- en: Select and edit the workflow to configure.
  id: totrans-179
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑工作流以进行配置。
- en: Select the **Diagram** mode.
  id: totrans-180
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图表**模式。
- en: Create a new workflow transition that will take the issue out of the **Frozen**
    status to another status.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的工作流转换，将问题从**冻结**状态转换到另一个状态。
- en: Click on the **Post functions** link for the newly created transition.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击新创建的转换的**后置操作**链接。
- en: Click on **Add post** **function**, select **Clear Field Value (JSU)** from
    the list, and click on **Add**.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加后置操作**功能，从列表中选择**清空字段值（JSU）**，然后点击**添加**。
- en: Select the Reason for Freezing field from **Field**, and click on the **Add**
    button.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**字段**中选择“冻结原因”字段，然后点击**添加**按钮。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: With the post function in place, after you have executed the transition, the
    **Reason for Freezing** field will be cleared out. You can also see from the issue's
    change history, as part of the transition execution, where the **Status** field
    is changed from **Frozen** to **Open**, the change for the **Reason for Freezing**
    field is also recorded.
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 在设置好后置操作后，执行转换后，**冻结原因**字段的值将被清空。您还可以从问题的变更历史记录中看到，作为转换执行的一部分，**状态**字段从**冻结**变更为**打开**，同时**冻结原因**字段的变更也被记录。
- en: How it works...
  id: totrans-187
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: 'Post functions are run after the transition has been executed. When you add
    a new post function, you might notice that the transition already has a number
    of post functions pre-added; this is shown in the screenshot that follows:'
  id: totrans-188
  prefs: []
  type: TYPE_NORMAL
  zh: 后置操作会在转换执行后运行。当您添加新的后置操作时，您可能会注意到该转换已经预先添加了多个后置操作；这在接下来的截图中显示：
- en: '![](img/53e769ac-3e2c-479f-bf38-f08e0a4c2253.png)'
  id: totrans-189
  prefs: []
  type: TYPE_IMG
  zh: '![](img/53e769ac-3e2c-479f-bf38-f08e0a4c2253.png)'
- en: These post functions are system post functions that carry out important internal
    functions, such as keeping the search index up to date. The order of these post
    functions is important.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 这些后置操作是系统后置操作，执行重要的内部功能，例如保持搜索索引的最新状态。这些后置操作的顺序非常重要。
- en: Always add your own post functions to the top of the list.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 总是将你自己的后置功能添加到列表的顶部。
- en: 'For example, any changes to issue field values, such as the one we just added,
    should always happen before the Re-index post function, so by the time the transition
    is completed, all the field indexes are up to date, and ready to be searched:'
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，任何对问题字段值的更改，如我们刚刚添加的，更改应始终发生在重新索引后置功能之前，这样在过渡完成时，所有字段索引都会是最新的，并准备好被搜索：
- en: Reacting to events coming from outside of Jira
  id: totrans-193
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 对来自Jira外部事件的反应
- en: When you are using Jira with other systems, especially applications also built
    by Atlassian, such as Bitbucket and Bamboo, you can get a lot more synergy with
    them working together. One example of such synergy is automatically executing
    a workflow transition when certain actions happen from the other application.
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 当你将Jira与其他系统一起使用时，尤其是与Atlassian构建的应用程序（如Bitbucket和Bamboo）一起使用时，你可以与它们一起获得更多的协同效应。一个协同效应的例子是，当其他应用程序发生某些操作时，自动执行工作流过渡。
- en: In this recipe, we will look at such a use case, where if a developer commits
    some code against a Jira issue, we automatically transition the issue into the
    **In Progress** status without needing the developer to manually go into Jira
    and perform the workflow transition.
  id: totrans-195
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将讨论这样的一个使用案例：如果开发人员针对Jira问题提交了一些代码，我们将自动将问题过渡到**进行中**状态，而无需开发人员手动进入Jira并执行工作流过渡。
- en: Getting ready
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: Since our use case is about developers committing code, you will need to have
    a supported code management application available; both Bitbucket and GitHub are
    supported. In this recipe, we will be using Bitbucket. You can get a trial version
    of the application from [https://www.atlassian.com/software/bitbucket/download](https://www.atlassian.com/software/bitbucket/download).
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们的使用案例是关于开发人员提交代码，你需要有一个支持的代码管理应用程序；Bitbucket和GitHub都被支持。在这个教程中，我们将使用Bitbucket。你可以从[https://www.atlassian.com/software/bitbucket/download](https://www.atlassian.com/software/bitbucket/download)获取该应用的试用版。
- en: How to do it...
  id: totrans-198
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To automatically transition an issue based on the outside event, we need to
    add the appropriate workflow trigger to the transition:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 为了基于外部事件自动过渡问题，我们需要将适当的工作流触发器添加到过渡中：
- en: Select and edit the workflow to configure.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑工作流进行配置。
- en: Select the **Start Progress** transition.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**开始进度**过渡。
- en: Click on the **Triggers** button.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**触发器**按钮。
- en: Click on the **Add trigger** button. If the button is disabled, it means you
    have not integrated Jira with Bitbucket yet.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加触发器**按钮。如果按钮被禁用，意味着你还没有将Jira与Bitbucket集成。
- en: 'Select the **Commit created** trigger and click **Next**:'
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**创建提交**触发器并点击**下一步**：
- en: '![](img/179a7d6b-0699-47e3-b830-aa76cd8fe76d.png)'
  id: totrans-205
  prefs: []
  type: TYPE_IMG
  zh: '![](img/179a7d6b-0699-47e3-b830-aa76cd8fe76d.png)'
- en: Click **Add Trigger** to apply the trigger to the workflow transition.
  id: totrans-206
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加触发器**以将触发器应用到工作流过渡中。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: With the trigger applied, if you commit some code with the issue's key as part
    of the commit message, the issue will be automatically transitioned to the destination
    status, in this case, the In Progress status.
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: 应用触发器后，如果你在提交代码时将问题的关键字作为提交信息的一部分，问题将自动过渡到目标状态，在这种情况下是进行中状态。
- en: Rearranging the workflow transition bar
  id: totrans-209
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重新排列工作流过渡条
- en: By default, workflow transitions are displayed based in the order in which they
    are defined in the workflow (as listed in text mode); the first two transitions
    will be shown as buttons, and the remaining transitions will be added to the **Workflow**
    menu.
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，工作流过渡会按工作流中定义的顺序显示（如文本模式中所列）；前两个过渡将显示为按钮，其余过渡将被添加到**工作流**菜单中。
- en: This sequence is determined by the order in which the transitions are added,
    so you cannot change that. But you can rearrange them by using the `opsbar-sequence`
    property.
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: 这个顺序由添加过渡的顺序决定，所以你不能更改它。但你可以通过使用`opsbar-sequence`属性来重新排列它们。
- en: In this recipe, we will move the Frozen transition out from the Workflow menu
    and to its own transition button so that the users can easily access it.
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个教程中，我们将把冻结过渡从工作流菜单中移出，并放到它自己的过渡按钮上，以便用户可以轻松访问它。
- en: How to do it...
  id: totrans-213
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to rearrange the order of transitions to be displayed
    in the issue transition bar:'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以重新排列要显示在问题过渡条中的过渡顺序：
- en: Select and edit the workflow to configure.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑工作流进行配置。
- en: Select the **Frozen** global transition.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**冻结**全局过渡。
- en: Click on the **Properties** button.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**属性**按钮。
- en: Enter `opsbar-sequence` as the **Property Key** and the value `10` in **Property
    Value** and click on **Add**. Click on **Publish Draft** to apply the change.
  id: totrans-218
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入`opsbar-sequence`作为**属性键**，并在**属性值**中输入`10`，然后点击**添加**。点击**发布草稿**以应用更改。
- en: 'As shown in the following screenshot, by increasing the sequence value of the
    workflow transition, it is moved out of the Workflow menu and made into its own
    button:'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: 如下截图所示，通过增加工作流转换的顺序值，它会被移出工作流菜单，并单独成为一个按钮：
- en: '![](img/fb4490d6-557f-4c7f-9f8f-044e0a556b49.png)'
  id: totrans-220
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fb4490d6-557f-4c7f-9f8f-044e0a556b49.png)'
- en: Now let's understand the working part.
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，让我们来了解一下工作原理部分。
- en: How it works...
  id: totrans-222
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: The `opsbar-sequence` property orders the workflow transitions numerically,
    from the smallest to the largest. Its value needs to be a positive integer. The
    smaller the number, the closer the transition will appear to the front.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: '`opsbar-sequence`属性按数字顺序排列工作流转换，从最小到最大。其值必须是正整数。数字越小，转换按钮越靠前。'
- en: There's more...
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: Jira only displays the first two transitions as buttons. You can change this
    setting by editing the `ops.bar.group.size.opsbar-transitions` property in the
    `jira-config.properties` file located in your `JIRA_HOME` directory.
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: Jira只显示前两个转换作为按钮。您可以通过编辑位于`JIRA_HOME`目录中的`jira-config.properties`文件中的`ops.bar.group.size.opsbar-transitions`属性来更改此设置。
- en: 'All you have to do is edit the file, set the property to the desired number
    of transition buttons to display as shown (we are setting the number of transition
    buttons to `3`), and restart Jira:'
  id: totrans-226
  prefs: []
  type: TYPE_NORMAL
  zh: 你只需编辑文件，设置属性以显示所需数量的转换按钮，如所示（我们将转换按钮的数量设置为`3`），然后重新启动Jira：
- en: '[PRE0]'
  id: totrans-227
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: If you do not see the `jira-config.properties` file, you can simply create a
    new file with the same name and add your properties there.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有看到`jira-config.properties`文件，您可以简单地创建一个具有相同名称的新文件，并在其中添加您的属性。
- en: 'See the following screenshot:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 请查看以下截图：
- en: '![](img/6a7d24c2-06df-446a-832d-323586890888.png)'
  id: totrans-230
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6a7d24c2-06df-446a-832d-323586890888.png)'
- en: Jira now shows three transition buttons instead of two.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 现在Jira显示了三个转换按钮，而不是两个。
- en: Restricting the resolution values in a transition
  id: totrans-232
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 限制转换中的解决方案值
- en: Normally, issue resolution values such as **Fixed** and **Won't Fix** are global,
    so regardless of the project and issue type, the same set of values will be available.
    As you implement different workflows in Jira, you may find that certain resolutions
    are not relevant for a given project or issue type.
  id: totrans-233
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，问题的解决方案值如**已修复**和**不会修复**是全局的，因此无论项目和问题类型如何，都会有相同的解决方案值可用。当您在Jira中实现不同的工作流时，可能会发现某些解决方案与某个特定项目或问题类型无关。
- en: In this recipe, we will select a subset of the global resolutions available
    when we close issues using our Simple Workflow.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个实例中，我们将选择一个在使用简单工作流关闭问题时可用的全局解决方案子集。
- en: How to do it...
  id: totrans-235
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to selectively include a subset of resolutions
    for a given workflow transition:'
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，以选择性地包含给定工作流转换的部分解决方案：
- en: Select and edit the **Simple Workflow**.
  id: totrans-237
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑**简单工作流**。
- en: Select the **Close Issue** workflow transition.
  id: totrans-238
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**关闭问题**工作流转换。
- en: Click on the **Properties** option.
  id: totrans-239
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**属性**选项。
- en: Enter `jira.field.resolution.include` for the **Property Name** and the IDs
    (comma separated) for resolutions we want to make available into **Property Value**.
    So, if we want to only include the **Done**, **Won't Do**, and **Duplicate** resolutions,
    we need to specify the `10000`, `10001`, and `10002` values as the property values,
    with no spaces in between.
  id: totrans-240
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**属性名称**中输入`jira.field.resolution.include`，并将我们希望包含的解决方案的ID（用逗号分隔）输入到**属性值**中。因此，如果我们只想包含**已完成**、**不做**和**重复**的解决方案，我们需要将`10000`、`10001`和`10002`作为属性值指定，中间不留空格。
- en: 'Take a look at the following screenshot:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 看一下下面的截图：
- en: '![](img/c3ac72cd-d530-46ac-a0cb-235e00d22750.png)'
  id: totrans-242
  prefs: []
  type: TYPE_IMG
  zh: '![](img/c3ac72cd-d530-46ac-a0cb-235e00d22750.png)'
- en: Click on **Publish Draft** to apply the change.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: Note that the actual values for the three resolutions might be different for
    your Jira instance. Please double-check their values when configuring the property.
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: 请注意，这三个解决方案的实际值可能与您的Jira实例不同。配置属性时，请再次确认它们的值。
- en: There's more...
  id: totrans-245
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: Other than selecting a subset of resolutions, there is also a `jira.field.resolution.exclude`
    property that lets you exclude a subset of resolutions from the global list.
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 除了选择解决方案的子集之外，还有一个`jira.field.resolution.exclude`属性，可以让您从全局列表中排除某些解决方案。
- en: Preventing issue updates in selected statuses
  id: totrans-247
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 防止在特定状态下更新问题
- en: By default, when an issue is in the Closed status, it cannot be updated. It
    is a good practice to make issues read-only when they are in a status that signifies
    logical completion.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，当问题处于已关闭状态时，无法进行更新。通常的做法是，当问题处于表示逻辑完成的状态时，将其设为只读。
- en: In this recipe, we will make sure that, when an issue is moved to the Frozen
    status, it can no longer be updated until it is moved back to the Open status.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: 在本食谱中，我们将确保，当问题被移动到冻结状态时，直到它被移回开放状态之前，将无法再进行更新。
- en: How to do it...
  id: totrans-250
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to make an issue read-only when it is in the Frozen
    status:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，在问题处于冻结状态时将其设为只读：
- en: Select and edit the workflow to update.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑要更新的工作流。
- en: Select the **Frozen** workflow status.
  id: totrans-253
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**冻结**工作流状态。
- en: Click on the **Properties** link from the panel on the right-hand side.
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击右侧面板中的**属性**链接。
- en: Enter `jira.issue.editable` for **Property Key** and `false` into **Property
    Value**, and click on **Add**.
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**属性键**中输入`jira.issue.editable`，在**属性值**中输入`false`，然后点击**添加**。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: Making a field required during a workflow transition
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在工作流转换过程中将字段设置为必填
- en: Using field configuration to make a field required will make the field required
    all the time. There are many use cases where you will only need the field to be
    required during certain workflow transitions.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 使用字段配置将字段设置为必填将使该字段始终处于必填状态。然而，有许多使用场景中，您可能只需要在某些工作流转换期间将字段设置为必填。
- en: Getting ready
  id: totrans-259
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'For this recipe, we need to have the JSU Automation Suite for Jira Workflows
    app installed. You can download it from the following link, or install it directly
    using the UPM: [https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities).'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本食谱，您需要安装JSU自动化套件用于Jira工作流应用程序。您可以通过以下链接下载，或者直接使用UPM安装：[https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities](https://marketplace.atlassian.com/plugins/com.googlecode.jira-suite-utilities)。
- en: How to do it...
  id: totrans-261
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to make the Reason for Freezing field required
    during the Frozen transition:'
  id: totrans-262
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤，在冻结转换期间将“冻结原因”字段设置为必填：
- en: Select and edit the **Simple Workflow**.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑**简单工作流**。
- en: Select **Diagram** mode.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图表**模式。
- en: Click on the **Frozen** global workflow transition.
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**冻结**全局工作流转换。
- en: Click on the **Validators** link from the panel on the right-hand side.
  id: totrans-266
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击右侧面板中的**验证器**链接。
- en: Click on **Add validator**, select Fields Required (JSU) from the list, and
    click on **Add**.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加验证器**，从列表中选择“字段必填（JSU）”，然后点击**添加**。
- en: 'Select the **Reason for Freezing** field from **Available fields** and click
    on **Add >>**. This will add the selected field to the **Required fields** list,
    as seen in the next screenshot:'
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**可用字段**中选择**冻结原因**字段，并点击**添加 >>**。这将把所选字段添加到**必填字段**列表中，如下图所示：
- en: '![](img/aaf22fb1-bd39-473f-a9ff-40f1df191962.png)'
  id: totrans-269
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aaf22fb1-bd39-473f-a9ff-40f1df191962.png)'
- en: Enter an optional error message if you would like to display a customized message
    instead of the default error message.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您希望显示自定义消息而非默认的错误消息，请输入可选的错误消息。
- en: Click on the **Add** button to complete the validator setup.
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮以完成验证器设置。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-272
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: 'After you have added the validator, if you try to execute the Frozen transition
    without specifying a value for the Reason for Freezing field, Jira will prompt
    you with an error message, as shown in the following screenshot:'
  id: totrans-273
  prefs: []
  type: TYPE_NORMAL
  zh: 添加验证器后，如果您尝试执行冻结转换而未为“冻结原因”字段指定值，Jira将提示您出现错误消息，如下图所示：
- en: '![](img/cf1c465b-0fd0-4a34-9d3e-0f22cf3e34dd.png)'
  id: totrans-274
  prefs: []
  type: TYPE_IMG
  zh: '![](img/cf1c465b-0fd0-4a34-9d3e-0f22cf3e34dd.png)'
- en: Creating custom workflow transition logic
  id: totrans-275
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 创建自定义工作流转换逻辑
- en: In previous recipes, we have looked at using workflow conditions, validators,
    and post functions that come out of the box with Jira and from other third-party
    apps.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 在之前的食谱中，我们已经查看了如何使用Jira内置的工作流条件、验证器和后置功能，以及其他第三方应用程序提供的功能。
- en: In this recipe, we will take a look at how to use scripts to define our own
    validation rules for a workflow validator. We will address a common use case,
    which is to make a field required during a workflow transition only when another
    field is set to a certain value.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 在这个方案中，我们将看看如何使用脚本为工作流验证器定义自己的验证规则。我们将处理一个常见的用例，即仅当另一个字段设置为某个特定值时，在工作流过渡过程中使某个字段成为必填项。
- en: 'So, our validation logic will be as follows:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 所以，我们的验证逻辑将如下所示：
- en: If the **Resolution** field is set to **Done**, the **Solution Details** field
    will be required.
  id: totrans-279
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果**Resolution**字段设置为**Done**，**Solution Details**字段将变为必填项。
- en: If the **Resolution** field is set to a value other than **Fixed**, the **Solution
    Details** field will not be required.
  id: totrans-280
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果**Resolution**字段设置为**Fixed**以外的值，**Solution Details**字段将不再是必填项。
- en: Getting ready
  id: totrans-281
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备开始
- en: 'For this recipe, we need to have the ScriptRunner for Jira app installed. You
    can download it from the following link, or install it directly using the UPM:
    [https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner).'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 对于这个方案，我们需要安装 ScriptRunner for Jira 应用。你可以通过以下链接下载，或者直接使用 UPM 安装：[https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner](https://marketplace.atlassian.com/plugins/com.onresolve.jira.groovy.groovyrunner)。
- en: You might also want to get familiar with Groovy scripting ([http://groovy.codehaus.org](http://groovy.codehaus.org/)).
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 你可能还需要熟悉 Groovy 脚本语言（[http://groovy.codehaus.org](http://groovy.codehaus.org/)）。
- en: How to do it...
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作……
- en: 'Perform the following steps to set up a validator with custom-scripted logic:'
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤设置带有自定义脚本逻辑的验证器：
- en: Select and edit the **Simple Workflow**.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并编辑**简单工作流**。
- en: Select **Diagram** mode.
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**图表**模式。
- en: Click on the **Done** global workflow transition.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**全局工作流过渡。
- en: Click on the **Validators** link from the panel on the right-hand side.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从右侧面板中点击**验证器**链接。
- en: Click on **Add validator**, select **Script Validator** [ScriptRunner] from
    the list, and click on **Add**.
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加验证器**，从列表中选择**脚本验证器** [ScriptRunner]，然后点击**添加**。
- en: Select the **Simple scripted validator** option.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**简单脚本验证器**选项。
- en: 'Enter the following script code in the **Condition** text box:'
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**条件**文本框中输入以下脚本代码：
- en: '[PRE1]'
  id: totrans-293
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: Enter `You must provide the Solution Details if the Resolution is set to Done.`
    in the **Error** field.
  id: totrans-294
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**错误**字段中输入 `如果分辨率设置为 Done，则必须提供 Solution Details。`
- en: Select **Solution Details** for **Field**.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**Solution Details**作为**字段**。
- en: Click on the **Add** button to complete the validator setup.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮以完成验证器设置。
- en: Click on **Publish Draft** to apply the change.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发布草稿**以应用更改。
- en: 'Your validator configuration should look something like the following screenshot:'
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 你的验证器配置应如下所示：
- en: '![](img/bf66327c-6a19-49eb-8724-bdc9abeabe2f.png)'
  id: totrans-299
  prefs: []
  type: TYPE_IMG
  zh: '![](img/bf66327c-6a19-49eb-8724-bdc9abeabe2f.png)'
- en: 'Once we add our custom validator, the Groovy script will run every time the
    resolve issue transition is executed. If the Resolution field is set to Done and
    the Solution Details field is empty, we will get a message from the Error field,
    as shown in the following screenshot:'
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦我们添加了自定义验证器，Groovy 脚本将在每次执行解决问题的过渡时运行。如果 Resolution 字段设置为 Done 且 Solution
    Details 字段为空，我们将收到来自错误字段的消息，如下图所示：
- en: '![](img/5c221cfa-9a9b-4363-a6b3-071280a8136e.png)'
  id: totrans-301
  prefs: []
  type: TYPE_IMG
  zh: '![](img/5c221cfa-9a9b-4363-a6b3-071280a8136e.png)'
- en: We will now see how these steps work.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们来看一下这些步骤是如何工作的。
- en: How it works...
  id: totrans-303
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的……
- en: The Script Validator works just like any other validator, except that we can
    define our own validation logic using Groovy scripts. So, let's go through the
    script, and see what it does.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 脚本验证器的工作方式与其他验证器一样，只是我们可以使用 Groovy 脚本定义自己的验证逻辑。那么，让我们看看这个脚本，它的作用是什么。
- en: 'We first get the Solution Details custom field via its name, as shown in the
    following line of code. If you have more than one custom field with the same name,
    you need to use its ID instead of its name:'
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先通过字段名称获取 Solution Details 自定义字段，如下代码所示。如果你有多个同名的自定义字段，你需要使用它的 ID 而不是名称：
- en: '[PRE2]'
  id: totrans-306
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'We then select the resolution value and obtain the value entered for Solution
    Details during the transition, as follows:'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 然后我们选择分辨率值，并在过渡过程中获取输入的 Solution Details 值，如下所示：
- en: '[PRE3]'
  id: totrans-308
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: In our example, we check the resolution name; we can also check the ID of the
    resolution by changing `getName()` to `getId()`.
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 在我们的示例中，我们检查分辨率名称；我们也可以通过将 `getName()` 更改为 `getId()` 来检查分辨率的 ID。
- en: If you have multiple custom fields with the same name, use `getId()`.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你有多个同名的自定义字段，请使用 `getId()`。
- en: Lastly, we check whether the **Resolution** value is **Done** and the **Solution
    Details** value is blank. In this case, we return a value of `false`, so the validation
    fails. All other cases will return the value `true`, so the validation passes.
    We also use `StringUtils.isBlank(solution)` to check for blank values so that
    we can catch cases when users enter empty spaces for the **Solution Details**
    field.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 最后，我们检查**Resolution**值是否为**Done**，并且**Solution Details**值是否为空。如果是这种情况，我们返回`false`，因此验证失败。所有其他情况将返回`true`，所以验证通过。我们还使用`StringUtils.isBlank(solution)`来检查空值，这样我们就可以捕获用户在**Solution
    Details**字段中输入空格的情况。
- en: There's more...
  id: totrans-312
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多...
- en: You are not limited to creating scripted validators. With the ScriptRunner for
    Jira app, you can create scripted conditions and post functions using Groovy scripts.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 你不仅限于创建脚本验证器。通过使用ScriptRunner for Jira应用，你可以使用Groovy脚本创建脚本条件和后置函数。
