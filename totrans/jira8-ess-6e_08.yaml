- en: '8'
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: '8'
- en: Emails and Notifications
  id: totrans-1
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 电子邮件与通知
- en: So far, you have learned how to use and interact with Jira directly from its
    web interface through a browser. We will now take a look at how Jira uses emails
    as a notification mechanism to alert you of updates.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，你已经学会了如何通过浏览器直接使用 Jira 的 Web 界面与其互动。接下来，我们将了解 Jira 如何使用电子邮件作为通知机制，提醒你更新内容。
- en: One powerful feature of Jira is its ability to create new issues, add comments
    to issues, and update issue details through emails. This provides you with a whole
    new option for how you and your users can interact with Jira.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 的一项强大功能是通过电子邮件创建新问题、添加评论并更新问题详细信息。这为你和用户与 Jira 互动提供了全新的选择。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: Jira and email
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: Jira 和电子邮件
- en: Mail servers
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 邮件服务器
- en: Mail queues
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 邮件队列
- en: Events
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 事件
- en: Notifications
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通知
- en: Batching email notifications
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 批量电子邮件通知
- en: Troubleshooting notifications
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 排查通知问题
- en: Incoming emails
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 接收邮件
- en: The HR project
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 人力资源项目
- en: Jira and email
  id: totrans-14
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Jira 和电子邮件
- en: Emails have become one of the most ubiquitous communication tools in today’s
    world. Businesses and individuals rely on emails to send and receive information
    around the world almost instantly. Therefore, it should come as no surprise that
    Jira is fully equipped and integrated with email support.
  id: totrans-15
  prefs: []
  type: TYPE_NORMAL
  zh: 电子邮件已成为当今世界最为普及的沟通工具之一。企业和个人依赖电子邮件来几乎即时地发送和接收全球信息。因此，Jira 完全装备并与电子邮件支持集成，这并不奇怪。
- en: 'Jira’s email support comes in several flavors:'
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 的电子邮件支持有几种形式：
- en: First, Jira sends emails to users about changes that have been made to their
    issues, such as adding comments, so people working on the same issue can be kept
    on the same page
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 首先，Jira 会向用户发送有关其问题的更改通知，例如添加评论，以便同一问题的所有参与者可以保持一致。
- en: Second, Jira can poll mailboxes for emails and create issues and comments based
    on the content of the email
  id: totrans-18
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 第二，Jira 可以轮询邮箱中的邮件，并根据邮件内容创建问题和评论。
- en: The last feature is the ability for users to create and subscribe to filters
    to set up feeds in Jira (we will discuss filters in [*Chapter 10*](B18644_10.xhtml#_idTextAnchor292),
    *Searching, Reporting, and Analysis*)
  id: totrans-19
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 最后一项功能是用户可以创建和订阅过滤器，在 Jira 中设置信息流（我们将在[*第10章*](B18644_10.xhtml#_idTextAnchor292)中讨论过滤器，*搜索、报告与分析*）
- en: These features open up a whole new dimension to how users can interact with
    Jira.
  id: totrans-20
  prefs: []
  type: TYPE_NORMAL
  zh: 这些功能为用户如何与 Jira 互动打开了全新的维度。
- en: In the following sections, we will look at what you need to do to enable Jira’s
    powerful email support, as well as explore the tools and options at your disposal
    so that you can configure Jira and email in a way that suits you.
  id: totrans-21
  prefs: []
  type: TYPE_NORMAL
  zh: 在以下各节中，我们将看看你需要做什么才能启用 Jira 强大的电子邮件支持，并探讨你可以使用的工具和选项，以便你可以根据自己的需求配置 Jira 和电子邮件。
- en: Mail servers
  id: totrans-22
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 邮件服务器
- en: 'For Jira to communicate with emails, you need to configure or register your
    mail servers in Jira. There are two types of mail servers you need to configure:'
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 要使 Jira 与电子邮件进行通信，你需要在 Jira 中配置或注册邮件服务器。你需要配置两种类型的邮件服务器：
- en: '**Outgoing**: This is used by Jira to send emails out to users. Jira supports
    **SMTP** mail servers.'
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**外发**：这是 Jira 用来向用户发送电子邮件的。Jira 支持 **SMTP** 邮件服务器。'
- en: '**Incoming**: This is used by Jira to retrieve emails from users. Jira supports
    **POP** and **IMAP** servers.'
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**接收**：这是 Jira 用来从用户处获取电子邮件的。Jira 支持 **POP** 和 **IMAP** 服务器。'
- en: 'The following diagram shows how Jira interacts with various mail servers:'
  id: totrans-26
  prefs: []
  type: TYPE_NORMAL
  zh: 以下图表展示了 Jira 如何与各种邮件服务器进行交互：
- en: '![Figure 8.1 – Mail servers'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.1 – 邮件服务器'
- en: '](img/Figure_8.01_B18644.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.01_B18644.jpg)'
- en: Figure 8.1 – Mail servers
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.1 – 邮件服务器
- en: We will start with outgoing mail servers to see the different options we have
    to configure Jira to send emails to users, customize the email’s contents, enable
    SSL for additional security, and finally, send a test email.
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将从外发邮件服务器开始，查看我们可以配置 Jira 发送电子邮件的不同选项，自定义邮件内容，启用 SSL 以增加安全性，最后，发送一封测试邮件。
- en: Working with outgoing mail
  id: totrans-31
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用外发邮件
- en: 'To configure the outgoing SMTP server, you will need the Jira system administrator’s
    global permission (the user that was created during the initial setup is a system
    administrator). Perform the following steps to manage the outgoing mail server:'
  id: totrans-32
  prefs: []
  type: TYPE_NORMAL
  zh: 要配置外发 SMTP 服务器，你需要 Jira 系统管理员的全局权限（在初始设置过程中创建的用户为系统管理员）。执行以下步骤来管理外发邮件服务器：
- en: Log in to Jira as a Jira system administrator.
  id: totrans-33
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以 Jira 系统管理员身份登录 Jira。
- en: Browse to the Jira administration console.
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到 Jira 管理控制台。
- en: 'Select the **System** tab and then the **Outgoing mail** option. This will
    bring up the **Outgoing mail** page:'
  id: totrans-35
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签，然后选择**外发邮件**选项。这将打开**外发邮件**页面：
- en: '![Figure 8.2 – The Outgoing mail page'
  id: totrans-36
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.2 – 外发邮件页面'
- en: '](img/Figure_8.02_B18644.jpg)'
  id: totrans-37
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.02_B18644.jpg)'
- en: Figure 8.2 – The Outgoing mail page
  id: totrans-38
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.2 – 外发邮件页面
- en: Note
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: You can only have one outgoing mail server in Jira.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 您在Jira中只能配置一个外发邮件服务器。
- en: 'There are two ways to add an outgoing mail server in Jira. Both options have
    some common configuration parameters that you will need to fill in. The following
    table shows these parameters:'
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 在Jira中有两种方式可以添加外发邮件服务器。两种选项都有一些共同的配置参数，您需要填写。下表显示了这些参数：
- en: '| **Field** | **Description** |'
  id: totrans-42
  prefs: []
  type: TYPE_TB
  zh: '| **字段** | **描述** |'
- en: '| **Name** | This specifies a name for the mail server. |'
  id: totrans-43
  prefs: []
  type: TYPE_TB
  zh: '| **名称** | 这是指定邮件服务器的名称。 |'
- en: '| **Description** | This specifies a brief description of the mail server.
    |'
  id: totrans-44
  prefs: []
  type: TYPE_TB
  zh: '| **描述** | 这是指定邮件服务器的简要描述。 |'
- en: '| **From address** | This specifies an email address that outgoing emails will
    appear to have come from. |'
  id: totrans-45
  prefs: []
  type: TYPE_TB
  zh: '| **发件人地址** | 这是指定外发邮件显示的发件人地址。 |'
- en: '| **Email prefix** | This specifies a prefix that will appear with all the
    emails sent from Jira. This allows your users to set up filter rules in their
    mail clients. The prefix will be added to the beginning of the email subject.
    |'
  id: totrans-46
  prefs: []
  type: TYPE_TB
  zh: '| **邮件前缀** | 这是指定将在Jira发送的所有邮件的邮件主题前面显示的前缀。这允许您的用户在其邮件客户端中设置过滤规则。前缀将添加到邮件主题的开头。
    |'
- en: '| **Service Provider** | Here, you can select from one of the three predefined
    mail providers – that is, Google, Yahoo!, or the custom SMTP server. |'
  id: totrans-47
  prefs: []
  type: TYPE_TB
  zh: '| **服务提供商** | 在此，您可以选择三个预定义邮件提供商之一——即Google、Yahoo! 或自定义SMTP服务器。 |'
- en: '| **Host Name** | This specifies the hostname of your mail server (for example,
    `smtp.example.com`). |'
  id: totrans-48
  prefs: []
  type: TYPE_TB
  zh: '| **主机名** | 这是指定您邮件服务器的主机名（例如，`smtp.example.com`）。 |'
- en: '| **SMTP Port** | This specifies the port number that your mail server will
    be running on. This is optional; if left blank, the default port number of 25
    will be used. |'
  id: totrans-49
  prefs: []
  type: TYPE_TB
  zh: '| **SMTP端口** | 这是指定邮件服务器运行的端口号。此项为可选项；如果留空，将使用默认端口号25。 |'
- en: '| **Username** | This is used to authenticate against the mail server if required.
    Note that mail servers may require authentication to relay emails to non-local
    users. |'
  id: totrans-50
  prefs: []
  type: TYPE_TB
  zh: '| **用户名** | 如果需要，这用于验证与邮件服务器的连接。请注意，邮件服务器可能需要身份验证才能将邮件转发给非本地用户。 |'
- en: '| **Password** | This is used to authenticate the user against the mail server
    if required. |'
  id: totrans-51
  prefs: []
  type: TYPE_TB
  zh: '| **密码** | 如果需要，这用于验证用户是否可以连接到邮件服务器。 |'
- en: '| **JNDI Location** | This is the JNDI lookup name if you already have a mail
    server configured for your application server. Refer to the following section
    for details. |'
  id: totrans-52
  prefs: []
  type: TYPE_TB
  zh: '| **JNDI位置** | 如果您已经为应用服务器配置了邮件服务器，这是JNDI查找名称。有关详细信息，请参阅以下部分。 |'
- en: Table 8.1 – Outgoing mail server configuration
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8.1 – 外发邮件服务器配置
- en: For the rest of the parameters, depending on the option you select to set up
    your mail server, you only need to fill in the appropriate details.
  id: totrans-54
  prefs: []
  type: TYPE_NORMAL
  zh: 对于其余的参数，取决于您选择的邮件服务器设置选项，您只需填写适当的详细信息。
- en: Configuring an SMTP server
  id: totrans-55
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 配置SMTP服务器
- en: 'The first option is to select from one of the built-in service providers and
    specify the mail server’s details. For example, if you have an SMTP mail server
    running, you can select the **Custom** option from the **Service Provider** field
    and specify the host and port number. This is the approach most people will use
    as it is straightforward. With this approach, the administrator fills in the mail
    server’s host information, such as the hostname and port number. To do so, follow
    these steps:'
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 第一种选项是选择内置的服务提供商之一，并指定邮件服务器的详细信息。例如，如果您运行的是SMTP邮件服务器，您可以在**服务提供商**字段中选择**自定义**选项，并指定主机名和端口号。这是大多数人使用的方法，因为它简单明了。采用这种方法时，管理员填写邮件服务器的主机信息，如主机名和端口号。操作步骤如下：
- en: Browse to the **Outgoing mail** page.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**外发邮件**页面。
- en: Click on the **Configure new SMTP mail server** button.
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**配置新的SMTP邮件服务器**按钮。
- en: Enter the general details of your mail server, including the name, description,
    from address, and email prefix.
  id: totrans-59
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入您的邮件服务器的基本信息，包括名称、描述、发件人地址和邮件前缀。
- en: Select the type of mail server from the **Service Provider** field.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**服务提供商**字段选择邮件服务器类型。
- en: Enter the mail server’s connection details.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入邮件服务器的连接详细信息。
- en: Click on the **Test Connection** button to verify the configuration.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**测试连接**按钮以验证配置。
- en: 'Click on the **Add** button to register to the mail server:'
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮以注册到邮件服务器：
- en: '![Figure 8.3 – The Add SMTP Mail Server page'
  id: totrans-64
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.3 – 添加 SMTP 邮件服务器页面'
- en: '](img/Figure_8.03_B18644.jpg)'
  id: totrans-65
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.03_B18644.jpg)'
- en: Figure 8.3 – The Add SMTP Mail Server page
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.3 – 添加 SMTP 邮件服务器页面
- en: Note
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Jira comes with support for Google and Yahoo! mail services. You can select
    these options in the **Service Provider** field if you are using these services.
  id: totrans-68
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 默认支持 Google 和 Yahoo! 邮件服务。如果您使用这些服务，可以在**服务提供商**字段中选择相应的选项。
- en: Configuring an SMTP server with JNDI
  id: totrans-69
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使用 JNDI 配置 SMTP 服务器
- en: The second option is to use the **Java Naming and Directory Interface** (**JNDI**).
    This approach is slightly more complicated as it requires configuration on the
    application server itself, and it requires you to restart Jira.
  id: totrans-70
  prefs: []
  type: TYPE_NORMAL
  zh: 第二种选项是使用**Java 命名和目录接口**（**JNDI**）。这种方法稍微复杂一些，因为它需要在应用服务器本身进行配置，并且需要您重新启动 Jira。
- en: If you are using the standalone distribution, which uses Apache Tomcat, the
    JNDI location will be `java:comp/env/mail/JiraMailServer`. You will also need
    to specify the mail server details as a JNDI resource in the `server.xml` file
    in the `JIRA_INSTALL/conf` directory.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您使用的是独立分发版（它使用 Apache Tomcat），则 JNDI 位置将是`java:comp/env/mail/JiraMailServer`。您还需要在`JIRA_INSTALL/conf`目录下的`server.xml`文件中将邮件服务器详细信息指定为
    JNDI 资源。
- en: 'A sample declaration is shown in the following code snippet. You will need
    to substitute some values with the real values for some of the parameters in the
    code of your mail server’s details:'
  id: totrans-72
  prefs: []
  type: TYPE_NORMAL
  zh: 以下代码片段展示了一个示例声明。您需要用邮件服务器详细信息中的实际值替换代码中某些参数的值：
- en: '[PRE0]'
  id: totrans-73
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: You will need to restart Jira after saving your changes to the `server.xml`
    file.
  id: totrans-74
  prefs: []
  type: TYPE_NORMAL
  zh: 在保存对`server.xml`文件的更改后，您需要重新启动 Jira。
- en: Disabling outgoing mail
  id: totrans-75
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 禁用外发邮件
- en: If you are running a test or evaluation Jira instance, or testing changes that
    you have made to your configurations, you might not want to flood your users with
    test emails. The easiest way for you to disable all outgoing emails is by just
    clicking on the **Disable outgoing mail** button. This will stop Jira from sending
    all emails as a result of issue updates. Once you are ready to send emails again,
    you can click on the **Enable outgoing mail** button.
  id: totrans-76
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您正在运行测试或评估版的 Jira 实例，或正在测试您对配置所做的更改，您可能不想将测试邮件发送给用户。禁用所有外发邮件的最简单方法是点击**禁用外发邮件**按钮。这将停止
    Jira 发送所有由问题更新触发的邮件。一旦准备好再次发送邮件，您可以点击**启用外发邮件**按钮。
- en: Note
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Disabling outgoing mail will only prevent Jira from sending out notification
    emails based on notification schemes.
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 禁用外发邮件仅会阻止 Jira 根据通知方案发送通知邮件。
- en: Enabling SMTP over SSL
  id: totrans-79
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 启用通过 SSL 的 SMTP
- en: 'To increase security, you can encrypt the communication between Jira and your
    mail server if your mail server supports SSL. Two steps are involved in enabling
    SSL over SMTP in Jira:'
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 为了提高安全性，如果您的邮件服务器支持 SSL，您可以加密 Jira 与邮件服务器之间的通信。启用 SSL 通过 SMTP 在 Jira 中有两个步骤：
- en: 'The first step is to import your mail server’s SSL certificate into Java’s
    trust store. You can do this with Java’s `keytool` utility. On a Windows machine,
    run the following command in the Command Prompt:'
  id: totrans-81
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第一步是将您的邮件服务器的 SSL 证书导入到 Java 的信任库中。您可以使用 Java 的 `keytool` 工具完成此操作。在 Windows
    机器上，运行以下命令：
- en: '[PRE1]'
  id: totrans-82
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The second step is to configure your application server to use SSL for mail
    communication. The following declaration is for Apache Tomcat, which is used by
    Jira standalone. We can use the same configuration file and only need to add two
    additional parameters:'
  id: totrans-83
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二步是配置您的应用服务器使用 SSL 进行邮件通信。以下声明适用于 Jira 独立版所使用的 Apache Tomcat。我们可以使用相同的配置文件，只需要添加两个额外的参数：
- en: '[PRE2]'
  id: totrans-84
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Once you have imported your certificate and configured your mail server, you
    will have to restart Jira.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您导入了证书并配置了邮件服务器，您将需要重新启动 Jira。
- en: Sending a test email
  id: totrans-86
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 发送测试邮件
- en: 'It is always a good idea to send a test email after you configure your SMTP
    mail server to make sure that the server is running and that you have set it correctly
    in Jira. Here is how to go about it:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 配置 SMTP 邮件服务器后，发送测试邮件始终是个好主意，以确保服务器正在运行并且在 Jira 中配置正确。以下是操作步骤：
- en: Browse to the **Outgoing mail** page.
  id: totrans-88
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**外发邮件**页面。
- en: Click on the **Send a test email** link for your SMTP mail server.
  id: totrans-89
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发送测试邮件**链接以测试您的 SMTP 邮件服务器。
- en: Click on the **Send** button to send the email. Jira will autofill the **To**
    address based on the user you have logged in as.
  id: totrans-90
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发送**按钮发送邮件。Jira 会根据您登录的用户自动填充**收件人**地址。
- en: 'If everything is correct, you will see a confirmation message in the **Mail
    log** section and receive the email in your inbox. If there are errors, such as
    an error with the mail server connection, then the **Mail log** section will display
    these problems. This is very useful when troubleshooting any problems with Jira’s
    connectivity with the SMTP server:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切正常，您将在**邮件日志**部分看到确认信息，并会在收件箱中收到邮件。如果出现错误，例如邮件服务器连接错误，**邮件日志**部分将显示这些问题。这在排查Jira与SMTP服务器连接问题时非常有用：
- en: '![Figure 8.4 – Testing the outgoing mail server'
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.4 – 测试外发邮件服务器'
- en: '](img/Figure_8.04_B18644.jpg)'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.04_B18644.jpg)'
- en: Figure 8.4 – Testing the outgoing mail server
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.4 – 测试外发邮件服务器
- en: In the preceding screenshot, you can see that the test email delivery has failed,
    and the error is because Jira was unable to connect to the configured SMTP server.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 在上面的截图中，您可以看到测试邮件发送失败，错误原因是Jira无法连接到配置的SMTP服务器。
- en: We have now looked at how you can add an outgoing SMTP mail server in Jira,
    and send out test emails. In the next section, we will look at Jira’s mail delivery
    mechanism.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 我们现在已经了解了如何在Jira中添加外发SMTP邮件服务器，并发送测试邮件。在下一部分，我们将探讨Jira的邮件发送机制。
- en: Mail queues
  id: totrans-97
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 邮件队列
- en: Most emails in Jira are not sent immediately when an operation is performed.
    Instead, they are placed in a queue, which Jira will process periodically. This
    is very similar to the real-life scenario where mail is placed in mailboxes and
    picked up every day by postal workers. In this section, we will take a look at
    Jira’s mail queue, and how to use it to help identify and troubleshoot if outgoing
    emails are stuck.
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: Jira中的大多数邮件并不会在执行操作时立即发送。相反，它们会被放入一个队列，Jira会定期处理这些邮件。这与现实生活中邮件被放入邮箱并每天由邮递员取走的场景非常相似。在这一部分，我们将了解Jira的邮件队列，以及如何使用它来帮助识别和排查外发邮件卡住的情况。
- en: Viewing the mail queue
  id: totrans-99
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 查看邮件队列
- en: Normally, you do not need to manage the mail queue. Jira automatically places
    emails into the queue and processes them periodically. However, as an administrator,
    there may be times when you wish to inspect the mail queue, especially to troubleshoot
    problems related to Jira notification emails. Sometimes, emails can get stuck,
    and inspecting the mail queue will help you identify these problems and fix them.
  id: totrans-100
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，您无需管理邮件队列。Jira会自动将邮件放入队列并定期处理它们。然而，作为管理员，您可能希望检查邮件队列，尤其是在排查与Jira通知邮件相关的问题时。有时邮件会被卡住，检查邮件队列可以帮助您识别这些问题并解决它们。
- en: 'Perform the following steps to view the content of the mail queue:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以查看邮件队列的内容：
- en: Browse to the Jira administration console.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台。
- en: 'Select the **System** tab and then the **Mail queue** option:'
  id: totrans-103
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签，然后选择**邮件队列**选项：
- en: '![Figure 8.5 – The Mail queue page'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.5 – 邮件队列页面'
- en: '](img/Figure_8.05_B18644.jpg)'
  id: totrans-105
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.05_B18644.jpg)'
- en: Figure 8.5 – The Mail queue page
  id: totrans-106
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.5 – 邮件队列页面
- en: 'This page provides you with a one-page view of the current emails in the queue
    that are waiting for delivery. There are two queues – **Mail queue** and **Error
    queue**:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 该页面为您提供了一个查看当前正在等待发送的队列中邮件的一页视图。共有两个队列——**邮件队列**和**错误队列**：
- en: The **Mail queue** tab contains all the emails that are pending delivery. If
    Jira can successfully deliver these emails, they will be removed from the queue.
    Any items listed in red indicate that Jira has unsuccessfully attempted to send
    those emails. Jira will retry 10 times, and if still unsuccessful, these items
    will be moved to the error queue.
  id: totrans-108
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**邮件队列**标签包含所有待发送的邮件。如果Jira能成功发送这些邮件，它们将从队列中移除。任何以红色显示的项目表示Jira未能成功发送这些邮件。Jira将重试10次，如果仍然失败，这些项目将被移至错误队列。'
- en: The **Error queue** tab contains emails that cannot be delivered by Jira. You
    can choose to resend all the failed items in the error queue or delete them.
  id: totrans-109
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**错误队列**标签包含Jira无法发送的邮件。您可以选择重新发送错误队列中的所有失败项，或者删除它们。'
- en: Flushing the mail queue
  id: totrans-110
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 刷新邮件队列
- en: While Jira automatically flushes the mail queue, you can also manually flush
    the queue if you want to send out emails immediately. When you manually flush
    the queue, Jira will try to send all the emails that are currently in the queue.
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然Jira会自动刷新邮件队列，但您也可以手动刷新队列，如果您希望立即发送邮件。手动刷新队列时，Jira将尝试发送当前队列中的所有邮件。
- en: 'Perform the following steps to manually flush the mail queue:'
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤手动刷新邮件队列：
- en: Browse to the **Mail queue** page.
  id: totrans-113
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**邮件队列**页面。
- en: Click on the **Flush mail queue** button
  id: totrans-114
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**刷新邮件队列**按钮
- en: If Jira is successful in sending emails, you will see the queue shrink and the
    items disappear. If some emails fail to be delivered, those items will be highlighted
    in red. The mail queue is used when Jira automatically sends out emails, as we
    will see in the next section. When you manually send out emails in Jira, those
    emails are sent out immediately.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 如果 Jira 成功发送邮件，您会看到队列缩小并且项目消失。如果某些邮件发送失败，这些项目将被高亮显示为红色。邮件队列用于 Jira 自动发送邮件，正如我们在下一节中将看到的那样。当您在
    Jira 中手动发送邮件时，这些邮件会立即发送。
- en: Manually sending emails
  id: totrans-116
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 手动发送邮件
- en: Sometimes, you, as the administrator, may need to send out emails containing
    important messages to your users. For example, if you are planning some maintenance
    work that will take Jira offline for an extended period, you may want to send
    an email to all Jira users to let them know of the outage.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 有时，作为管理员的您可能需要向用户发送包含重要信息的邮件。例如，如果您计划进行一些维护工作，导致 Jira 长时间离线，您可能希望向所有 Jira 用户发送邮件通知他们停机的情况。
- en: Jira has a built-in facility where you can manually send out emails to specific
    groups of users. There are two options when manually sending emails – you can
    send them in groups or by projects.
  id: totrans-118
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 提供了一个内置功能，允许您手动向特定的用户组发送邮件。手动发送邮件时有两种选项——您可以按组发送或按项目发送。
- en: When sending them in groups, all you need to do is select one or more groups
    in Jira, and all users that belong to the selected groups will receive the email.
    Users belonging to more than one group will not receive duplicated emails.
  id: totrans-119
  prefs: []
  type: TYPE_NORMAL
  zh: 按组发送邮件时，您只需选择一个或多个 Jira 组，所有属于所选组的用户将收到该邮件。属于多个组的用户不会收到重复的邮件。
- en: When sending emails by projects, you need to select one or more projects and
    then the project roles. We will discuss project roles in more detail in the next
    chapter, but for now, you can think of them as groups of users within projects.
    For example, you can send emails to all users that are part of **Demonstration
    Project** rather than all users in Jira.
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 按项目发送邮件时，您需要选择一个或多个项目，然后选择项目角色。我们将在下一章中更详细地讨论项目角色，但目前，您可以将其视为项目中的用户组。例如，您可以向**示范项目**中的所有用户发送邮件，而不是向
    Jira 中的所有用户发送邮件。
- en: 'To send emails to users in Jira, perform the following steps:'
  id: totrans-121
  prefs: []
  type: TYPE_NORMAL
  zh: 要向 Jira 中的用户发送邮件，请执行以下步骤：
- en: Browse to the Jira administration console
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到 Jira 管理控制台
- en: Select the **System** tab and then the **Send email** option
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签页，然后选择**发送邮件**选项
- en: Choose whether you want to send to users by **Project Roles** or **Groups**
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择是否按**项目角色**或**组**向用户发送邮件
- en: Enter the email’s **Subject** and **Body** content
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入邮件的**主题**和**正文**内容
- en: Click on the **Send** button to send the email to all users in the selected
    project roles/groups
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**发送**按钮，将邮件发送给选定项目角色/组中的所有用户
- en: 'The following screenshot shows an example of sending maintenance outage notification
    emails to everyone by selecting the **jira-software-users** group, which every
    Jira Software user is a member of by default:'
  id: totrans-127
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图显示了通过选择**jira-software-users**组来向所有人发送维护停机通知邮件的示例，默认情况下，每个 Jira Software
    用户都是该组的成员：
- en: '![Figure 8.6 – The Send email page'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.6 – 发送邮件页面'
- en: '](img/Figure_8.06_B18644.jpg)'
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.06_B18644.jpg)'
- en: Figure 8.6 – The Send email page
  id: totrans-130
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.6 – 发送邮件页面
- en: Note
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: Since Jira does not provide a **What You See Is What You Get** (**WYSIWYG**)
    editor for composing emails, you may want to draft an email and send it to yourself
    before sending it out to everyone.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Jira 不提供**所见即所得**（**WYSIWYG**）邮件编辑器，您可能想要先草拟一封邮件并将其发送给自己，之后再发送给所有人。
- en: Now that we have seen how to configure an outgoing mail server in Jira and send
    emails, let’s take a deeper look at how Jira automates email notifications when
    users perform actions on issues.
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经了解了如何在 Jira 中配置外发邮件服务器并发送邮件，让我们更深入地了解 Jira 如何在用户对问题执行操作时自动发送电子邮件通知。
- en: Events
  id: totrans-134
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 事件
- en: Jira is an event-driven system. This means that when an action occurs (for example,
    when an issue is created), Jira will fire off a corresponding event. This event
    is then picked up by components that are designed to listen to the event. These
    are called **listeners**. When a listener picks up an event, it will perform its
    duty, such as keeping issues up to date with changes or sending an email to users
    who are watching the issue.
  id: totrans-135
  prefs: []
  type: TYPE_NORMAL
  zh: Jira是一个事件驱动系统。这意味着当发生某个操作（例如，创建一个问题）时，Jira会触发一个相应的事件。然后，这个事件会被设计来监听该事件的组件拾取。这些组件被称为**监听器**。当监听器捕捉到一个事件时，它会执行自己的任务，比如保持问题的更新或向关注该问题的用户发送邮件。
- en: This mechanism allows Jira to process operations asynchronously. The advantage
    of this model is operations, such as sending emails, are separated from Jira’s
    core functions, such as issue creation. If there is a problem with the mail server,
    for example, you will not want this problem to prevent your users from creating
    issues.
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 这个机制允许Jira异步处理操作。这种模式的优势是，像发送邮件这样的操作，与Jira的核心功能（如问题创建）是分离的。例如，如果邮件服务器出现问题，你不希望这个问题阻止用户创建问题。
- en: 'There are two types of events in Jira:'
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: Jira中有两种类型的事件：
- en: '**System events**: These are internal events that are used by Jira, and they
    usually represent the main functionalities in Jira. They cannot be added, edited,
    or deleted.'
  id: totrans-138
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**系统事件**：这些是Jira内部使用的事件，通常代表Jira中的主要功能。它们无法被添加、编辑或删除。'
- en: '`post` functions.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`post` 函数。'
- en: 'As an administrator, you will be able to get a one-page view of all the events
    in Jira. You just need to do the following:'
  id: totrans-140
  prefs: []
  type: TYPE_NORMAL
  zh: 作为管理员，你将能够查看Jira中所有事件的一页内容。你只需执行以下操作：
- en: Browse to the Jira administration console.
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台。
- en: 'Select the **System** tab and then the **Events** option. This will bring up
    the **View Events** page:'
  id: totrans-142
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签页，然后选择**事件**选项。这样将显示**查看事件**页面：
- en: '![Figure 8.7 – Issue events'
  id: totrans-143
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.7 – 问题事件'
- en: '](img/Figure_8.07_B18644.jpg)'
  id: totrans-144
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.07_B18644.jpg)'
- en: Figure 8.7 – Issue events
  id: totrans-145
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.7 – 问题事件
- en: Each event is associated with a template, which is often referred to as a **mail
    template**. These templates define the content structure of emails when notifications
    are sent. For system events, you cannot change their templates (you can change
    the template file’s content, however). For custom events, you can choose to use
    one of the existing templates or create your own mail template.
  id: totrans-146
  prefs: []
  type: TYPE_NORMAL
  zh: 每个事件都与一个模板关联，这个模板通常被称为**邮件模板**。这些模板定义了发送通知邮件时邮件的内容结构。对于系统事件，你不能修改它们的模板（但你可以修改模板文件的内容）。对于自定义事件，你可以选择使用现有的模板之一或创建自己的邮件模板。
- en: In the following sections, we will look at how to create and register custom
    mail templates, create a new custom event to use the new template, and fire the
    new event when actions are performed on an issue. After that, we will look at
    how to tie events to notifications so that we can tell Jira who should receive
    notification emails for the event.
  id: totrans-147
  prefs: []
  type: TYPE_NORMAL
  zh: 在接下来的章节中，我们将讨论如何创建和注册自定义邮件模板，创建一个新的自定义事件来使用该新模板，并在对问题执行操作时触发新的事件。之后，我们将探讨如何将事件与通知关联起来，以便告诉Jira哪些用户应该收到该事件的通知邮件。
- en: Working with mail templates
  id: totrans-148
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用邮件模板
- en: 'Mail templates are physical files that you create and edit via a text editor.
    Jira has a set of default templates for all the system events. Instead of modifying
    them directly, Jira lets you upload your modified version of the templates and
    override the default. For us to create a new mail template, we can also look at
    these existing templates and use them as a starting point. You can download the
    default templates by following these steps:'
  id: totrans-149
  prefs: []
  type: TYPE_NORMAL
  zh: 邮件模板是你通过文本编辑器创建和编辑的物理文件。Jira为所有系统事件提供了一组默认模板。Jira不直接修改它们，而是允许你上传修改后的模板版本来覆盖默认模板。为了创建新的邮件模板，我们也可以查看这些现有模板并以它们为起点。你可以按照以下步骤下载默认模板：
- en: Browse to the Jira administration console
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台
- en: Select the **System** tab and then the **Email templates** option
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签页，然后选择**邮件模板**选项
- en: Click on the **Download .zip** button
  id: totrans-152
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下载 .zip**按钮
- en: 'This will download all the default templates in a `.zip` file. Once you unzip
    it, you will see two main directories – `email` and `email-batch`. The `email`
    directory is what we will focus on for now, as it contains all the mail templates
    for the event. Inside the `email` directory, you will see the following subdirectories:'
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 这将下载所有默认模板到一个`.zip`文件中。解压后，你将看到两个主要目录——`email`和`email-batch`。目前我们将专注于`email`目录，因为它包含了事件的所有邮件模板。在`email`目录中，你将看到以下子目录：
- en: '`css directory`: Contains CSS files to apply styles to the email'
  id: totrans-154
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`css directory`：包含应用于邮件的CSS文件。'
- en: '`html directory`: Contains templates when Jira is sending out emails as HTML'
  id: totrans-155
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`html directory`：当Jira以HTML格式发送邮件时，包含的模板。'
- en: '`includes directory`: Contains common content that is shared between one or
    more templates'
  id: totrans-156
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`includes directory`：包含多个模板共享的公共内容。'
- en: '`subject directory`: Contains templates that are used to generate the email’s
    subject'
  id: totrans-157
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`subject directory`：包含用于生成邮件主题的模板。'
- en: '`text directory`: Contains templates when Jira is sending out emails as plain
    text'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`text directory`：当Jira以纯文本格式发送邮件时，包含的模板。'
- en: As we can see, for a given mail template used by the issue event, there are
    at least three components – subject, HTML, and text. So, if you want to add a
    new template for a custom event, you will need to create those three files and
    place them in those directories accordingly. And if you want to modify an existing
    mail template, make sure you make your changes to all the necessary files, usually
    in both the HTML and text directories.
  id: totrans-159
  prefs: []
  type: TYPE_NORMAL
  zh: 正如我们所看到的，对于由问题事件使用的给定邮件模板，至少有三个组成部分——主题、HTML和文本。因此，如果你想为自定义事件添加一个新的模板，你需要创建这三个文件，并将它们分别放入相应的目录中。如果你想修改现有的邮件模板，确保你对所有必要的文件进行修改，通常是在HTML和文本目录中同时进行修改。
- en: While creating new mail templates, it is a good practice to name your template
    files after the issue event, for example, `issueescalated.vm`. This will help
    future users understand the purpose of those templates.
  id: totrans-160
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建新的邮件模板时，最好根据问题事件命名模板文件，例如`issueescalated.vm`。这样有助于将来的用户理解这些模板的用途。
- en: Mail templates use Apache’s Velocity template language ([http://velocity.apache.org](http://velocity.apache.org)).
    For this reason, creating new mail templates will require some understanding of
    HTML and template programming.
  id: totrans-161
  prefs: []
  type: TYPE_NORMAL
  zh: 邮件模板使用Apache的Velocity模板语言（[http://velocity.apache.org](http://velocity.apache.org)）。因此，创建新的邮件模板将需要一定的HTML和模板编程知识。
- en: If your templates only contain static text, you can simply use standard HTML
    tags for your template. However, if you need to have dynamic data rendered as
    part of your templates, such as the issue key or summary, you will need to use
    the Velocity syntax. A full explanation of Velocity is beyond the scope of this
    book. The following paragraph provides a quick introduction to creating simple
    mail templates for Jira. You can find more information on Velocity and its usage
    in Jira mail templates at [https://confluence.atlassian.com/adminjiraserver0822/customizing-email-content-1142237912.html](https://confluence.atlassian.com/adminjiraserver0822/customizing-email-content-1142237912.html).
  id: totrans-162
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的模板只包含静态文本，你可以直接使用标准HTML标签。但如果你需要在模板中渲染动态数据，比如问题的键或摘要，你将需要使用Velocity语法。Velocity的完整解释超出了本书的范围。以下段落简要介绍了如何为Jira创建简单的邮件模板。你可以在[https://confluence.atlassian.com/adminjiraserver0822/customizing-email-content-1142237912.html](https://confluence.atlassian.com/adminjiraserver0822/customizing-email-content-1142237912.html)找到更多关于Velocity及其在Jira邮件模板中的使用信息。
- en: 'In a Velocity template, all the text will be treated as normal. Anything that
    starts with a dollar sign (`$`), such as `$issue`, is a Velocity statement. The
    `$` sign tells Velocity to reference the item after the sign, and, when combined
    with a period (`.`), you can retrieve the value specified. For example, the following
    code in a template will get the issue key and summary from the current issue,
    separated by a `-` character:'
  id: totrans-163
  prefs: []
  type: TYPE_NORMAL
  zh: 在Velocity模板中，所有文本将作为普通文本处理。任何以美元符号（`$`）开头的内容，如`$issue`，都是Velocity语句。`$`符号告诉Velocity引用符号后的项目，并且，当与句点（`.`）结合时，你可以检索指定的值。例如，模板中的以下代码将从当前问题中获取问题的键和值，二者由`-`字符分隔：
- en: '[PRE3]'
  id: totrans-164
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: This will produce content similar to `DEMO-1 - This is a demo issue`.
  id: totrans-165
  prefs: []
  type: TYPE_NORMAL
  zh: 这将生成类似于`DEMO-1 - 这是一个演示问题`的内容。
- en: Jira provides a range of Velocity references that you can use to create mail
    templates. These references allow you to access data such as the issue being updated
    and the user triggering the event. You can find a comprehensive list at [https://developer.atlassian.com/server/jira/platform/jira-templates-and-jsps/#email-templates](https://developer.atlassian.com/server/jira/platform/jira-templates-and-jsps/#email-templates).
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 提供了一系列 Velocity 引用，您可以使用它们来创建邮件模板。这些引用允许您访问诸如正在更新的问题和触发事件的用户等数据。您可以在 [https://developer.atlassian.com/server/jira/platform/jira-templates-and-jsps/#email-templates](https://developer.atlassian.com/server/jira/platform/jira-templates-and-jsps/#email-templates)
    找到详细的列表。
- en: 'Now that you have a basic understanding of how Velocity works, you need to
    create a template for the mail subject. The following code shows a typical subject
    template:'
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您已经基本理解了 Velocity 的工作原理，接下来需要为邮件主题创建一个模板。以下代码展示了一个典型的主题模板：
- en: '[PRE4]'
  id: totrans-168
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: 'When the template is processed, Jira will substitute the actual values for
    the event type (for example, issue created), issue key, and issue summary. Therefore,
    the preceding example would produce content similar to `Issue Escalated: HD-11:
    Database server is running very slow`.'
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 当模板被处理时，Jira 将为事件类型（例如，问题创建）、问题关键字和问题摘要替换实际值。因此，上述示例将产生类似于 `问题升级：HD-11：数据库服务器运行非常缓慢`
    的内容。
- en: 'Then, you need to create a template for the actual email content. Here, you
    need to create a text and HTML version. The following code shows a simple example
    of a text-based template, which displays the key for the escalated issue:'
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，您需要为实际的邮件内容创建模板。在此，您需要创建文本版和 HTML 版。以下代码展示了一个简单的文本模板示例，它显示了升级问题的关键字：
- en: '[PRE5]'
  id: totrans-171
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Before Jira sends out the email, the preceding text will be processed, where
    all Velocity references, such as `$issue.key`, will be converted into proper values;
    for example, DEMO-1.
  id: totrans-172
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Jira 发送邮件之前，前述文本将被处理，其中所有 Velocity 引用，如 `$issue.key`，将转换为相应的值；例如，DEMO-1。
- en: 'Once you have either updated or created your mail templates, you will need
    to upload them to Jira. Here’s how to do that:'
  id: totrans-173
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦您更新或创建了邮件模板，您需要将它们上传到 Jira。以下是操作步骤：
- en: Zip up your mail templates
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将您的邮件模板打包成 Zip 文件
- en: Browse to the Jira administration console
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到 Jira 管理控制台
- en: Select the **System** tab and then the **Email templates** option
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择 **系统** 标签页，然后选择 **邮件模板** 选项
- en: Click on the `.zip` file you created
  id: totrans-177
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击您创建的 `.zip` 文件
- en: Click on the **Apply** button once Jira has verified your template’s content
  id: totrans-178
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 Jira 验证您的模板内容后，点击 **应用** 按钮
- en: Once the updated templates have been uploaded, it can take up to 5 minutes for
    the changes to take effect. If you are simply modifying existing templates, then
    that is all you need to do, but if you are adding new templates, you will need
    to register them with Jira.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦更新的模板已上传，可能需要最多 5 分钟才能使更改生效。如果您只是修改现有的模板，那么只需执行这些操作，但如果您要添加新模板，则需要在 Jira 中注册它们。
- en: To register your new templates, locate and open the `email-templates-id-mappings.xml`
    file in the `<JIRA_INSTALL>/atlassian-jira/WEB-INF/classes` directory in a text
    editor.
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 要注册您的新模板，请在文本编辑器中定位并打开 `<JIRA_INSTALL>/atlassian-jira/WEB-INF/classes` 目录中的
    `email-templates-id-mappings.xml` 文件。
- en: 'Add a new entry to the end of the file before closing the `</templatemappings>`
    tag, as follows:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 在 `</templatemappings>` 标签闭合前，将新的条目添加到文件末尾，如下所示：
- en: '[PRE6]'
  id: totrans-182
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Here, we have registered a new custom mail template entry. The details of this
    are shown in the following table:'
  id: totrans-183
  prefs: []
  type: TYPE_NORMAL
  zh: 在这里，我们注册了一个新的自定义邮件模板条目。其详细信息显示在以下表格中：
- en: '| **Parameter** | **Description** |'
  id: totrans-184
  prefs: []
  type: TYPE_TB
  zh: '| **Parameter** | **Description** |'
- en: '| `id` | This is the unique ID for the template. You need to make sure that
    no other template mapping has the same ID. |'
  id: totrans-185
  prefs: []
  type: TYPE_TB
  zh: '| `id` | 这是模板的唯一 ID。您需要确保没有其他模板映射使用相同的 ID。|'
- en: '| `name` | This is a human-readable name for Jira to display. |'
  id: totrans-186
  prefs: []
  type: TYPE_TB
  zh: '| `name` | 这是 Jira 显示的可读名称。|'
- en: '| `template` | These are the mail template filenames for subject, text, and
    HTML. All three template files must be named as specified here. |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| `template` | 这是邮件模板的文件名，用于主题、文本和 HTML。所有三个模板文件必须按此处指定的名称命名。|'
- en: '| `type` | This is the template type. For events that are generated from an
    issue, the value will be `issueevent`. |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| `type` | 这是模板类型。对于由问题生成的事件，其值将是 `issueevent`。|'
- en: Table 8.2 – Email template ID mapping parameters
  id: totrans-189
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8.2 – 邮件模板 ID 映射参数
- en: After creating your templates and registering them in the mapping file, you
    will have to restart Jira for the changes to be picked up. The new templates will
    be available when we create new events, which we will discuss in the following
    section.
  id: totrans-190
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建模板并将其注册到映射文件后，你需要重新启动 Jira 才能应用更改。新的模板将在我们创建新事件时可用，接下来的部分将讨论如何操作。
- en: Adding a custom event
  id: totrans-191
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加自定义事件
- en: Jira comes with a comprehensive list of system events that are focused on issue-related
    operations. However, there will be times when you will need to create custom-designed
    events that represent specialized business operations, or when you simply need
    to use a custom email template.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: Jira 提供了一份全面的系统事件列表，专注于与问题相关的操作。然而，某些时候你可能需要创建自定义事件，以代表特定的业务操作，或者当你仅仅需要使用自定义邮件模板时。
- en: 'Perform the following steps to add a new custom event:'
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以添加新的自定义事件：
- en: Browse to the **View Events** page.
  id: totrans-194
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**查看事件**页面。
- en: Enter a name and description for the new event in the **Add New Event** section.
  id: totrans-195
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**添加新事件**部分输入新事件的名称和描述。
- en: Select the mail template for the new event. If you have registered a new mail
    template, you can select it for the event.
  id: totrans-196
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择新事件的邮件模板。如果你已经注册了新的邮件模板，可以为该事件选择它。
- en: 'Click on the **Add** button to create a new event:'
  id: totrans-197
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮以创建新事件：
- en: '![Figure 8.8 – The Add New Event page'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.8 – 添加新事件页面'
- en: '](img/Figure_8.08_B18644.jpg)'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.08_B18644.jpg)'
- en: Figure 8.8 – The Add New Event page
  id: totrans-200
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.8 – 添加新事件页面
- en: With that, we have added a new event to Jira and assigned a custom email template
    to it. We will look at how we can fire our new event in the next section.
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: 通过这些步骤，我们已经向 Jira 添加了一个新事件并为其分配了自定义邮件模板。我们将在下一部分讨论如何触发我们新的事件。
- en: Firing a custom event
  id: totrans-202
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 触发自定义事件
- en: Unlike system events, with custom events, you need to tell Jira when it can
    fire a custom event.
  id: totrans-203
  prefs: []
  type: TYPE_NORMAL
  zh: 与系统事件不同，对于自定义事件，你需要告诉 Jira 何时触发自定义事件。
- en: Custom events are mostly fired by workflow transitions. Recall from [*Chapter
    7*](B18644_07.xhtml#_idTextAnchor187), *Workflow and Business Process*, that you
    can add post functions to workflow transitions. Almost all of Jira’s transitions
    will have post functions that fire appropriate events. It is important to understand
    that just because an event is fired does not mean that there needs to be something
    to listen to it.
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: 自定义事件主要通过工作流过渡触发。回顾 [*第 7 章*](B18644_07.xhtml#_idTextAnchor187)，*工作流和业务流程*，你可以向工作流过渡添加后置功能。几乎所有
    Jira 的过渡都会有后置功能来触发适当的事件。重要的是要理解，仅仅因为事件被触发，并不意味着必须有某个东西去监听它。
- en: If you skipped [*Chapter 7*](B18644_07.xhtml#_idTextAnchor187), *Workflow and
    Business Process*, or still do not have a good understanding of workflows, now
    would be a good time to go back and revisit that chapter.
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你跳过了 [*第 7 章*](B18644_07.xhtml#_idTextAnchor187)，*工作流和业务流程*，或者仍然没有很好地理解工作流，现在是时候回去重新阅读那一章了。
- en: 'Perform the following steps to fire a custom event from a workflow post function:'
  id: totrans-206
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以从工作流后置功能中触发自定义事件：
- en: Browse to the **View Workflows** page.
  id: totrans-207
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**查看工作流**页面。
- en: Click on the **Edit** link of the workflow that will be used to fire the event.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击将用于触发事件的工作流的**编辑**链接。
- en: Click on the transition that will fire the event when executed.
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击将触发事件的过渡。
- en: Click on the **Post Functions** tab.
  id: totrans-210
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**后置功能**标签。
- en: 'Click on the `post` function that reads **Fire a <event name> event that can
    be processed by the listeners**:'
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击`post`功能，该功能显示**触发一个可以由监听器处理的 <事件名称> 事件**：
- en: '![Figure 8.9 – Firing an issue event'
  id: totrans-212
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.9 – 触发问题事件'
- en: '](img/Figure_8.09_B18644.jpg)'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.09_B18644.jpg)'
- en: Figure 8.9 – Firing an issue event
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.9 – 触发问题事件
- en: Select the custom event from the drop-down list.
  id: totrans-215
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从下拉列表中选择自定义事件。
- en: Click on the **Update** button to apply any changes to the post function.
  id: totrans-216
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**更新**按钮以应用对后置功能所做的任何更改。
- en: Publish the workflow.
  id: totrans-217
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布工作流。
- en: Now, whenever the workflow transition is executed, the post function will run
    and fire the selected event. With events covered, in the next section, we will
    look at how we can configure Jira to listen for these events and send out notifications
    accordingly.
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，每当工作流过渡被执行时，后置功能将运行并触发所选事件。了解了事件之后，在下一部分我们将讨论如何配置 Jira 以监听这些事件，并相应地发送通知。
- en: Notifications
  id: totrans-219
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 通知
- en: Notifications associate events (both system and custom) to email recipients.
    When an event is fired and picked up, emails will be sent out. Notification types
    define the recipients of emails. For example, you can set them to only send emails
    to a specific user or all members from a given user group. You can add multiple
    notifications to a given event.
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: 通知将事件（包括系统事件和自定义事件）与电子邮件收件人关联。当事件被触发并被接收时，电子邮件将被发送出去。通知类型定义了电子邮件的接收者。例如，你可以设置只将电子邮件发送给特定用户或指定用户组中的所有成员。你可以为给定事件添加多个通知。
- en: 'Jira ships with a comprehensive list of notification types (that is, the recipients)
    that will cover many of your needs. The following table lists all the notification
    types that are available and how they work:'
  id: totrans-221
  prefs: []
  type: TYPE_NORMAL
  zh: Jira自带了一个全面的通知类型列表（即收件人），能够满足你许多的需求。下表列出了所有可用的通知类型及其工作原理：
- en: '| **Notification Type** | **Description** |'
  id: totrans-222
  prefs: []
  type: TYPE_TB
  zh: '| **通知类型** | **描述** |'
- en: '| Current Assignee | This is the current assignee of the issue. |'
  id: totrans-223
  prefs: []
  type: TYPE_TB
  zh: '| 当前分配人 | 这是当前的任务分配人。 |'
- en: '| Reporter | This is the reporter of the issue (usually the person who created
    the issue). |'
  id: totrans-224
  prefs: []
  type: TYPE_TB
  zh: '| 报告人 | 这是问题的报告人（通常是创建问题的人）。 |'
- en: '| Current User | This is the user who fired the event. |'
  id: totrans-225
  prefs: []
  type: TYPE_TB
  zh: '| 当前用户 | 这是触发事件的用户。 |'
- en: '| Project Lead | This is the lead of the project that the issue belongs to.
    |'
  id: totrans-226
  prefs: []
  type: TYPE_TB
  zh: '| 项目负责人 | 这是问题所属项目的负责人。 |'
- en: '| Component Lead | This is the lead of the component that the issue belongs
    to. |'
  id: totrans-227
  prefs: []
  type: TYPE_TB
  zh: '| 组件负责人 | 这是问题所属组件的负责人。 |'
- en: '| Single User | This states any user that exists in Jira. |'
  id: totrans-228
  prefs: []
  type: TYPE_TB
  zh: '| 单一用户 | 这表示Jira中的任何用户。 |'
- en: '| Group | This states that all users belong to the specified group. |'
  id: totrans-229
  prefs: []
  type: TYPE_TB
  zh: '| 组 | 这表示所有属于指定组的用户。 |'
- en: '| Project Role | This states that all users belong to the specified project
    role. |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| 项目角色 | 这表示所有用户都属于指定的项目角色。 |'
- en: '| Single Email Address | This states any email address. |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| 单一电子邮件地址 | 这表示任何电子邮件地址。 |'
- en: '| All Watchers | This states that all users are watching this issue. |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| 所有观察者 | 这表示所有用户都在关注此问题。 |'
- en: '| User Custom Field Value | This states the users specified in the `user-type`
    custom field. For example, if you have a User Picker Custom Field called Recipient,
    the user that’s selected in the custom field will receive notifications if they
    have access to the issue. |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '| 用户自定义字段值 | 这表示在`user-type`自定义字段中指定的用户。例如，如果你有一个名为“收件人”的用户选择器自定义字段，且在该字段中选择的用户具有访问该问题的权限，那么该用户将接收通知。
    |'
- en: '| Group Custom Field Value | This states all users that belong to the group
    in the `group-type` custom field. For example, if you have a Group Picker Custom
    Field called Approvers, all users from the group (with access to the issue) that
    are selected in the custom field will receive notifications. |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '| 组自定义字段值 | 这表示属于`group-type`自定义字段中指定组的所有用户。例如，如果你有一个名为“审批人”的组选择器自定义字段，那么该字段中被选择的所有用户（且有权限访问此问题的用户）将接收通知。
    |'
- en: Figure 8.3 – Notification types
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.3 – 通知类型
- en: As you can see, the list includes a wide range of options, from issue reporters
    to values contained in custom fields. Anything that can be represented as a user
    such as Project Lead, or contains user values such as User Custom Field Value,
    can be chosen to receive notifications.
  id: totrans-236
  prefs: []
  type: TYPE_NORMAL
  zh: 如你所见，列表包括了各种各样的选项，从问题报告人到自定义字段中包含的值。任何可以表示为用户的对象，如项目负责人，或包含用户值的字段，如用户自定义字段值，都可以选择接收通知。
- en: If a user belongs to more than one notification for a single event, Jira will
    make sure that only one email will be sent so that the user does not receive duplicates.
    For a user to receive notifications, the user must have permission to view the
    issue. The only exception to this is when using the single email address option
    (we will discuss security in [*Chapter 9*](B18644_09.xhtml#_idTextAnchor256),
    *Securing Jira*). If the user does not have permission to view the issue, Jira
    will not send a notification email.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一个用户属于一个事件的多个通知，Jira会确保只发送一封电子邮件，避免用户收到重复邮件。为了接收通知，用户必须有权限查看该问题。唯一的例外是使用单一电子邮件地址选项时（我们将在[*第9章*](B18644_09.xhtml#_idTextAnchor256)中讨论安全性，*保护Jira*）。如果用户没有查看问题的权限，Jira将不会发送通知邮件。
- en: So, now that can create custom events, create and modify mail templates, and
    control when events are fired, we will look at how to add notifications to events
    so that users can start receiving emails via a notification scheme.
  id: totrans-238
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，既然我们可以创建自定义事件、创建和修改邮件模板，并控制事件的触发时机，我们将来看如何将通知添加到事件中，以便用户可以通过通知方案开始接收电子邮件。
- en: Notification schemes
  id: totrans-239
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 通知方案
- en: A notification scheme is a reusable entity that links events with notifications.
    In other words, it contains the associations between events and their respective
    email recipients. In this section, we will cover notification schemes and how
    you can use them to send out notification emails when an event occurs in Jira.
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 通知方案是一个可重用的实体，它将事件与通知关联起来。换句话说，它包含事件与相应电子邮件接收者之间的关联。在本节中，我们将讨论通知方案，以及如何使用它们在Jira中发生事件时发送通知邮件。
- en: 'To manage notification schemes in Jira, follow these steps:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 要在Jira中管理通知方案，请执行以下步骤：
- en: Browse to the Jira administration console.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台。
- en: 'Select the **Issues** tab and then the **Notification Schemes** option. This
    will bring up the **Notification Schemes** page:'
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**问题**标签页，然后选择**通知方案**选项。这将打开**通知方案**页面：
- en: '![Figure 8.10 – The Notification Schemes page'
  id: totrans-244
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.10 – 通知方案页面'
- en: '](img/Figure_8.10_B18644.jpg)'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.10_B18644.jpg)'
- en: Figure 8.10 – The Notification Schemes page
  id: totrans-246
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.10 – 通知方案页面
- en: 'From this screen, you can see a list of all the notification schemes and the
    projects that are currently using them. Jira comes with a generic default notification
    scheme. The default scheme is set up with notifications set for all the system
    events. This allows you to quickly enable notifications in Jira. The default setup
    has the following notifications:'
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 在此页面，你可以看到所有通知方案的列表以及当前正在使用这些方案的项目。Jira附带了一个通用的默认通知方案。该默认方案设置了所有系统事件的通知。这允许你快速启用Jira中的通知。默认设置包含以下通知：
- en: '**Current Assignee**'
  id: totrans-248
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**当前指派人**'
- en: '**Reporter**'
  id: totrans-249
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**报告人**'
- en: '**All Watchers**'
  id: totrans-250
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**所有观察者**'
- en: You can modify the default notification scheme to add your own notification
    rules, but as you grow your Jira adoption, it is a better idea to create a new
    scheme from scratch or copy the default scheme and make your modifications there.
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以修改默认通知方案以添加自己的通知规则，但随着Jira使用范围的扩大，最好是从头开始创建一个新的方案，或者复制默认方案并在此基础上进行修改。
- en: Adding a notification scheme
  id: totrans-252
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加通知方案
- en: 'Unlike other schemes such as the workflow scheme, where Jira will create one
    whenever a new project is created, all new projects will be set to use the **Default
    Notification Scheme** option. So, if you want to create notifications that are
    specific to your project, you will have to create a new notification scheme. Perform
    the following steps to create a new notification scheme:'
  id: totrans-253
  prefs: []
  type: TYPE_NORMAL
  zh: 与其他方案（如工作流方案）不同，在这些方案中，Jira会在每次创建新项目时自动创建一个新的方案，而所有新项目默认使用**默认通知方案**选项。因此，如果你希望创建特定于项目的通知，则需要创建一个新的通知方案。请按照以下步骤创建新的通知方案：
- en: Browse to the **Notification Schemes** page
  id: totrans-254
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**通知方案**页面
- en: Click on the **Add notification scheme** link at the bottom
  id: totrans-255
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击底部的**添加通知方案**链接
- en: Enter a name and description for the new notification scheme
  id: totrans-256
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入新通知方案的名称和描述
- en: Click on the **Add** button to create the notification scheme
  id: totrans-257
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮以创建通知方案
- en: When you create a new notification scheme, you create a blank scheme that can
    be configured later so that you can add your own notification rules to it. You
    must configure its notification rules before applying the scheme to projects after
    you create a new notification scheme; otherwise, no notifications will be sent
    out. We will look at how to configure notification rules later in this chapter.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 当你创建一个新的通知方案时，你会创建一个空白的方案，可以稍后进行配置，以便你可以向其中添加自己的通知规则。在你创建新通知方案后，必须先配置其通知规则，再将该方案应用于项目；否则，将不会发送任何通知。我们将在本章稍后部分讨论如何配置通知规则。
- en: Managing a notification scheme
  id: totrans-259
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 管理通知方案
- en: 'Notification schemes contain notifications that are set on events in Jira.
    A notification determines who will receive an email when the corresponding event
    is fired. Perform the following steps to add a new notification:'
  id: totrans-260
  prefs: []
  type: TYPE_NORMAL
  zh: 通知方案包含在Jira事件中设置的通知。通知确定在相应事件触发时，谁将收到电子邮件。请按照以下步骤添加新通知：
- en: Click on the **Notifications** link for the notification scheme you wish to
    configure.
  id: totrans-261
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击你希望配置的通知方案的**通知**链接。
- en: Click on the **Add Notification** link or the **Add** link for the event you
    wish to add a notification for. Both actions will bring you to the **Add Notification**
    page. If you click on the **Add** link, the **Events selection** list will preselect
    the event for you.
  id: totrans-262
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加通知**链接或你希望为其添加通知的事件的**添加**链接。这两个操作都会将你带到**添加通知**页面。如果点击**添加**链接，**事件选择**列表将自动为你预选该事件。
- en: Select the events you want to add the notification type to.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你希望添加通知类型的事件。
- en: Select the notification type from the available options.
  id: totrans-264
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从可用选项中选择通知类型。
- en: 'Click on the **Add** button. For example, the following screenshot shows setting
    up a notification for Jira to send out emails to the project lead when issues
    are created and updated:'
  id: totrans-265
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加**按钮。例如，以下截图展示了如何设置通知，当问题被创建和更新时，Jira 将向项目负责人发送电子邮件：
- en: '![Figure 8.11 – The Add Notification page'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.11 – 添加通知页面'
- en: '](img/Figure_8.11_B18644.jpg)'
  id: totrans-267
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.11_B18644.jpg)'
- en: Figure 8.11 – The Add Notification page
  id: totrans-268
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.11 – 添加通知页面
- en: Once added, the notification will be listed against the events that have been
    selected. You can continue adding notifications for the events by repeating the
    same steps.
  id: totrans-269
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦添加，通知将显示在已选择的事件旁边。你可以通过重复相同的步骤继续为事件添加通知。
- en: Note
  id: totrans-270
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: You can select multiple events to add a notification type to.
  id: totrans-271
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以选择多个事件，将通知类型添加到这些事件中。
- en: 'When notifications are no longer required for certain events, you can also
    have them removed. To remove notifications, you will need to do so one by one,
    per event:'
  id: totrans-272
  prefs: []
  type: TYPE_NORMAL
  zh: 当某些事件不再需要通知时，你也可以删除它们。要删除通知，你需要逐个事件删除：
- en: Browse to the **Edit Notifications** page for the notification scheme you wish
    to configure
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到你想要配置的通知方案的**编辑通知**页面
- en: Click on the **Delete** link for the notification you wish to remove
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击你希望删除的通知旁边的**删除**链接
- en: Click on the **Delete** button to confirm the removal
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**删除**按钮以确认删除
- en: After you remove a notification, users affected by that notification will stop
    receiving emails from Jira. However, you need to pay attention to your configurations,
    as there may be other notifications for the same event that will continue to send
    emails to the same user. For example, if you created two notifications for the
    issue-created event – one set to a single user, John (who belongs to the `jira-administrator`
    group), and another set to the jira-administrator group – and your goal is to
    prevent emails from being sent to the user, John, you will need to remove both
    notifications from the event instead of simply using the **Single User** option.
  id: totrans-276
  prefs: []
  type: TYPE_NORMAL
  zh: 在删除通知后，受到该通知影响的用户将停止接收来自 Jira 的电子邮件。然而，你需要注意你的配置，因为可能会有其他针对相同事件的通知，继续向同一用户发送电子邮件。例如，如果你为问题创建事件创建了两个通知，一个设置给单一用户
    John（他属于`jira-administrator`组），另一个设置给 jira-administrator 组，而你的目标是阻止向用户 John 发送电子邮件，那么你需要从该事件中删除这两个通知，而不仅仅使用**单一用户**选项。
- en: Assigning a notification scheme
  id: totrans-277
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 分配通知方案
- en: 'When new projects are created, they are automatically assigned to use the default
    notification scheme. If you want your project to use a different scheme, you will
    need to go to the **Notifications** section of your project’s administration console:'
  id: totrans-278
  prefs: []
  type: TYPE_NORMAL
  zh: 当新项目被创建时，它们会自动分配使用默认的通知方案。如果你希望你的项目使用不同的方案，你需要进入项目管理控制台中的**通知**部分：
- en: Browse to the project administration page for the project you want to apply
    the notification scheme to.
  id: totrans-279
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到你想要应用通知方案的项目管理页面。
- en: 'Select the **Notifications** option from the left panel:'
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧面板中选择**通知**选项：
- en: '![Figure 8.12 – Associating a notification scheme'
  id: totrans-281
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.12 – 关联通知方案'
- en: '](img/Figure_8.12_B18644.jpg)'
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.12_B18644.jpg)'
- en: Figure 8.12 – Associating a notification scheme
  id: totrans-283
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.12 – 关联通知方案
- en: Select **Use a different scheme** from the **Actions** menu.
  id: totrans-284
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从**操作**菜单中选择**使用不同的方案**。
- en: Select the notification scheme to use.
  id: totrans-285
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要使用的通知方案。
- en: Click on the **Associate** button.
  id: totrans-286
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**关联**按钮。
- en: As soon as a notification scheme is applied to the project, it will take effect
    immediately, and you will see emails being sent out for the events that have been
    configured in the scheme. Like any other schemes in Jira, notification schemes
    can be assigned to multiple projects so that they can share the same notification
    behavior.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 一旦通知方案应用到项目，它将立即生效，你将看到已配置的事件的电子邮件被发送出去。像 Jira 中的其他方案一样，通知方案可以分配给多个项目，以便它们共享相同的通知行为。
- en: With so many notifications, users can often get overwhelmed by the number of
    emails Jira will send out. In the next section, we will take a look at how we
    can help reduce the number of notification emails users receive by batching them
    together.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 由于通知过多，用户常常会被 Jira 发送的电子邮件数量压倒。接下来的章节，我们将探讨如何通过将它们批量处理来减少用户收到的通知电子邮件数量。
- en: Batching email notifications
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 批量电子邮件通知
- en: 'One common complaint users have about Jira’s email notifications is their frequency.
    Every change that’s made to the same issue will trigger an email to be sent, and
    for a busy team that’s constantly updating issues, such as adding comments, this
    can very quickly cause a storm of emails being sent that flood users’ inboxes.
    To help alleviate this challenge, Jira 8 has introduced the feature of batch email
    notifications. The way this works is as follows – all changes that are made to
    a given issue in the past 10 minutes will be batched into a single summary email,
    so the user will only receive one email for these changes instead of one per change.
    This helps significantly reduce the amount of clutter that’s generated as a result
    of frequent updates that are made to issues. To enable email batching, follow
    these steps:'
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 用户对Jira电子邮件通知最常见的抱怨之一是通知的频率。对同一问题所做的每次更改都会触发发送一封电子邮件，对于一个忙碌的团队，常常更新问题（如添加评论），这可能很快就会导致大量电子邮件被发送，从而淹没用户的收件箱。为了缓解这个问题，Jira
    8引入了批量电子邮件通知功能。其工作原理如下——过去10分钟内对给定问题所做的所有更改将被合并到一封总结邮件中，这样用户只会收到一封邮件，而不是每次更改一封邮件。这有助于显著减少频繁更新问题所产生的邮件杂乱。要启用电子邮件批量处理，请按照以下步骤操作：
- en: Browse to the Jira administration console
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台
- en: Select the **System** tab and then the **Batching email notifications** option
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签，然后选择**批量电子邮件通知**选项
- en: Check the **Batching email notifications** option to enable it
  id: totrans-293
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 勾选**批量电子邮件通知**选项以启用此功能
- en: As this is a new feature that was added in Jira 8, improvements are being planned
    for future releases, such as adding support for including custom field values
    in the summary email and having a customizable batching option.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 由于这是Jira 8新增的功能，因此未来版本计划进行改进，例如增加对在总结邮件中包含自定义字段值的支持，并提供可定制的批量选项。
- en: Now that we have covered email notifications, we will see the tools provided
    by Jira to help us troubleshoot issues related to notifications.
  id: totrans-295
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经介绍了电子邮件通知，接下来我们将了解Jira提供的工具，帮助我们排查与通知相关的问题。
- en: Troubleshooting notifications
  id: totrans-296
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 故障排除通知
- en: Often, when people do not receive notifications from Jira, it can be difficult
    and frustrating to find the cause. The two most common causes of notification-related
    problems are either outgoing mail server connectivity or misconfiguration of the
    notification scheme.
  id: totrans-297
  prefs: []
  type: TYPE_NORMAL
  zh: 经常有用户无法收到Jira的通知时，找到原因可能非常困难且令人沮丧。通知相关问题最常见的两个原因是外发邮件服务器连接问题或通知方案配置错误。
- en: Troubleshooting outgoing mail server problems is quite simple. All you have
    to do is try to send out a test email, as described in the *Sending a test email*
    section. If you receive your test email, then there will be no problems with your
    outgoing mail server configuration and you can focus on your notification configurations.
  id: totrans-298
  prefs: []
  type: TYPE_NORMAL
  zh: 故障排除外发邮件服务器问题相当简单。你只需要尝试发送一封测试邮件，如*发送测试邮件*部分所述。如果你收到了测试邮件，那么说明外发邮件服务器配置没有问题，你可以专注于通知配置。
- en: 'Troubleshooting notifications is not as straightforward since there are several
    things that you will need to consider. To help with this challenge, Jira has a
    handy feature called **Notification helper**. The **Notification helper** feature
    can save the Jira administrator time by helping them pinpoint why a given user
    does or does not receive notifications. All the administrator has to do is tell
    the helper who the user is, which issue (or an example issue from a project) the
    user will or will not be receiving notifications for, and the event that is triggering
    the notification. Follow these steps:'
  id: totrans-299
  prefs: []
  type: TYPE_NORMAL
  zh: 故障排除通知问题并不像外发邮件服务器问题那样简单，因为需要考虑的因素有很多。为了帮助解决这个问题，Jira提供了一个名为**通知助手**的实用功能。**通知助手**功能可以通过帮助管理员确定为什么某个用户会或不会收到通知，节省Jira管理员的时间。管理员只需要告诉助手用户是谁，哪个问题（或项目中的示例问题）用户会或不会收到通知，以及触发通知的事件是什么。按照以下步骤操作：
- en: Browse to the Jira administration console
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台
- en: Select the **System** tab and then the **Notification helper** option
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签，然后选择**通知助手**选项
- en: Specify the user that will or will not receive notifications in the **User**
    field
  id: totrans-302
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**用户**字段中指定将会或不会收到通知的用户
- en: Specify the issue to test with
  id: totrans-303
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定测试时遇到的问题
- en: Select the type of notification event
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择通知事件类型
- en: Click on the **Submit** button
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**提交**按钮
- en: 'The **Notification helper** feature will then process the input and report
    whether the user is expected to receive notifications, and why, based on the notification
    scheme settings:'
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: '**通知助手**功能将处理输入并报告用户是否会收到通知，以及基于通知方案设置的原因：'
- en: '![Figure 8.13 – The Notification helper page'
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: '![图8.13 – 通知助手页面'
- en: '](img/Figure_8.13_B18644.jpg)'
  id: totrans-308
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.13_B18644.jpg)'
- en: Figure 8.13 – The Notification helper page
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 图8.13 – 通知助手页面
- en: As you can see from the preceding screenshot, the user, **Alana Grant**, is
    currently not receiving notifications for the **DEMO-4** issue when it is being
    updated because the notification is set up to have only the **Current Assignee**
    receive emails, and Alana Grant is not the assignee.
  id: totrans-310
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你从前面的截图中看到的，用户**Alana Grant**当前没有收到**DEMO-4**问题的通知，因为通知设置为只有**当前指派人**会收到电子邮件，而Alana
    Grant不是该问题的指派人。
- en: Now that we have looked at how Jira can send out email notifications and how
    you can troubleshoot them when you do not receive emails, in the next section,
    we will look at how to send emails to Jira to create issues and comments.
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经看过如何配置Jira发送电子邮件通知以及当你没有收到电子邮件时如何进行故障排除，在接下来的章节中，我们将了解如何向Jira发送电子邮件以创建问题和评论。
- en: Incoming emails
  id: totrans-312
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 接收邮件
- en: We have seen how to configure Jira to send emails to notify users about updates
    on their issues. However, this is only half of the story when it comes to Jira’s
    email support.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 我们已经看到如何配置Jira发送电子邮件来通知用户关于他们的问题的更新。然而，这只是Jira电子邮件支持的其中一部分。
- en: 'You can also set up Jira so that it periodically polls mailboxes for emails
    and creates issues based on the emails’ subject and content. This is a very powerful
    feature with the following benefits:'
  id: totrans-314
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以设置Jira定期轮询邮箱，检查电子邮件，并根据邮件的主题和内容创建问题。这是一个非常强大的功能，具有以下好处：
- en: It hides the complexity of Jira from business users so that they can log issues
    more efficiently and leave the complexity to the IT team.
  id: totrans-315
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它隐藏了Jira的复杂性，让业务用户可以更高效地记录问题，将复杂性留给IT团队处理。
- en: It allows users to create issues, even if Jira can only be accessed within the
    internal network. Users can send emails to a dedicated mailbox for Jira to poll.
  id: totrans-316
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 它允许用户即使在Jira只能通过内部网络访问的情况下也能创建问题。用户可以将电子邮件发送到Jira轮询的专用邮箱。
- en: In this section, we will look at how to add incoming mail servers for Jira to
    poll emails, and then create mail handlers to create issues and/or comments from
    the emails.
  id: totrans-317
  prefs: []
  type: TYPE_NORMAL
  zh: 在本节中，我们将了解如何添加接收邮件服务器以便Jira轮询电子邮件，然后创建邮件处理程序从电子邮件中创建问题和/或评论。
- en: Adding an incoming mail server
  id: totrans-318
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加接收邮件服务器
- en: For Jira to retrieve emails and create issues from them, you need to add the
    POP/IMAP mail server configurations to Jira. POP and IMAP are mail protocols that
    are used to retrieve emails from the server. Email clients, such as Microsoft
    Outlook, use one of these protocols to retrieve your emails.
  id: totrans-319
  prefs: []
  type: TYPE_NORMAL
  zh: 为了让Jira能够接收电子邮件并从中创建问题，你需要将POP/IMAP邮件服务器配置添加到Jira中。POP和IMAP是用于从服务器接收电子邮件的邮件协议。像Microsoft
    Outlook这样的邮件客户端使用这些协议之一来接收电子邮件。
- en: Unlike outgoing mail servers, Jira allows you to add multiple incoming mail
    servers. This is because while you only need one mail server to send emails, you
    may have multiple mail servers or multiple mail accounts (on the same server)
    that people will use to send emails to.
  id: totrans-320
  prefs: []
  type: TYPE_NORMAL
  zh: 与发送邮件服务器不同，Jira允许你添加多个接收邮件服务器。这是因为尽管你只需要一个邮件服务器来发送电子邮件，但你可能有多个邮件服务器或多个邮件账户（在同一个服务器上），供人们用来发送电子邮件。
- en: 'For example, you might have one that’s dedicated to providing support and another
    one for sales. It is usually a good idea to create separate mail accounts to make
    it easier when you’re trying to work out which email can go into which project.
    For this reason, adding POP/IMAP mail servers can be thought of as adding multiple
    mail accounts in Jira. Perform the following steps to add an incoming mail server:'
  id: totrans-321
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，你可能会有一个专门用于提供支持的账户，另一个用于销售。通常，创建独立的邮件账户是一个好主意，这样当你尝试确定哪个邮件应该进入哪个项目时会更方便。基于这个原因，添加POP/IMAP邮件服务器可以被看作是在Jira中添加多个邮件账户。执行以下步骤以添加一个接收邮件服务器：
- en: Browse to the Jira administration console
  id: totrans-322
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台
- en: Select the **System** tab and then the **Incoming mail** option
  id: totrans-323
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签，然后选择**接收邮件**选项
- en: Click on the **Add POP/IMAP Mail Server** button
  id: totrans-324
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加POP/IMAP邮件服务器**按钮
- en: Enter a name and description for the mail server
  id: totrans-325
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入邮件服务器的名称和描述
- en: Select the type of mail service provider – for example, if you are using your
    own hosted mail service or one of the recognized cloud providers such as Google
  id: totrans-326
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择邮件服务提供商类型 – 例如，如果您使用的是自己托管的邮件服务或谷歌等知名云服务提供商之一。
- en: Specify the hostname of the POP/IMAP server if you are using your own (custom
    provider)
  id: totrans-327
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果使用的是您自己的（自定义提供商）POP/IMAP服务器，请指定服务器的主机名。
- en: Enter the username/password credentials for the mail account
  id: totrans-328
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入邮件账户的用户名/密码凭证。
- en: 'Click on the **Save** button to create the POP/IMAP mail server:'
  id: totrans-329
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**按钮以创建POP/IMAP邮件服务器：
- en: '![Figure 8.14 – The Add mail server page'
  id: totrans-330
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.14 – 添加邮件服务器页面](img/Figure_8.14_B18644.jpg)'
- en: '](img/Figure_8.14_B18644.jpg)'
  id: totrans-331
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.14_B18644.jpg)'
- en: Figure 8.14 – The Add mail server page
  id: totrans-332
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.14 – 添加邮件服务器页面
- en: Note
  id: totrans-333
  prefs: []
  type: TYPE_NORMAL
  zh: 注意
- en: You can have multiple incoming servers.
  id: totrans-334
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以拥有多个传入服务器。
- en: Mail handlers
  id: totrans-335
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 邮件处理器
- en: Mail handlers are what Jira uses to process retrieved emails. Each mail handler
    can process emails from one incoming mail server and periodically scan for new
    emails. Jira ships with several mail handlers, each with its own features. In
    the following sections, we will discuss each of the handlers in detail.
  id: totrans-336
  prefs: []
  type: TYPE_NORMAL
  zh: 邮件处理器是Jira用来处理已检索邮件的工具。每个邮件处理器可以处理来自一个传入邮件服务器的邮件，并定期扫描新邮件。Jira随附了多个邮件处理器，每个处理器都有自己的功能。接下来的章节将详细讨论每个处理器。
- en: Creating a new issue or adding a comment to an existing issue
  id: totrans-337
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从每封邮件消息创建新问题
- en: 'Creating a new issue or adding a comment to an existing issue mail handler
    (also known as the create and comment handler in previous versions of Jira) is
    the most used mail handler. It will create new issues from the received emails
    and also add comments to existing issues if the incoming email’s subject contains
    a matching issue key. If the subject does not contain a matching issue key, a
    new issue is created. The following table lists the parameters that are required
    when creating the mail handler:'
  id: totrans-338
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新问题或为现有问题添加评论的邮件处理器（在Jira早期版本中也称为创建和评论处理器）是最常用的邮件处理器。它会从接收到的邮件中创建新问题，并且如果传入邮件的主题包含匹配的议题键，还会为现有问题添加评论。如果主题中不包含匹配的议题键，则会创建新问题。以下表格列出了创建邮件处理器时需要的参数：
- en: '![Table 8.4 – Mail handler configuration'
  id: totrans-339
  prefs: []
  type: TYPE_NORMAL
  zh: '![表 8.4 – 邮件处理器配置](img/2.png)'
- en: '](img/2.png)'
  id: totrans-340
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/2.png)'
- en: Table 8.4 – Mail handler configuration
  id: totrans-341
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8.4 – 邮件处理器配置
- en: Adding a comment with the entire email body
  id: totrans-342
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 添加整个邮件正文的评论
- en: This mail handler extracts text from an email’s content and adds it to the issue
    with a matching issue key in the subject. The author of the comment is taken from
    the **From** field.
  id: totrans-343
  prefs: []
  type: TYPE_NORMAL
  zh: 该邮件处理器从邮件内容中提取文本，并将其添加到主题中具有匹配问题键的议题中。评论的作者来自**发件人**字段。
- en: It has a set of parameters that are similar to the create and comment handler.
  id: totrans-344
  prefs: []
  type: TYPE_NORMAL
  zh: 它具有一组与创建和评论处理器类似的参数。
- en: Adding a comment from the non-quoted email body
  id: totrans-345
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从未引用的邮件正文中添加评论
- en: Adding a comment from the non-quoted email body is very similar to the full
    comment handler, but it only extracts non-quoted text and adds them as comments.
    Text that starts with *>* or *|* is considered to be quoted.
  id: totrans-346
  prefs: []
  type: TYPE_NORMAL
  zh: 从未引用的邮件正文中添加评论与完整的评论处理器非常相似，但它只提取未引用的文本并将其作为评论添加。以 *>* 或 *|* 开头的文本视为引用文本。
- en: It has a set of parameters that are similar to the create and comment handler.
  id: totrans-347
  prefs: []
  type: TYPE_NORMAL
  zh: 它具有一组与创建和评论处理器类似的参数。
- en: Creating a new issue from each email message
  id: totrans-348
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 从每封邮件消息创建新问题
- en: Creating a new issue from each email message is quite similar to the create
    and comment handler, except this will always create a new issue for every received
    email.
  id: totrans-349
  prefs: []
  type: TYPE_NORMAL
  zh: 从每封邮件消息创建新问题与创建和评论处理器非常相似，区别在于此处理器会为每封接收到的邮件始终创建新问题。
- en: It has a set of parameters that are similar to the create and comment handler.
  id: totrans-350
  prefs: []
  type: TYPE_NORMAL
  zh: 它具有一组与创建和评论处理器类似的参数。
- en: Adding a comment before a specified marker or separator in the email body
  id: totrans-351
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 在电子邮件正文中添加评论到指定的标记或分隔符之前
- en: 'Adding a comment before a specified marker or separator in the email body is
    a more powerful version of the comment handlers. It uses regular expressions to
    extract text from email contents and adds them to the issue:'
  id: totrans-352
  prefs: []
  type: TYPE_NORMAL
  zh: 在电子邮件正文中添加评论到指定的标记或分隔符之前，是评论处理器的更强大版本。它使用正则表达式从邮件内容中提取文本并将其添加到问题中：
- en: '| **Parameter** | **Description** |'
  id: totrans-353
  prefs: []
  type: TYPE_TB
  zh: '| **参数** | **描述** |'
- en: '| Split Regex | This regex expression is used to extract contents. There are
    two rules for the regex expression:`/``/-{}{}{}{}{}\s*Original Message\s*{}-/`
    or `/_____________*/` |'
  id: totrans-354
  prefs: []
  type: TYPE_TB
  zh: '| 分割正则表达式 | 这个正则表达式用于提取内容。正则表达式有两个规则：`/``/-{}{}{}{}{}\s*原始消息\s*{}-/` 或 `/_____________*/`
    |'
- en: Table 8.5 – Regex mail handler configuration
  id: totrans-355
  prefs: []
  type: TYPE_NORMAL
  zh: 表 8.5 – 正则表达式邮件处理器配置
- en: Adding a mail handler
  id: totrans-356
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 添加邮件处理器
- en: 'You can set up as many mail handlers as you want. It is recommended that you
    create dedicated mailboxes for each project where you wish to allow Jira to create
    issues from emails. For each account, you will need to create a mail handler.
    The mailbox you set up needs to be accessible through POP or IMAP. Perform the
    following steps to add a mail handler:'
  id: totrans-357
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以设置任意数量的邮件处理器。建议为每个希望通过邮件在Jira中创建问题的项目创建专用邮箱。对于每个帐户，你需要创建一个邮件处理器。你设置的邮箱需要通过POP或IMAP进行访问。按照以下步骤添加邮件处理器：
- en: Browse to the **Incoming Mail** page.
  id: totrans-358
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**传入邮件**页面。
- en: Click on the **Add incoming mail handler** button.
  id: totrans-359
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加传入邮件处理器**按钮。
- en: Provide a name to the new mail handler.
  id: totrans-360
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为新的邮件处理器提供一个名称。
- en: Select an incoming mail server or **Local Files**.
  id: totrans-361
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个传入邮件服务器或**本地文件**。
- en: Specify how long Jira will wait to poll the mailbox for new emails (in minutes).
    You will want to keep this long enough to allow enough time for Jira to process
    all the emails, but not too long as you may end up having to wait for a long time
    to see your emails converted into issues in Jira.
  id: totrans-362
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 指定Jira在多长时间后会轮询邮箱以查找新邮件（以分钟为单位）。你会希望这个时间足够长，以允许Jira处理所有邮件，但也不能太长，以免你不得不等很久才能看到你的邮件转换为Jira中的问题。
- en: Select the type of handler you want to add.
  id: totrans-363
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择你要添加的处理器类型。
- en: 'Click on the **Next** button:'
  id: totrans-364
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**按钮：
- en: '![Figure 8.15 – Adding a mail handler – step 1'
  id: totrans-365
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.15 – 添加邮件处理器 – 步骤 1'
- en: '](img/Figure_8.15_B18644.jpg)'
  id: totrans-366
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.15_B18644.jpg)'
- en: Figure 8.15 – Adding a mail handler – step 1
  id: totrans-367
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.15 – 添加邮件处理器 – 步骤 1
- en: 'Depending on the handler type you select, the next screen will vary. On the
    next screen, you will need to provide the required parameters for the mail handler,
    as described in the preceding section. The following screenshot shows an example
    configuration dialog box, where new issues will be created in the IT support project
    as **Task** types:'
  id: totrans-368
  prefs: []
  type: TYPE_NORMAL
  zh: 根据你选择的处理器类型，下一屏幕将有所不同。在下一屏幕中，你需要提供邮件处理器所需的参数，正如前一部分所描述的那样。下图显示了一个配置对话框示例，在该示例中，新的问题将以**任务**类型创建在IT支持项目中：
- en: '![Figure 8.16 – Adding a mail handler – step 2'
  id: totrans-369
  prefs: []
  type: TYPE_NORMAL
  zh: '![图 8.16 – 添加邮件处理器 – 步骤 2'
- en: '](img/Figure_8.16_B18644.jpg)'
  id: totrans-370
  prefs: []
  type: TYPE_NORMAL
  zh: '](img/Figure_8.16_B18644.jpg)'
- en: Figure 8.16 – Adding a mail handler – step 2
  id: totrans-371
  prefs: []
  type: TYPE_NORMAL
  zh: 图 8.16 – 添加邮件处理器 – 步骤 2
- en: You can always use the **Test** button to test out your configuration. Jira
    provides helpful hints if there are problems.
  id: totrans-372
  prefs: []
  type: TYPE_NORMAL
  zh: 你可以随时使用**测试**按钮来测试你的配置。如果有问题，Jira会提供有用的提示。
- en: Advanced mail handler
  id: totrans-373
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 高级邮件处理器
- en: The default mail handlers that come with Jira are often enough for simple email
    processing needs. If you need to have more control or need special processing
    logic for your incoming emails, you can create custom mail handlers. However,
    creating new mail handlers requires you to have programming knowledge; a better
    option is to use an add-on called **Enterprise Email Handler for Jira** (**JEMH**).
  id: totrans-374
  prefs: []
  type: TYPE_NORMAL
  zh: Jira自带的默认邮件处理器通常足以满足简单的电子邮件处理需求。如果你需要更高的控制或者需要为传入邮件处理特殊的逻辑，你可以创建自定义的邮件处理器。然而，创建新的邮件处理器需要具备编程知识；一个更好的选择是使用一个名为**Jira企业邮件处理器（JEMH）**的插件。
- en: With JEMH, you can set up advanced email routing, additional email-triggered
    operations such as updating an issue based on your email content, an audit of
    received/processed emails, and more. You can find out more about JEMH at [https://marketplace.atlassian.com/apps/4832/enterprise-email-handler-for-jira-jemh](https://marketplace.atlassian.com/apps/4832/enterprise-email-handler-for-jira-jemh).
  id: totrans-375
  prefs: []
  type: TYPE_NORMAL
  zh: 使用JEMH，你可以设置高级的邮件路由、基于邮件内容的附加邮件触发操作（例如更新问题）、已接收/已处理邮件的审计等。你可以在[https://marketplace.atlassian.com/apps/4832/enterprise-email-handler-for-jira-jemh](https://marketplace.atlassian.com/apps/4832/enterprise-email-handler-for-jira-jemh)了解更多关于JEMH的信息。
- en: The HR project
  id: totrans-376
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 人力资源项目
- en: Users will often want to get progress updates on their issues after they have
    logged them. So, instead of business users having to ask for updates, we will
    proactively update them through our newly acquired knowledge – that is, Jira notifications.
  id: totrans-377
  prefs: []
  type: TYPE_NORMAL
  zh: 用户通常希望在记录问题后获得问题的进度更新。因此，作为替代方案，我们将通过我们新获得的知识主动向用户更新进度——也就是通过Jira通知。
- en: In [*Chapter 5*](B18644_05.xhtml#_idTextAnchor119), *Field Management*, we added
    a custom field called **Direct Manager**, which allows users to add the manager
    of the new employee or leaving employee so that they can be kept in the loop.
  id: totrans-378
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第 5 章*](B18644_05.xhtml#_idTextAnchor119)，*字段管理*中，我们添加了一个名为**直接经理**的自定义字段，该字段允许用户添加新员工或离职员工的经理，以便将他们纳入通知范围。
- en: 'The other customization we made in [*Chapter 7*](B18644_07.xhtml#_idTextAnchor187),
    *Workflow and Business Process*, was adding new transitions to the workflow. We
    need to make sure that those transitions fire the appropriate events and also
    send out notifications. In summary, we need to do the following:'
  id: totrans-379
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在[*第 7 章*](B18644_07.xhtml#_idTextAnchor187)，*工作流和业务流程*中所做的另一个自定义操作是向工作流中添加新的过渡。我们需要确保这些过渡触发适当的事件，并发送通知。总的来说，我们需要做以下几点：
- en: Send out notifications for the events that are fired by our custom workflow
    transitions
  id: totrans-380
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 为我们的自定义工作流过渡触发的事件发送通知
- en: Send out notifications to users that are specified in our **Direct Manager**
    custom field
  id: totrans-381
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 向我们**直接经理**自定义字段中指定的用户发送通知
- en: While you can achieve both using other Jira features, such as adding users as
    watchers to the issue and reusing existing Jira system events, this exercise will
    explore the options that are available to you. In later chapters, you will see
    that there are other criteria to consider while deciding on the best approach.
  id: totrans-382
  prefs: []
  type: TYPE_NORMAL
  zh: 虽然你可以使用其他Jira功能来实现这一点，比如将用户添加为问题的观察者并重用现有的Jira系统事件，但本练习将探索你可用的选项。在后续章节中，你会看到在决定最佳方法时，还需要考虑其他标准。
- en: Setting up mail servers
  id: totrans-383
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置邮件服务器
- en: 'The first step of enabling email communication, as you may have guessed, is
    to register mail servers in Jira. If you are using the standalone distribution
    of Jira, it is recommended that you add your mail server by entering the host
    information. Follow these steps:'
  id: totrans-384
  prefs: []
  type: TYPE_NORMAL
  zh: 启用邮件通信的第一步，正如你可能猜到的，是在Jira中注册邮件服务器。如果你使用的是Jira的独立版，建议通过输入主机信息来添加邮件服务器。请按照以下步骤操作：
- en: Log in to Jira as a Jira administrator.
  id: totrans-385
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以Jira管理员身份登录Jira。
- en: Browse to the Jira administration console.
  id: totrans-386
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到Jira管理控制台。
- en: Select the **System** tab and then the **Outgoing mail** option.
  id: totrans-387
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**系统**标签，然后选择**外发邮件**选项。
- en: Click on the **Configure new SMTP mail server** button.
  id: totrans-388
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**配置新的 SMTP 邮件服务器**按钮。
- en: Enter your mail server information. If you do not have a mail server handy,
    you can sign up for a free Gmail account and use that for testing purposes.
  id: totrans-389
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入你的邮件服务器信息。如果你没有现成的邮件服务器，可以注册一个免费的Gmail账号，并将其用于测试目的。
- en: After adding your mail server, you can try sending yourself a quick test email
    to check whether Jira can access your server successfully.
  id: totrans-390
  prefs: []
  type: TYPE_NORMAL
  zh: 添加完邮件服务器后，你可以尝试发送一封快速测试邮件，检查Jira是否能成功访问你的服务器。
- en: Updating workflow post functions
  id: totrans-391
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 更新工作流后置功能
- en: 'In [*Chapter 7*](B18644_07.xhtml#_idTextAnchor187), *Workflow and Business
    Process*, we created a few new workflow transitions. Now, we need to update these
    new transitions to make sure they fire the appropriate events:'
  id: totrans-392
  prefs: []
  type: TYPE_NORMAL
  zh: 在[*第 7 章*](B18644_07.xhtml#_idTextAnchor187)，*工作流和业务流程*中，我们创建了一些新的工作流过渡。现在，我们需要更新这些新的过渡，以确保它们触发适当的事件：
- en: Browse to the **View Workflows** page.
  id: totrans-393
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到**查看工作流**页面。
- en: 'Click on the **Edit** link for **HR: Termination Workflow**.'
  id: totrans-394
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '点击**HR: 终止工作流**的**编辑**链接。'
- en: Click on any transitions other than **Done**.
  id: totrans-395
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击任何**完成**以外的过渡。
- en: Update the post function to fire the *Issue Updated* event rather than the *Generic
    Event*.
  id: totrans-396
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新后置功能以触发*问题更新*事件，而不是*通用事件*。
- en: Repeat this for all other transitions except the **Done** transition.
  id: totrans-397
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对除**完成**过渡外的所有其他过渡重复此操作。
- en: Publish the draft workflow. You can save a backup copy in case you want to revert.
  id: totrans-398
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 发布草稿工作流。如果你希望可以恢复，可以保存一个备份副本。
- en: We are using the *Issue Updated* event because it reflects the fact that the
    issue is being updated; also, the event is tied to more appropriate email templates.
    We can, of course, also create a new custom event and email templates and make
    the `post` function fire the custom event instead.
  id: totrans-399
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用*问题更新*事件，因为它反映了问题正在更新的事实；此外，该事件与更合适的邮件模板相关联。当然，我们也可以创建一个新的自定义事件和邮件模板，并让`后置`功能触发自定义事件。
- en: Setting up a notification scheme
  id: totrans-400
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置通知方案
- en: 'Now, you need to have a notification scheme so that you can start adding notifications
    to your events. We will base our notification scheme on the default scheme to
    help us get things set up quickly:'
  id: totrans-401
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，你需要一个通知方案，以便开始将通知添加到你的事件中。我们将基于默认方案来设置我们的通知方案，以便快速配置：
- en: Select the **Issues** tab and then the **Notification schemes** option
  id: totrans-402
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**问题（Issues）**选项卡，然后选择**通知方案（Notification schemes）**选项
- en: Click on the **Copy** link for the **Default Notification Scheme** option
  id: totrans-403
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**复制（Copy）**链接，选择**默认通知方案（Default Notification Scheme）**
- en: Click on the **Edit** link of the copied notification scheme
  id: totrans-404
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击复制的通知方案的**编辑（Edit）**链接
- en: Rename it `HR Notification Scheme` and click on **Update**
  id: totrans-405
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将其重命名为`HR通知方案（HR Notification Scheme）`，然后点击**更新（Update）**
- en: This will create a new notification scheme with the basic notifications pre-populated.
    All you need to do now is modify the events and add your own notification needs.
  id: totrans-406
  prefs: []
  type: TYPE_NORMAL
  zh: 这将创建一个新的通知方案，并自动填充基本的通知内容。现在你需要做的就是修改事件并添加你自己的通知需求。
- en: Setting up notifications
  id: totrans-407
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 设置通知
- en: 'There are two rules you need to follow to add notifications. First, you need
    to add notifications for your custom events so that emails will be sent out when
    they are fired. Second, you will want users that are specified in the **CC list**
    custom field to also receive emails along with the assignee and reporter of the
    issue:'
  id: totrans-408
  prefs: []
  type: TYPE_NORMAL
  zh: 添加通知时需要遵循两个规则。首先，你需要为自定义事件添加通知，以便当它们被触发时发送电子邮件。其次，你还希望指定在**抄送列表（CC list）**自定义字段中的用户与问题的负责人和报告人一起接收电子邮件：
- en: Click on the **Notifications** link for **HR Notification Scheme**
  id: totrans-409
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**HR通知方案（HR Notification Scheme）**的**通知（Notifications）**链接
- en: Click on the **Add** notification link
  id: totrans-410
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加（Add）**通知链接
- en: Select the **Issue Updated** event type
  id: totrans-411
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**问题更新（Issue Updated）**事件类型
- en: Select **User Custom Field Value** for the notification type and select **Direct
    Manager** from the drop-down list
  id: totrans-412
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**用户自定义字段值（User Custom Field Value）**作为通知类型，并从下拉列表中选择**直接经理（Direct Manager）**
- en: Click on the **Add** button
  id: totrans-413
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加（Add）**按钮
- en: Nice and easy. With just a few clicks, you have added the **Direct Manager**
    custom field to the notification scheme. So, now, regardless of who is put into
    the field, the user will receive notifications for issue updates.
  id: totrans-414
  prefs: []
  type: TYPE_NORMAL
  zh: 简单又方便。只需几次点击，你就将**直接经理（Direct Manager）**自定义字段添加到了通知方案中。所以，现在，无论谁被放入该字段，用户都会收到关于问题更新的通知。
- en: Putting it together
  id: totrans-415
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 整合
- en: 'The last step, as always, is to associate your scheme with projects for activation:'
  id: totrans-416
  prefs: []
  type: TYPE_NORMAL
  zh: 最后一步，和往常一样，是将你的方案与项目关联以进行激活：
- en: Browse to the HR project’s administration page
  id: totrans-417
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到HR项目的管理页面
- en: Select the **Notifications** option from the left panel
  id: totrans-418
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧面板中选择**通知（Notifications）**选项
- en: Use a different scheme in the **Actions** menu
  id: totrans-419
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**操作（Actions）**菜单中使用不同的方案
- en: Select the new **HR Notification Scheme** we just created
  id: totrans-420
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择我们刚刚创建的新的**HR通知方案（HR Notification Scheme）**
- en: Click on the **Associate** button
  id: totrans-421
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**关联（Associate）**按钮
- en: 'With just a few clicks, you have enabled Jira to automatically send out emails
    to update users with their issue’s progress. Not only this, but you have tied
    in the custom fields you created from earlier chapters to manage who, along with
    the issue assignee and reporter, will also get these notifications. So, let’s
    put this to the test:'
  id: totrans-422
  prefs: []
  type: TYPE_NORMAL
  zh: 只需几次点击，你就启用了Jira自动发送电子邮件来更新用户关于其问题的进展。不仅如此，你还将之前章节中创建的自定义字段绑定到通知方案中，来管理谁将与问题的负责人和报告人一起接收这些通知。那么，让我们来测试一下：
- en: Create a new **Termination** issue in the HR project.
  id: totrans-423
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在HR项目中创建一个新的**终止（Termination）**问题
- en: Select a user for the **Direct Manager** custom field. It is a good idea not
    to select yourself since the reporter will get notifications by default. Also,
    make sure that the user that’s selected has a valid email address.
  id: totrans-424
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为**直接经理（Direct Manager）**自定义字段选择一个用户。最好不要选择自己，因为报告人默认会收到通知。同时，确保所选用户有有效的电子邮件地址。
- en: Transition the issue so that it moves along the workflow.
  id: totrans-425
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 切换问题状态，使其沿着工作流进展。
- en: You will receive emails from Jira within minutes.
  id: totrans-426
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将在几分钟内收到来自Jira的电子邮件。
- en: If you do not receive emails from Jira, check your mail queue and check whether
    the mail is being generated. Then, follow the steps provided in the *Troubleshooting
    notifications* section of this chapter.
  id: totrans-427
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你没有收到Jira的邮件，请检查你的邮件队列，确认邮件是否已生成。然后，按照本章*故障排除通知（Troubleshooting notifications）*部分中的步骤操作。
- en: Summary
  id: totrans-428
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 概述
- en: In this chapter, we looked at how Jira can stay in touch with its users through
    emails. Indeed, with today’s new gadgets, such as smartphones and tablets, being
    able to keep users updated with emails is a powerful feature, and Jira has a very
    flexible structure in place to define the rules on who will receive notifications.
  id: totrans-429
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们探讨了Jira如何通过电子邮件与其用户保持联系。确实，随着今天新型智能设备的出现，例如智能手机和平板电脑，能够通过电子邮件保持用户更新是一项强大的功能，Jira也有非常灵活的结构来定义谁将接收通知的规则。
- en: We also very briefly mentioned some of the security rules about who can receive
    notifications. Jira performs security checks before sending out notifications
    for two very good reasons – first, there is no point in sending an email to a
    user who cannot view the issue; second, you will not want unauthorized users viewing
    the issue and receiving updates that they won’t know anything about.
  id: totrans-430
  prefs: []
  type: TYPE_NORMAL
  zh: 我们也简要提到了一些关于谁可以接收通知的安全规则。Jira 在发送通知之前会进行安全检查，原因有两个：首先，如果用户无法查看问题，发送电子邮件给他们毫无意义；其次，你不希望未授权的用户查看问题并接收他们无法理解的更新。
- en: In the next chapter, we will look into the security aspects of Jira and how
    you can secure your data to prevent unauthorized access.
  id: totrans-431
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章，我们将深入探讨 Jira 的安全性以及如何保护你的数据以防止未授权访问。
