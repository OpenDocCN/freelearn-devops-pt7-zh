- en: Chapter 8. Advanced Confluence
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第8章 高级 Confluence
- en: So far we have been using Confluence out of the box, making use of all the features,
    templates, and macros that are bundled with the installation. Confluence also
    comes with the possibility to add your own features, templates, and macros to
    the product. This way you can tailor your Confluence installation to your company's
    needs.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们一直在使用 Confluence 的默认功能，利用所有与安装包捆绑在一起的特性、模板和宏。Confluence 还提供了添加自己特性、模板和宏的功能。这样，你可以根据公司的需求定制你的
    Confluence 安装。
- en: In this chapter, we will learn about the more advanced features in Confluence,
    such as how to create and apply templates to give your content more structure.
    We will also take a look at creating our own macros, which can be used while creating
    content.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章中，我们将学习 Confluence 中的一些高级功能，例如如何创建和应用模板，使你的内容更具结构性。我们还将看看如何创建自己的宏，以便在创建内容时使用。
- en: 'By the end of the chapter, you will have learned about:'
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 到本章结束时，你将学到：
- en: Creating and managing content templates
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建和管理内容模板
- en: Writing user macros
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 编写用户宏
- en: Using the page properties macro
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用页面属性宏
- en: Creating shortcut links
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 创建快捷链接
- en: Templates
  id: totrans-8
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 模板
- en: We have been adding a lot of pages by now and every time we started from scratch;
    but we don't have to. When you find yourself creating the same page structure
    over again, or you want your users to use the same structure for reasons of consistency,
    templates are the answer.
  id: totrans-9
  prefs: []
  type: TYPE_NORMAL
  zh: 到目前为止，我们已经添加了很多页面，每次都从头开始；但其实我们不必这样做。当你发现自己不断重复创建相同的页面结构，或者你希望用户出于一致性的原因使用相同的结构时，模板就是答案。
- en: Templates are predefined pages that can be used as a scaffold when you are creating
    pages. Only new pages can be created from a template, and when a template is used
    the new page will contain the same content as the template. Templates are very
    useful when you want a uniform style or format for your pages.
  id: totrans-10
  prefs: []
  type: TYPE_NORMAL
  zh: 模板是预定义的页面，可以在创建页面时用作框架。只有新页面可以从模板中创建，并且当使用模板时，新的页面将包含与模板相同的内容。模板非常有用，当你希望页面具有统一的风格或格式时。
- en: Using templates
  id: totrans-11
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用模板
- en: 'When there are templates available, you can start using them to create new
    pages. When you create a page based on a template, Confluence will copy the following
    content and information to the new page:'
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: 当有可用模板时，你可以开始使用它们来创建新页面。当你基于模板创建页面时，Confluence 会将以下内容和信息复制到新页面：
- en: Labels
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 标签
- en: Text and styles
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 文本和样式
- en: Layouts and other formatting
  id: totrans-15
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 布局和其他格式
- en: Macros
  id: totrans-16
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宏
- en: Displayed media such as images or videos
  id: totrans-17
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 显示的媒体，如图像或视频
- en: The newly created page is not connected in any way to the original template;
    changes made to the template will not reflect on the created page. It is not possible
    to apply a template to an existing page; templates can only be used when creating
    a new page. The newly created page can be edited in any way a blank page can;
    content can be added, updated, and removed.
  id: totrans-18
  prefs: []
  type: TYPE_NORMAL
  zh: 新创建的页面与原始模板没有任何关联；对模板所做的更改不会反映在已创建的页面上。无法将模板应用到现有页面；模板只能在创建新页面时使用。新创建的页面可以像空白页面一样进行编辑；可以添加、更新和删除内容。
- en: 'To create a page based on a template, perform the following steps:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 要基于模板创建页面，请执行以下步骤：
- en: Click on **Create** in the header.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击标题中的**创建**。
- en: Select a space to create the new page in.
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个空间来创建新页面。
- en: Choose a template from the available templates.
  id: totrans-22
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从可用模板中选择一个模板。
- en: If the template contains variables, you will see a form. Type the relevant information
    into the fields and click on **Next**.
  id: totrans-23
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果模板包含变量，你将看到一个表单。在字段中输入相关信息，然后点击**下一步**。
- en: You will see a new page based upon the template.
  id: totrans-24
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你将看到一个基于模板的新页面。
- en: Give the page a title and add, update, or delete the content.
  id: totrans-25
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为页面命名，并添加、更新或删除内容。
- en: Click on **Save**.
  id: totrans-26
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**。
- en: 'The following screenshot displays the available templates that can be used
    to create a new page:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 以下截图展示了可以用来创建新页面的可用模板：
- en: '![Using templates](img/9526EN_08_06.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![使用模板](img/9526EN_08_06.jpg)'
- en: Creating templates
  id: totrans-29
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建模板
- en: 'In Confluence, templates can be created on two levels of the Confluence hierarchy:'
  id: totrans-30
  prefs: []
  type: TYPE_NORMAL
  zh: 在 Confluence 中，模板可以在 Confluence 层级的两个级别上创建：
- en: '**Space templates**: These templates are only available in the space you created
    them in. Space Administrators can define space templates via the space admin screen.'
  id: totrans-31
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**空间模板**：这些模板只在你创建它们的空间中可用。空间管理员可以通过空间管理界面定义空间模板。'
- en: '**Global templates**: These templates are available in every space in Confluence.
    Confluence Administrators can define global templates via the Administration Console.'
  id: totrans-32
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**全局模板**：这些模板在 Confluence 中的每个空间都可以使用。Confluence 管理员可以通过管理控制台定义全局模板。'
- en: Space templates
  id: totrans-33
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 空间模板
- en: Space templates can be created by Space Administrators and are only available
    in the space you create them in.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 空间模板可以由空间管理员创建，并且只在您创建它们的空间中可用。
- en: 'To add a template for a space, perform the following steps:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 要为某个空间添加模板，请执行以下步骤：
- en: Go to any page in the space.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 转到空间中的任何页面。
- en: Click on **Space Tools** from the sidebar.
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从侧边栏点击**空间工具**。
- en: Select **Content Tools**, followed by **Templates** from the space admin menu.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从空间管理员菜单中选择**内容工具**，然后选择**模板**。
- en: Click on the **Create new Template** button.
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建新模板**按钮。
- en: 'If your space uses the documentation theme:'
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您的空间使用文档主题：
- en: Select **Browse** | **Space Admin**.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**浏览** | **空间管理员**。
- en: Click on **Templates** from the left-hand navigation.
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧导航中点击**模板**。
- en: Click on the **Create new Template** button.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建新模板**按钮。
- en: You will be redirected to the **Create Template** screen. How you can add content
    and create your template is explained in the *Adding content to your template*
    section.
  id: totrans-44
  prefs: []
  type: TYPE_NORMAL
  zh: 您将被重定向到**创建模板**页面。在*将内容添加到模板*部分中说明了如何添加内容并创建您的模板。
- en: Global templates
  id: totrans-45
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 全局模板
- en: Global templates can be created by Confluence Administrators and are available
    in all spaces within Confluence.
  id: totrans-46
  prefs: []
  type: TYPE_NORMAL
  zh: 全局模板可以由 Confluence 管理员创建，并且在 Confluence 中的所有空间中都可以使用。
- en: 'To add a global template, perform the following steps:'
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 要添加全局模板，请执行以下步骤：
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-48
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览至管理控制台（**管理** | **Confluence 管理员**）。
- en: Choose **Global Templates** in the left-hand side menu.
  id: totrans-49
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在左侧菜单中选择**全局模板**。
- en: Click on the **Add New Global Template** button.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**添加新全局模板**按钮。
- en: You will be redirected to the **Create Template** screen. How you can add content
    and create your template is explained in the *Adding content to your template*
    section.
  id: totrans-51
  prefs: []
  type: TYPE_NORMAL
  zh: 您将被重定向到**创建模板**页面。在*将内容添加到模板*部分中说明了如何添加内容并创建您的模板。
- en: Adding content to your template
  id: totrans-52
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 将内容添加到您的模板
- en: 'The **Create Template** view is very similar to the regular editor in Confluence:'
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: '**创建模板**视图与 Confluence 中的常规编辑器非常相似：'
- en: '![Adding content to your template](img/9526EN_08_01.jpg)'
  id: totrans-54
  prefs: []
  type: TYPE_IMG
  zh: '![将内容添加到您的模板](img/9526EN_08_01.jpg)'
- en: What normally is the page title will now be the template name. The template
    name will be displayed when you create a new page, so choose a descriptive name
    for your template.
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 通常情况下，页面标题将是模板名称。模板名称将在您创建新页面时显示，因此请选择一个具有描述性的名称作为模板名称。
- en: The content of the template is just like a regular page; you can use styles,
    layouts, and other formatting. You can also add links and macros. In addition
    to the normal features, the template editor also allows you to add variables and
    instruction texts. Using variables in your template will create a form for collection
    of data when someone adds a page based on the template.
  id: totrans-56
  prefs: []
  type: TYPE_NORMAL
  zh: 模板的内容就像普通页面一样；您可以使用样式、布局和其他格式化功能。您还可以添加链接和宏。除了常规功能外，模板编辑器还允许您添加变量和说明性文本。使用变量将使模板在有人基于它创建页面时生成一个数据收集表单。
- en: 'Some points to take into account when creating a template are:'
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 创建模板时需要考虑的几个要点：
- en: '**Labels**: Select **Labels** from the bottom-left to add labels to the template.
    These labels will be included in all the pages created using this template.'
  id: totrans-58
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**标签**：从左下角选择**标签**以向模板添加标签。这些标签将包含在所有使用此模板创建的页面中。'
- en: '**Images and other attachments**: It is not possible to add any file or image
    to a template. If you want to use an image or attachment in your template, you
    need to attach this file to another page in Confluence.'
  id: totrans-59
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**图片和其他附件**：无法将任何文件或图片添加到模板中。如果您想在模板中使用图片或附件，需要将该文件附加到 Confluence 中的其他页面。'
- en: 'Then insert the image by performing the following steps:'
  id: totrans-60
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 然后按照以下步骤插入图片：
- en: Select **Insert** | **Image**.
  id: totrans-61
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**插入** | **图片**。
- en: Use the media browser to find your image.
  id: totrans-62
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用媒体浏览器查找您的图片。
- en: Click on **Insert** to insert your image.
  id: totrans-63
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**插入**以插入您的图片。
- en: '**Instructional text**: Instructional text allows you to add placeholder content
    to a template. This placeholder is only visible in the editor and disappears when
    the author of the page begins typing in that placeholder.'
  id: totrans-64
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**说明性文本**：说明性文本允许您向模板中添加占位符内容。此占位符仅在编辑器中可见，并且当页面的作者开始在该占位符中输入内容时，它将消失。'
- en: These texts can provide instructions for users on how to use the template and
    which data is expected at certain locations.
  id: totrans-65
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 这些文本可以为用户提供如何使用模板以及在特定位置期望输入哪些数据的说明。
- en: 'To insert an instructional text, perform the following steps:'
  id: totrans-66
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要插入说明文本，请执行以下步骤：
- en: Place your cursor on the template where you want the instructional text to appear.
  id: totrans-67
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将光标放置在模板中你希望显示说明文本的位置。
- en: Click on **Template** on the editor toolbar.
  id: totrans-68
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击编辑器工具栏中的**模板**。
- en: Select **Instructional Text**.
  id: totrans-69
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**说明文本**。
- en: Start typing; the instructional text appears in italics with a shaded background
    to distinguish it from the normal paragraph text.
  id: totrans-70
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 开始输入；说明文本将以斜体显示，并带有阴影背景，以便与普通段落文本区分开来。
- en: The type of the placeholder can be changed from "text" to a "user mention",
    which starts the mention's autocomplete when the author starts typing. To change
    the placeholder type, click on the placeholder and select **User Mention**.
  id: totrans-71
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 占位符的类型可以从“文本”更改为“用户提及”，当作者开始输入时，会启动用户提及的自动完成。要更改占位符类型，请点击占位符并选择**用户提及**。
- en: '**Variables**: With variables you can introduce data entry to your template,
    making sure not only the layout is organized but the content as well. Variables
    added to a template act as form fields. When somebody creates a page based on
    your template, Confluence will display an entry box for each variable as shown
    in the following screenshot. Users can enter data into each field and the data
    is then inserted onto the new page:![Adding content to your template](img/9526EN_08_02.jpg)'
  id: totrans-72
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**变量**：通过使用变量，你可以将数据输入引入模板，确保不仅布局井然有序，内容也得到了组织。添加到模板中的变量充当表单字段。当有人基于你的模板创建页面时，Confluence会为每个变量显示一个输入框，如下所示：![向模板添加内容](img/9526EN_08_02.jpg)'
- en: Each variable must have a unique name. If you add the same variable more than
    once in the same template, Confluence will provide both placeholders with the
    same value. This is useful when you need the same information in more than one
    position.
  id: totrans-73
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 每个变量必须有一个唯一的名称。如果你在同一个模板中多次添加相同的变量，Confluence会为这两个占位符提供相同的值。当你需要在多个位置使用相同的信息时，这非常有用。
- en: 'To insert a variable into a template, perform the following steps:'
  id: totrans-74
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 要将变量插入模板，请执行以下步骤：
- en: Place your cursor at the location you want to insert a variable
  id: totrans-75
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将光标放置在你想插入变量的位置
- en: Select **Template** from the editor toolbar.
  id: totrans-76
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从编辑器工具栏中选择**模板**。
- en: Select an existing variable or click on **New Variable**.
  id: totrans-77
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择一个现有变量或点击**新建变量**。
- en: Enter the variable name.
  id: totrans-78
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入变量名称。
- en: Press *Enter*. This will create a single-line text input field.
  id: totrans-79
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 按下*Enter*键。这将创建一个单行文本输入字段。
- en: To change the variable type, click on the placeholder. The property panel will
    appear where you can choose different types. See the next table for a description
    of those types.
  id: totrans-80
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要更改变量类型，请点击占位符。属性面板将出现，您可以在其中选择不同的类型。有关这些类型的描述，请参见下表。
- en: Speed up variable entry by using the keyboard shortcut *$* (*Shift* + *4*) for
    autocomplete.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 使用键盘快捷键*$*（*Shift* + *4*）来加速变量输入并启用自动完成。
- en: 'These are the types of variables available:'
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 这些是可用的变量类型：
- en: '| Variable type | Description |'
  id: totrans-83
  prefs: []
  type: TYPE_TB
  zh: '| 变量类型 | 描述 |'
- en: '| --- | --- |'
  id: totrans-84
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| Text | Creates a single-line text input field as shown:![Adding content to
    your template](img/9526EN_08_03.jpg) |'
  id: totrans-85
  prefs: []
  type: TYPE_TB
  zh: '| 文本 | 创建一个单行文本输入字段，如下所示：![向模板添加内容](img/9526EN_08_03.jpg) |'
- en: '| Multi-line text | Creates a textbox that allows more than one line of text.By
    default, this textbox is of **5** rows with **100** characters wide. You can change
    the size in the property panel:![Adding content to your template](img/9526EN_08_04.jpg)
    |'
  id: totrans-86
  prefs: []
  type: TYPE_TB
  zh: '| 多行文本 | 创建一个允许输入多行文本的文本框。默认情况下，该文本框有**5**行，宽度为**100**个字符。你可以在属性面板中更改其大小：![向模板添加内容](img/9526EN_08_04.jpg)
    |'
- en: '| List | Creates a drop-down list. You must specify the values for the drop-down
    list. These values:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: '| 列表 | 创建一个下拉列表。你必须为下拉列表指定值。这些值：'
- en: Must be separated by commas
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 必须用逗号分隔
- en: Can include any letter, number, spaces, and other special characters except
    a comma, as these are used as separators
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以包含任何字母、数字、空格以及其他特殊字符，除了逗号，因为逗号用作分隔符。
- en: '![Adding content to your template](img/9526EN_08_05.jpg) |'
  id: totrans-90
  prefs: []
  type: TYPE_NORMAL
  zh: '![向模板添加内容](img/9526EN_08_05.jpg) |'
- en: Importing templates
  id: totrans-91
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 导入模板
- en: In addition to creating your own templates, you can download predefined templates
    from the Atlassian Marketplace in the form of a template bundle or Blueprints.
    Each bundle contains one or more templates, created by Atlassian or other parties.
  id: totrans-92
  prefs: []
  type: TYPE_NORMAL
  zh: 除了创建自己的模板外，您还可以从 Atlassian Marketplace 下载预定义的模板，这些模板以模板包或蓝图的形式提供。每个包包含一个或多个模板，这些模板由
    Atlassian 或其他方创建。
- en: 'An example of one of those bundles is available here:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 其中一个模板包的示例如下：
- en: '[https://marketplace.atlassian.com/20489](https://marketplace.atlassian.com/20489)'
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: '[https://marketplace.atlassian.com/20489](https://marketplace.atlassian.com/20489)'
- en: Downloading and installing add-ons, like template bundles, is described in more
    detail in [Chapter 9](ch09.html "Chapter 9. General Administration"), *General
    Administration*.
  id: totrans-95
  prefs: []
  type: TYPE_NORMAL
  zh: 下载和安装附加组件，如模板包的详细信息，请参阅[第 9 章](ch09.html "第 9 章：通用管理")，*通用管理*。
- en: Checking installed template bundles
  id: totrans-96
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 检查已安装的模板包
- en: 'To check which bundles are available and can be imported, perform the following
    steps:'
  id: totrans-97
  prefs: []
  type: TYPE_NORMAL
  zh: 要检查哪些模板包可用并可以导入，请执行以下步骤：
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到管理控制台（**管理** | **Confluence 管理**）。
- en: Select **Import Templates** from the left-hand side menu.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧菜单中选择**导入模板**。
- en: You will see a list of template bundles installed and all the templates included
    in each bundle:![Checking installed template bundles](img/9526EN_08_07.jpg)
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将看到已安装的模板包列表，以及每个包中包含的所有模板：![检查已安装的模板包](img/9526EN_08_07.jpg)
- en: Display of template bundles available for import
  id: totrans-101
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 显示可供导入的模板包
- en: Making templates available for usage
  id: totrans-102
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 使模板可供使用
- en: If you have one or more template bundles installed, you can import them to make
    those templates available for your users.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您已安装一个或多个模板包，可以导入它们以便为您的用户提供这些模板。
- en: 'To import a template, perform the following steps:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: 要导入模板，请执行以下步骤：
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-105
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到管理控制台（**管理** | **Confluence 管理**）。
- en: Select **Import Templates** from the left-hand side menu.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧菜单中选择**导入模板**。
- en: You will see a list of template bundles installed and all the templates included
    in each bundle. If you click on the template name, a preview is shown.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您将看到已安装的模板包列表，以及每个包中包含的所有模板。如果您点击模板名称，将显示预览。
- en: Select the templates you want to import by checking the boxes next to the template
    names.
  id: totrans-108
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过勾选模板名称旁边的框来选择要导入的模板。
- en: Choose the destination for the templates in the **Import To:** dropdown. If
    you want to import the templates to a specific space, select that space; otherwise
    select **Global Templates** to make the templates available for all spaces.
  id: totrans-109
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**导入到：**下拉菜单中选择模板的目标位置。如果您希望将模板导入到特定空间，请选择该空间；否则，选择**全局模板**以使模板对所有空间可用。
- en: User Macros
  id: totrans-110
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户宏
- en: 'Throughout the book, we have learned what macros are and how we can use them
    to make our content more engaging and alive. Most macros we have used so far are
    either bundled with Confluence, or part of an add-on we have installed. But there
    is another possibility to add macros: via user macros.'
  id: totrans-111
  prefs: []
  type: TYPE_NORMAL
  zh: 在本书中，我们已经学习了什么是宏，以及如何使用宏使我们的内容更加生动和吸引人。到目前为止，我们使用的大多数宏要么是与 Confluence 一起捆绑的，要么是我们安装的附加组件的一部分。但还有另一种添加宏的方式：通过用户宏。
- en: User macros are short pieces of code that make it easier to perform often-used
    functions or add custom formatting to your page. This could, for example, be a
    preconfigured panel macro with different styling than the defaults. We will create
    this example ourselves later in this chapter.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 用户宏是简短的代码片段，可以简化常用功能的执行或为页面添加自定义格式。例如，这可以是一个预配置的面板宏，其样式不同于默认样式。我们将在本章稍后自己创建这个示例。
- en: System Administrators can add user macros via the Confluence Administration
    Console.
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 系统管理员可以通过 Confluence 管理控制台添加用户宏。
- en: Managing user macros
  id: totrans-114
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 管理用户宏
- en: To manage user macros, you need to have System Administrator permissions. Be
    careful when installing user macros from an unknown source; macros could potentially
    affect the stability and security of your Confluence installation.
  id: totrans-115
  prefs: []
  type: TYPE_NORMAL
  zh: 要管理用户宏，您需要具有系统管理员权限。请谨慎从未知来源安装用户宏；宏可能会影响您 Confluence 安装的稳定性和安全性。
- en: 'Perform the following steps for adding a user macro:'
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 添加用户宏的步骤如下：
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到管理控制台（**管理** | **Confluence 管理**）。
- en: Select **User Macros** from the left-hand side menu.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧菜单中选择**用户宏**。
- en: Click on **Create a User Macro** at the bottom of the list of macros.
  id: totrans-119
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击宏列表底部的**创建用户宏**。
- en: Enter the macro details as explained in the *Writing user macros* section.
  id: totrans-120
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入宏详细信息，如*编写用户宏*部分所解释。
- en: Click on **Save**.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**保存**。
- en: 'Perform the following steps for editing a user macro:'
  id: totrans-122
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以编辑用户宏：
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到管理控制台（**管理** | **Confluence 管理**）。
- en: Select **User Macros** from the left-hand side menu.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧菜单中选择**用户宏**。
- en: Click on **Edit** next to the relevant macro.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击相关宏旁边的**编辑**。
- en: Change the macro details as explained in the *Writing user macros* section.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更改宏详细信息，如*编写用户宏*部分所解释。
- en: Click on **Save**.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击**保存**。
- en: 'Perform the following steps for removing a user macro:'
  id: totrans-128
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤以删除用户宏：
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-129
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到管理控制台（**管理** | **Confluence 管理**）。
- en: Select **User Macros** from the left-hand side menu.
  id: totrans-130
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧菜单中选择**用户宏**。
- en: Click on **Remove** next to the relevant macro.
  id: totrans-131
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 单击相关宏旁边的**删除**。
- en: If you remove a user macro that is being used on a Confluence page, you will
    need to remove the macro from the page manually.
  id: totrans-132
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您删除了正在 Confluence 页面上使用的用户宏，您需要手动从页面中删除该宏。
- en: Tip
  id: totrans-133
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 提示
- en: You can use the Confluence search to find pages that are using a user macro.
    More information on searching for macros can be found in the *Searching labels*
    section in [Chapter 4](ch04.html "Chapter 4. Managing Content"), *Managing Content*.
  id: totrans-134
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 Confluence 搜索来查找正在使用用户宏的页面。有关搜索宏的更多信息，请参阅[第4章](ch04.html "第4章 管理内容")中的*搜索标签*部分，*管理内容*。
- en: Writing user macros
  id: totrans-135
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 编写用户宏
- en: 'Writing a user macro is done via a form in the Administration Console. We''ll
    go over the input fields to help you create your first user macro:'
  id: totrans-136
  prefs: []
  type: TYPE_NORMAL
  zh: 编写用户宏是在管理控制台通过表单完成的。我们将通过输入字段帮助您创建第一个用户宏：
- en: '![Writing user macros](img/9526EN_08_10.jpg)'
  id: totrans-137
  prefs: []
  type: TYPE_IMG
  zh: '![编写用户宏](img/9526EN_08_10.jpg)'
- en: Input form for creating a new user macro
  id: totrans-138
  prefs: []
  type: TYPE_NORMAL
  zh: 创建新用户宏的输入表单
- en: '**Macro Name**: This is the name of the macro and can only contain letters,
    numbers, and hyphens (-); for example: teaser-panel.'
  id: totrans-139
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**宏名称**：这是宏的名称，且只能包含字母、数字和连字符（-）；例如：teaser-panel。'
- en: '**Visibility**: Here you can set the visibility in the macro browser; this
    can be all users or only system administrators. Hiding the macro for all users
    will still allow them to use the macro, but it avoids cluttering the Macro Browser
    and autocomplete.'
  id: totrans-140
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**可见性**：在这里，您可以设置宏浏览器中的可见性；可以是所有用户或仅系统管理员。将宏对所有用户隐藏仍然允许他们使用该宏，但可以避免宏浏览器和自动完成功能的杂乱。'
- en: 'Choosing **Visible only to system administrators in the Macro Browser** means
    that:'
  id: totrans-141
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 选择**仅对系统管理员在宏浏览器中可见**意味着：
- en: Only system administrators will see this macro in the Macro Browser or autocomplete.
    For other users, the macro will not show up, even while searching the macro.
  id: totrans-142
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 仅系统管理员将在宏浏览器或自动完成中看到此宏。对于其他用户，即使在搜索宏时，此宏也不会显示。
- en: The macro output will be visible to all users who have permissions to see the
    page.
  id: totrans-143
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宏输出将对所有有权限查看页面的用户可见。
- en: Any user with edit permissions will see the macro on the page if it is already
    on it. Your users are also allowed to edit or remove the macro.
  id: totrans-144
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 任何具有编辑权限的用户都可以看到页面上已有的宏。您的用户还可以编辑或删除该宏。
- en: '**Macro Title**: The macro title is the name that will appear in the Macro
    Browser and autocomplete. Choose a descriptive title to make it easier for your
    users to find the macro.'
  id: totrans-145
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**宏标题**：宏标题是将出现在宏浏览器和自动完成中的名称。选择一个描述性的标题，以便用户更容易找到该宏。'
- en: '**Description**: The description text shows next to the macro in the Macro
    Browser. The search in the Macro Browser will also use the description text to
    search in.'
  id: totrans-146
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**描述**：描述文本会显示在宏浏览器中的宏旁边。宏浏览器中的搜索也会使用描述文本进行搜索。'
- en: '**Categories**: Select one or more categories to place your user macro in.
    These categories relate to the categories a user sees in the Macro Browser. To
    select multiple categories, hold down the *Ctrl* key while selecting.'
  id: totrans-147
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**类别**：选择一个或多个类别，将您的用户宏放入其中。这些类别与用户在宏浏览器中看到的类别相关。要选择多个类别，请在选择时按住*Ctrl*键。'
- en: '**Icon URL**: The Macro Browser can display an icon for your macro if you provide
    a URL. This can either be an absolute URL, or a path relative to the Confluence''s
    base URL; for example: `http://example.com/images/no-print-icon.png` or `/images/icons/macrobrowser/no-print-icon.png`.'
  id: totrans-148
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**图标 URL**：如果您提供一个 URL，宏浏览器可以显示您的宏的图标。这可以是绝对 URL，也可以是相对于 Confluence 基本 URL
    的路径；例如：`http://example.com/images/no-print-icon.png` 或 `/images/icons/macrobrowser/no-print-icon.png`。'
- en: '**Documentation URL**: If you have online documentation, enter the URL of this
    documentation here. The link will appear in the macro properties dialog. In some
    cases, a Confluence page documenting your user macro is very useful for your users.'
  id: totrans-149
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**文档 URL**：如果您有在线文档，请在此处输入文档的 URL。链接将显示在宏属性对话框中。在某些情况下，为用户宏编写一个 Confluence
    页面文档非常有用。'
- en: '**Macro Body Processing**: You can specify that your macro can have a body,
    allowing your users to enter content in your macro. An example of a macro with
    a body is the panel macro.'
  id: totrans-150
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**宏主体处理**：您可以指定您的宏可以具有主体，允许用户在您的宏中输入内容。一个具有主体的宏的示例是面板宏。'
- en: If your macro has a body, this body will be available in your macro template
    with the `$body` variable. The content of your body depends on how the processing
    is done.
  id: totrans-151
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 如果您的宏有主体，则该主体将在宏模板中通过 `$body` 变量可用。主体的内容取决于处理方式。
- en: '| Processing option | Description |'
  id: totrans-152
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| 处理选项 | 描述 |'
- en: '| --- | --- |'
  id: totrans-153
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| **No macro body** | Select this option if your macro doesn''t need a body.
    |'
  id: totrans-154
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **无宏主体** | 如果您的宏不需要主体，请选择此选项。 |'
- en: '| **Escaped** | If your macro has a body and you make use of the body in your
    template, Confluence will escape any HTML in the body.So, if the body is: `<b>Example
    HTML</b>`Then the value of $body is: `&lt;b&gt;ExampleHTML&lt;/b&gt;`This will
    be rendered as: `<b>Example HTML</b>` |'
  id: totrans-155
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **已转义** | 如果您的宏有主体，并且在模板中使用了主体，则 Confluence 将转义主体中的任何 HTML。因此，如果主体是：`<b>Example
    HTML</b>`那么 `$body` 的值是：`&lt;b&gt;ExampleHTML&lt;/b&gt;`这将呈现为：`<b>Example HTML</b>`
    |'
- en: '| **Unrendered** | Use this option if you want the `$body` variable to be exactly
    like the user entered it. You should process the body within the template to make
    sure HTML is outputted by the template. |'
  id: totrans-156
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **未渲染** | 如果您希望`$body`变量与用户输入的完全一致，请使用此选项。您应在模板中处理主体以确保模板输出HTML。 |'
- en: '| **Rendered** | The body will be rendered, so most HTML will be passed to
    the template unmodified; but Confluencespecific markup, such as macro definitions,
    will be processed and rendered.So, if the body is: `<b>Example HTML</b>`Then the
    value of `$body`: is `<b>Example HTML</b>`This will be rendered as: **Example
    HTML** |'
  id: totrans-157
  prefs:
  - PREF_IND
  type: TYPE_TB
  zh: '| **已渲染** | 主体将被渲染，因此大多数 HTML 将未经修改地传递到模板；但 Confluence 特定的标记，如宏定义，将被处理和渲染。因此，如果主体是：`<b>Example
    HTML</b>`那么 `$body` 的值是 `<b>Example HTML</b>`这将呈现为：**Example HTML** |'
- en: '**Template**: This is where the magic happens: the macro template. Here you
    should write the code that specifies what your macro will do. We will go into
    detail on how to write a user macro template soon, but here is a quick guide up
    front:'
  id: totrans-158
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**模板**：这是魔术发生的地方：宏模板。在这里，您应该编写指定宏功能的代码。我们很快将详细介绍如何编写用户宏模板，但以下是一个快速指南：'
- en: Use HTML and Confluence-specific XML elements in your macro template. Use the
    Storage Format tool to find the specific XML.
  id: totrans-159
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在您的宏模板中使用 HTML 和 Confluence 特定的 XML 元素。使用存储格式工具查找特定的 XML。
- en: It is possible to use Apache Velocity in the template.
  id: totrans-160
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 可以在模板中使用 Apache Velocity。
- en: If your macro has a body, the content is available in the `$body` variable.
  id: totrans-161
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您的宏有主体，则该内容可通过 `$body` 变量获得。
- en: Each parameter for your macro should have matching metadata definitions. Use
    `@param` to define that metadata.
  id: totrans-162
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 每个宏的参数应具有匹配的元数据定义。使用`@param`来定义该元数据。
- en: Use `@noparams` if your macro does not access any parameters.
  id: totrans-163
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果您的宏不访问任何参数，请使用`@noparams`。
- en: Note
  id: totrans-164
  prefs:
  - PREF_IND
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Apache Velocity is a template engine that provides a template language to reference
    objects defined in the backend of Confluence. Velocity is the main template engine
    in Confluence and is used for displaying almost every page. Velocity can be used
    in your macro to add some logic (if-else) or to get information from the backend,
    that is, the current page title and other page properties.
  id: totrans-165
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: Apache Velocity 是一个模板引擎，提供一个模板语言来引用在 Confluence 后端定义的对象。Velocity 是 Confluence
    的主要模板引擎，几乎用于显示每一页。您可以在您的宏中使用 Velocity 来添加一些逻辑（if-else）或从后端获取信息，例如当前页面标题和其他页面属性。
- en: Writing a user macro template
  id: totrans-166
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 编写用户宏模板
- en: A user macro template is a piece of code that specifies what your macro does.
    It is written in a combination of HTML, XML, and Velocity. We will build a user
    macro together to give you some insight into what the possibilities are.
  id: totrans-167
  prefs: []
  type: TYPE_NORMAL
  zh: 用户宏模板是指定宏功能的一段代码。它是由 HTML、XML 和 Velocity 代码组合编写的。我们将一起构建一个用户宏，帮助您了解可用的功能。
- en: I assume you have filled in the other text fields of the macro based on the
    previous paragraph. Make sure that the **Macro Body Processing** option is set
    to **Rendered**.
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 我假设您已经根据前面的段落填写了宏的其他文本字段。确保**宏主体处理**选项设置为**已渲染**。
- en: A descriptive header
  id: totrans-169
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 描述性标题
- en: It is a good practice to have a descriptive header at the top of every template.
    The header tells what the macro does and what kind of parameters it expects.
  id: totrans-170
  prefs: []
  type: TYPE_NORMAL
  zh: 在每个模板的顶部添加描述性标题是一种良好的实践。标题告诉用户宏的功能以及它期望的参数类型。
- en: 'Our header would look something like this:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的标题大致如下：
- en: '[PRE0]'
  id: totrans-172
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Parameters
  id: totrans-173
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 参数
- en: It is possible to use parameters in your user macro, so that users can pass
    extra information for you to render. If you define your parameters, Confluence
    will display the corresponding fields in the **Macro properties** dialog and browser.
  id: totrans-174
  prefs: []
  type: TYPE_NORMAL
  zh: 在用户宏中使用参数是可能的，这样用户就可以传递额外的信息供您渲染。如果您定义了参数，Confluence 会在**宏属性**对话框和浏览器中显示相应的字段。
- en: 'A parameter definition in the template consists of three parts:'
  id: totrans-175
  prefs: []
  type: TYPE_NORMAL
  zh: 模板中的参数定义包括三个部分：
- en: '`@param` – to let Confluence know we are defining a parameter'
  id: totrans-176
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`@param` – 用于告诉 Confluence 我们正在定义一个参数'
- en: Name – to access the parameter's value in your template
  id: totrans-177
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 名称 – 用于访问模板中参数的值
- en: Extra attributes – to further describe your parameter
  id: totrans-178
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 额外属性 – 用于进一步描述您的参数
- en: Parameters are generally defined at the top of the template, just below the
    header. The order in which you specify the parameters is also the order in which
    they are displayed in the parameter section (the right-hand side) in the Macro
    Browser.
  id: totrans-179
  prefs: []
  type: TYPE_NORMAL
  zh: 参数通常定义在模板的顶部，在标题下方。指定参数的顺序也决定了它们在宏浏览器中的参数部分（右侧）中显示的顺序。
- en: '[PRE1]'
  id: totrans-180
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'As you may have noticed, there are quite a few extra attributes you can use
    to describe your parameter. The more you specify, the better Confluence can help
    your users with the Macro Browser and properties editor. Let''s go over the available
    attributes:'
  id: totrans-181
  prefs: []
  type: TYPE_NORMAL
  zh: 正如您可能已经注意到的，您可以使用相当多的额外属性来描述您的参数。您指定的越多，Confluence 在宏浏览器和属性编辑器中提供的帮助就越好。我们来了解一下可用的属性：
- en: '| Attribute name | Description | Required? |'
  id: totrans-182
  prefs: []
  type: TYPE_TB
  zh: '| 属性名称 | 描述 | 是否必需？ |'
- en: '| --- | --- | --- |'
  id: totrans-183
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- | --- |'
- en: '| [unnamed first attribute] | The parameter name is the first attribute, and
    doesn''t require a name.'
  id: totrans-184
  prefs: []
  type: TYPE_NORMAL
  zh: '| [未命名的第一个属性] | 参数名是第一个属性，不需要名称。'
- en: '[PRE2]'
  id: totrans-185
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: Will define the parameter `example`. | Required |
  id: totrans-186
  prefs: []
  type: TYPE_NORMAL
  zh: 将定义参数 `example`。 | 必需 |
- en: '| `title` | The parameter title that will appear in the Macro Browser. If no
    title is specified, the parameter name is used. | Recommended |'
  id: totrans-187
  prefs: []
  type: TYPE_TB
  zh: '| `title` | 将出现在宏浏览器中的参数标题。如果未指定标题，则使用参数名称。 | 推荐 |'
- en: '| `type` | The field type of the parameters. Learn about types in the next
    pages. | Recommended |'
  id: totrans-188
  prefs: []
  type: TYPE_TB
  zh: '| `type` | 参数的字段类型。有关类型的详细信息，请参见接下来的页面。 | 推荐 |'
- en: '| `desc` | The description of the parameter shown in the Macro Browser. | Optional
    |'
  id: totrans-189
  prefs: []
  type: TYPE_TB
  zh: '| `desc` | 显示在宏浏览器中的参数描述。 | 可选 |'
- en: '| required | Specify if the parameter is required; default is **false**. |
    Optional |'
  id: totrans-190
  prefs: []
  type: TYPE_TB
  zh: '| required | 指定参数是否是必需的；默认为**false**。 | 可选 |'
- en: '| multiple | Specify if the parameters allows multiple values; default is **false**.
    | Optional |'
  id: totrans-191
  prefs: []
  type: TYPE_TB
  zh: '| multiple | 指定参数是否允许多个值；默认为**false**。 | 可选 |'
- en: '| default | The default value of the parameter. | Optional |'
  id: totrans-192
  prefs: []
  type: TYPE_TB
  zh: '| default | 参数的默认值。 | 可选 |'
- en: If you don't specify the type of the parameter, it will default to a string.
    But there are many more types available from which you can choose. Confluence
    will render the input field of your parameter based on the type you specify.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您没有指定参数的类型，它将默认设置为字符串。但还有许多其他类型供您选择。Confluence 将根据您指定的类型渲染参数的输入字段。
- en: '| Type | Description |'
  id: totrans-194
  prefs: []
  type: TYPE_TB
  zh: '| 类型 | 描述 |'
- en: '| --- | --- |'
  id: totrans-195
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `boolean` | Displays a checkbox to the user and passes the value **true**
    or **false** to the macro as a string.'
  id: totrans-196
  prefs: []
  type: TYPE_NORMAL
  zh: '| `boolean` | 向用户显示一个复选框，并将值**true**或**false**作为字符串传递给宏。'
- en: '[PRE3]'
  id: totrans-197
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: '|'
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `enum` | Offers a list of values for selection. You can specify the values
    to appear in the dropdown yourself. The variable will be passed on the to macro
    as it is, including capitalization.'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: '| `enum` | 提供可供选择的值列表。您可以自己指定要出现在下拉列表中的值。该变量将按原样传递给宏，包括大小写。'
- en: '[PRE4]'
  id: totrans-200
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: '|'
  id: totrans-201
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `string` | Shows a text field; this is the default if no other type is specified.'
  id: totrans-202
  prefs: []
  type: TYPE_NORMAL
  zh: '| `string` | 显示一个文本字段；如果没有指定其他类型，这是默认类型。'
- en: '[PRE5]'
  id: totrans-203
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: '|'
  id: totrans-204
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `confluence-content` | Shows a quick search where the user can search for
    a page or blog post in Confluence.'
  id: totrans-205
  prefs: []
  type: TYPE_NORMAL
  zh: '| `confluence-content` | 显示一个快速搜索框，用户可以在 Confluence 中搜索页面或博客文章。'
- en: '[PRE6]'
  id: totrans-206
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: '|'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `username` | Shows a quick search for users.'
  id: totrans-208
  prefs: []
  type: TYPE_NORMAL
  zh: '| `username` | 显示一个快速用户搜索框。'
- en: '[PRE7]'
  id: totrans-209
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: '|'
  id: totrans-210
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `spacekey` | Shows a list of spaces for selection; the space key is passed
    on to the macro.'
  id: totrans-211
  prefs: []
  type: TYPE_NORMAL
  zh: '| `spacekey` | 显示可供选择的空间列表；空间键将传递给宏。'
- en: '[PRE8]'
  id: totrans-212
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: '|'
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `date` | Currently threated as a normal string. Users can type a date in
    any format; be sure to check the date in your template.'
  id: totrans-214
  prefs: []
  type: TYPE_NORMAL
  zh: '| `date` | 当前被视为普通字符串。用户可以输入任何格式的日期；请确保在模板中检查日期。'
- en: '[PRE9]'
  id: totrans-215
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: '|'
  id: totrans-216
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `int` | Type is accepted, but currently treated as a normal string.'
  id: totrans-217
  prefs: []
  type: TYPE_NORMAL
  zh: '| `int` | 类型被接受，但目前作为普通字符串处理。'
- en: '[PRE10]'
  id: totrans-218
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: '|'
  id: totrans-219
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: '| `percentage` | Type is accepted, but currently treated as a normal string.'
  id: totrans-220
  prefs: []
  type: TYPE_NORMAL
  zh: '| `percentage` | 类型被接受，但目前作为普通字符串处理。'
- en: '[PRE11]'
  id: totrans-221
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: '|'
  id: totrans-222
  prefs: []
  type: TYPE_NORMAL
  zh: '|'
- en: The parameters are available in your template as, for example, `$paramtitle`
    and `$paramcolor` for parameters called title and color respectively.
  id: totrans-223
  prefs: []
  type: TYPE_NORMAL
  zh: 参数在模板中可用，例如，`$paramtitle` 和 `$paramcolor` 分别表示名为 title 和 color 的参数。
- en: 'Normally, if a parameter like `$paramtitle` is missing, it will appear as `$paramtitle`
    in the output. To output nothing when a parameter is not set, use an exclamation
    mark after the dollar sign: `$!paramtitle`.'
  id: totrans-224
  prefs: []
  type: TYPE_NORMAL
  zh: 通常，如果像 `$paramtitle` 这样的参数缺失，它将在输出中显示为 `$paramtitle`。如果参数未设置并且希望不输出任何内容，请在美元符号后使用感叹号：`$!paramtitle`。
- en: 'When your macro doesn''t have any parameters, you should use `@noparams` in
    your template. This will let Confluence know that it doesn''t need to display
    a parameter input field. If your macro doesn''t contain parameters and does not
    specify `@noparams`, the macro browser will display a free-format textbox allowing
    users to enter undefined parameters. You should use `@noparams` in your template
    as follows:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 当你的宏没有任何参数时，应在模板中使用 `@noparams`。这将告诉 Confluence 无需显示参数输入字段。如果你的宏没有参数且没有指定 `@noparams`，宏浏览器将显示一个自由格式的文本框，允许用户输入未定义的参数。你应该在模板中按如下方式使用
    `@noparams`：
- en: '[PRE12]'
  id: totrans-226
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Template code
  id: totrans-227
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 模板代码
- en: Now that we have a good descriptive header and parameter declarations for our
    macro, it is time to write to the macro template code.
  id: totrans-228
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经为宏准备了良好的描述性标题和参数声明，接下来是编写宏模板代码的时间。
- en: 'When writing your macro, the following objects are available to you to use:'
  id: totrans-229
  prefs: []
  type: TYPE_NORMAL
  zh: 在编写宏时，以下对象可以供你使用：
- en: '| Variable | Description |'
  id: totrans-230
  prefs: []
  type: TYPE_TB
  zh: '| 变量 | 描述 |'
- en: '| --- | --- |'
  id: totrans-231
  prefs: []
  type: TYPE_TB
  zh: '| --- | --- |'
- en: '| `$body` | The body of the macro, if your macro has one. |'
  id: totrans-232
  prefs: []
  type: TYPE_TB
  zh: '| `$body` | 宏的主体，如果你的宏有的话。 |'
- en: '| `$param<name>` | Named parameters as described in your macro template. |'
  id: totrans-233
  prefs: []
  type: TYPE_TB
  zh: '| `$param<name>` | 如模板中描述的命名参数。 |'
- en: '| `$renderContext` | The `PageContext` object, useful for (among other things)
    checking `$renderContext.baseUrl` or `$renderContext.spaceKey`. More information
    on the `PageContext` object is located at [http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/renderer/PageContext.html](http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/renderer/PageContext.html).
    |'
  id: totrans-234
  prefs: []
  type: TYPE_TB
  zh: '| `$renderContext` | `PageContext` 对象，主要用于（但不限于）检查 `$renderContext.baseUrl`
    或 `$renderContext.spaceKey`。有关 `PageContext` 对象的更多信息，请访问 [http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/renderer/PageContext.html](http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/renderer/PageContext.html)。
    |'
- en: '| `$space` | The space object where this page or blog post is located. This
    object can be used to retrieve information as the space name, description, and
    URL. More information is available at [http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/spaces/Space.html](http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/spaces/Space.html).
    |'
  id: totrans-235
  prefs: []
  type: TYPE_TB
  zh: '| `$space` | 包含此页面或博客文章的空间对象。此对象可用于检索空间名称、描述和 URL 等信息。更多信息请访问 [http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/spaces/Space.html](http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/spaces/Space.html)。
    |'
- en: '| `$content` | The current `ContentEntity` object in which this macro is included.
    This can for example be used to retrieve attachments, labels, or comments. More
    information is available at [http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/core/ContentEntityObject.html](http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/core/ContentEntityObject.html).
    |'
  id: totrans-236
  prefs: []
  type: TYPE_TB
  zh: '| `$content` | 当前包含此宏的`ContentEntity`对象。例如，可以用它来检索附件、标签或评论。更多信息可以在[http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/core/ContentEntityObject.html](http://docs.atlassian.com/atlassian-confluence/latest/com/atlassian/confluence/core/ContentEntityObject.html)找到。
    |'
- en: Using these objects it is possible to get access to certain extra information
    that is otherwise not available on a Confluence page; this makes user macros really
    powerful.
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 使用这些对象，可以访问某些额外的信息，这些信息在Confluence页面上通常无法获取；这使得用户宏非常强大。
- en: Including another macro
  id: totrans-238
  prefs:
  - PREF_H4
  type: TYPE_NORMAL
  zh: 包含另一个宏
- en: For our user macro we want to include a predefined version of the panel macro,
    bundled with Confluence. This means we need to find out what the Confluence-specific
    XML is that defines the panel.
  id: totrans-239
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的用户宏，我们希望包含一个预定义版本的面板宏，它与Confluence一起捆绑提供。这意味着我们需要找出定义该面板的Confluence特定XML。
- en: 'The easiest way to do this is consulting the Storage Format tool. To get the
    storage format for the panel macro:'
  id: totrans-240
  prefs: []
  type: TYPE_NORMAL
  zh: 最简单的做法是参考存储格式工具。要获取面板宏的存储格式：
- en: Create and save a new page containing the panel macro, including all the parameters
    we want to have predefined.
  id: totrans-241
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建并保存一个包含面板宏的新页面，其中包括我们希望预定义的所有参数。
- en: Select **Tools** | **View Storage format**. This option is only available for
    Confluence Administrators, and shows the XML source for the page, exactly what
    we need.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**工具** | **查看存储格式**。此选项仅对Confluence管理员可用，并显示页面的XML源，正是我们需要的内容。
- en: A Confluence macro starts with `<ac:macroac:name…`.
  id: totrans-243
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一个Confluence宏以`<ac:macroac:name…`开头。
- en: A macro parameter starts with `<ac parameter ac:name…`.
  id: totrans-244
  prefs:
  - PREF_IND
  - PREF_UL
  type: TYPE_NORMAL
  zh: 宏参数以`<ac parameter ac:name…`开头。
- en: 'For our panel, the XML we want to use in our template looks like this:'
  id: totrans-245
  prefs: []
  type: TYPE_NORMAL
  zh: 对于我们的面板，想要在模板中使用的XML如下所示：
- en: '[PRE13]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: As you might have noticed, I have already included the `title` parameter and
    `@body` in the XML. I did this by using the value in the `panel` attribute I created
    on the page, so that I know I put the variables on the right spot.
  id: totrans-247
  prefs: []
  type: TYPE_NORMAL
  zh: 正如你可能已经注意到的，我已经在XML中包含了`title`参数和`@body`。我通过使用在页面上创建的`panel`属性中的值来实现这一点，这样我就知道我将变量放在了正确的位置。
- en: If we put all the pieces of code together, we have our own teaser macro.
  id: totrans-248
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们将所有代码块组合在一起，就得到了我们自己的预告宏。
- en: '[PRE14]'
  id: totrans-249
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: If you want to read more about writing user macros, take a look at some online
    examples at [https://confluence.atlassian.com/x/V4lYDQ](https://confluence.atlassian.com/x/V4lYDQ).
  id: totrans-250
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想了解更多关于编写用户宏的信息，可以查看一些在线示例，网址：[https://confluence.atlassian.com/x/V4lYDQ](https://confluence.atlassian.com/x/V4lYDQ)。
- en: 'The end result of our user macro looks like this:'
  id: totrans-251
  prefs: []
  type: TYPE_NORMAL
  zh: 我们的用户宏的最终结果如下所示：
- en: '![Including another macro](img/9526EN_08_11.jpg)'
  id: totrans-252
  prefs: []
  type: TYPE_IMG
  zh: '![包含另一个宏](img/9526EN_08_11.jpg)'
- en: The Page Properties macro
  id: totrans-253
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 页面属性宏
- en: There is one macro I want to emphasize a bit more. The **Page Properties macro**,
    also known as the **metadata details macro**, is a little beauty.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 有一个宏我想稍微强调一下。**页面属性宏**，也被称为**元数据详情宏**，是一个小巧的美丽宏。
- en: The Page Properties macro enables you to embed data on a page and then display
    that information in a tabular form on another page. The Page Properties macro
    can be placed upon as many pages as you like, and you can use the Page Properties
    Report macro to display all the data.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 页面属性宏使您能够将数据嵌入到一个页面中，然后在另一个页面上以表格形式显示该信息。页面属性宏可以放置在任意数量的页面上，您还可以使用页面属性报告宏显示所有数据。
- en: An example, which we will implement, is customer contact information where every
    customer has a page with contact details, using the Page Properties macro. Then
    on an overview page, we will display all the customers contact information in
    a table.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: 一个示例是客户联系信息，其中每个客户都有一个包含联系信息的页面，使用页面属性宏。然后在概览页面上，我们将以表格形式展示所有客户的联系信息。
- en: 'To create customer details pages, perform the following steps:'
  id: totrans-257
  prefs: []
  type: TYPE_NORMAL
  zh: 要创建客户详情页面，请执行以下步骤：
- en: Create a `Sales & Marketing` space for this exercise, or use a test/sandbox
    space if you have one available.
  id: totrans-258
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为此练习创建一个`Sales & Marketing`空间，或者如果有可用的测试/沙盒空间，可以使用它。
- en: In the new space, create a page called `Customers Overview`.
  id: totrans-259
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新的空间中，创建一个名为`Customers Overview`的页面。
- en: In the body, add the macro Page Properties Report.
  id: totrans-260
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在正文中，添加页面属性报告宏。
- en: In the macro properties, use the label `customer-contact-details`.
  id: totrans-261
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在宏属性中，使用标签`customer-contact-details`。
- en: Click on **Save** to save the page.
  id: totrans-262
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**以保存页面。
- en: Create a new page as the child of the Customers Overview page.
  id: totrans-263
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个新的页面，作为“客户概览”页面的子页面。
- en: Use your customer name as title.
  id: totrans-264
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用客户名称作为标题。
- en: Insert the Page Properties macro.
  id: totrans-265
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 插入页面属性宏。
- en: In the body of the macro, create a table with two columns and four rows.
  id: totrans-266
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在宏的正文中，创建一个包含两列和四行的表格。
- en: 'Enter some contact details in the table:'
  id: totrans-267
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在表格中输入一些联系信息：
- en: '**Name** – `Ford Prefect`.'
  id: totrans-268
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**姓名** – `Ford Prefect`。'
- en: '**Position** – `Managing Directory`.'
  id: totrans-269
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**职位** – `管理董事`。'
- en: '**Email** – `ford.prefect@example.com`.'
  id: totrans-270
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**电子邮件** – `ford.prefect@example.com`。'
- en: '**Phone** – `317-822-2752`.'
  id: totrans-271
  prefs:
  - PREF_IND
  - PREF_IND
  type: TYPE_NORMAL
  zh: '**电话** – `317-822-2752`。'
- en: Give the page a label `customer-contact-details`.
  id: totrans-272
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 给页面添加标签`customer-contact-details`。
- en: Click on **Save** to save the page.
  id: totrans-273
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**保存**以保存页面。
- en: Repeat this step for a couple of customers. (This is a great example on where
    to use a template.)
  id: totrans-274
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对几个客户重复此步骤。（这是一个很好的模板使用示例。）
- en: 'So now we have a couple of pages with customer information, looking similar
    to the following screenshot:'
  id: totrans-275
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经有几页包含客户信息，类似于以下截图所示：
- en: '![The Page Properties macro](img/9526EN_08_08.jpg)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![页面属性宏](img/9526EN_08_08.jpg)'
- en: If we now browse back to our **Customer Overview** page we created earlier,
    we should see a table with our customers. As with all tables in Confluence, you
    can sort the table by the columns.
  id: totrans-277
  prefs: []
  type: TYPE_NORMAL
  zh: 如果我们现在返回浏览之前创建的**客户概览**页面，我们应该会看到一个包含客户信息的表格。像所有Confluence中的表格一样，你可以按列对表格进行排序。
- en: Note
  id: totrans-278
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The columns are ordered alphabetically and not as you specified in the Page
    Properties macro. If you want to reorder the columns, adding a number to them
    is a good trick.
  id: totrans-279
  prefs: []
  type: TYPE_NORMAL
  zh: 列是按字母顺序排序的，而不是按你在页面属性宏中指定的顺序。如果你想重新排序列，给列添加数字是一个很好的方法。
- en: '![The Page Properties macro](img/9526EN_08_09.jpg)'
  id: totrans-280
  prefs: []
  type: TYPE_IMG
  zh: '![页面属性宏](img/9526EN_08_09.jpg)'
- en: Note
  id: totrans-281
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: The table generated by the Page Properties Report macro can also be used as
    input for other macros like the Charting macro.
  id: totrans-282
  prefs: []
  type: TYPE_NORMAL
  zh: 页面属性报告宏生成的表格也可以作为其他宏的输入，比如图表宏。
- en: Shortcut links
  id: totrans-283
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 快捷链接
- en: Shortcut links provide a quick way of linking to resources that you use often,
    for example, a link to a Google search. Shortcut links need to be configured by
    a Confluence Administrator before users can use them.
  id: totrans-284
  prefs: []
  type: TYPE_NORMAL
  zh: 快捷链接提供了一种快速链接到经常使用的资源的方法，例如链接到 Google 搜索。快捷链接需要由 Confluence 管理员进行配置，用户才能使用它们。
- en: Creating a shortcut link
  id: totrans-285
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 创建快捷链接
- en: If you search for a book on the Packt Publishing website, the URL will look
    like [http://www.packtpub.com/books?keys=](http://www.packtpub.com/books?keys=).
    If you create a shortcut for this search with the key `packt`, every time a user
    needs to visit the website they can just type `[terms@packt]` and Confluence will
    link to [http://www.packtpub.com/books?keys=terms](http://www.packtpub.com/books?keys=terms).
  id: totrans-286
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在 Packt Publishing 网站上搜索书籍，URL 会是[http://www.packtpub.com/books?keys=](http://www.packtpub.com/books?keys=)。如果你为这个搜索创建一个快捷方式并使用`packt`作为关键字，每当用户需要访问该网站时，只需输入`[terms@packt]`，Confluence
    会链接到[http://www.packtpub.com/books?keys=terms](http://www.packtpub.com/books?keys=terms)。
- en: Browse to the Administration Console (**Administration** | **Confluence Admin**).
  id: totrans-287
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 浏览到管理控制台（**管理** | **Confluence 管理**）。
- en: Select **Shortcut Link** from the left-hand side menu.
  id: totrans-288
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从左侧菜单中选择**快捷链接**。
- en: Enter a key for you shortcut value. In our case, we will use `packt`.
  id: totrans-289
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入快捷链接值的键。在我们的例子中，我们将使用`packt`。
- en: 'Enter the **Expanded Value**: `http://www.packtpub.com/books?keys=`. You can
    use `%s` in the URL to specify where the term needs to be inserted. If there is
    no `%s` in the URL, the term is put at the end.'
  id: totrans-290
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入**扩展值**：`http://www.packtpub.com/books?keys=`。你可以在 URL 中使用`%s`来指定术语插入的位置。如果
    URL 中没有`%s`，则术语会被放置在末尾。
- en: Enter a **Default Alias**. This is the text of the link that will be displayed
    in Confluence. `%s` can also be used within the text. If no value is entered,
    Confluence will use `term@key` as the link text.
  id: totrans-291
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入**默认别名**。这是在 Confluence 中显示的链接文本。文本中也可以使用`%s`。如果没有输入值，Confluence 将使用`term@key`作为链接文本。
- en: Click on **Submit**.![Creating a shortcut link](img/9526EN_08_12.jpg)
  id: totrans-292
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**提交**。![创建快捷链接](img/9526EN_08_12.jpg)
- en: Using shortcut links
  id: totrans-293
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 使用快捷链接
- en: Your users can use the shortcut links you created earlier just like any other
    link.
  id: totrans-294
  prefs: []
  type: TYPE_NORMAL
  zh: 你的用户可以像使用其他链接一样使用你之前创建的快捷链接。
- en: Open a page in the edit mode and place your cursor at the location where you
    want to add the link.
  id: totrans-295
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开页面的编辑模式，并将光标放在你想要添加链接的位置。
- en: Click on **Link** in the toolbar, or press *Ctrl* + *K*.
  id: totrans-296
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在工具栏中点击**链接**，或者按*Ctrl* + *K*。
- en: Click on **Advanced** and enter the shortcut link `confluence@packt` into the
    link textbox.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**高级**，并将快捷链接 `confluence@packt` 输入到链接文本框中。
- en: Enter a link text that will be displayed.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入将要显示的链接文本。
- en: Click on **Insert**.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**插入**。
- en: You can also use the *[* keyboard shortcut and type the link, enclosed with
    `'` `'`; for example `'[confluence@packt]'`.
  id: totrans-300
  prefs: []
  type: TYPE_NORMAL
  zh: 你还可以使用*[* 键盘快捷键并输入链接，用`'` `''`将其括起来；例如`'[confluence@packt]'`。
- en: Note
  id: totrans-301
  prefs:
  - PREF_H3
  type: TYPE_NORMAL
  zh: 注意
- en: Users need to be told which shortcuts are available. The best way of doing this
    is to create a separate page listing the shortcuts. Confluence doesn't provide
    a way to list them automatically.
  id: totrans-302
  prefs: []
  type: TYPE_NORMAL
  zh: 用户需要知道哪些快捷键是可用的。做这件事的最好方法是创建一个单独的页面，列出所有快捷键。Confluence 不提供自动列出这些快捷键的方法。
- en: Summary
  id: totrans-303
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: If you want to create uniformity or just want to give your users a head start
    creating content, templates are there for you. Templates are preformatted pages
    that can be used when you add a new page. We have learned how to create those
    templates and that templates can be added on a space or global level.
  id: totrans-304
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想创建统一性，或者只是希望为用户提供一个快速入门的内容创建方式，模板就能帮到你。模板是预先格式化的页面，可以在你添加新页面时使用。我们已经学习了如何创建这些模板，并且这些模板可以在空间级别或全局级别添加。
- en: Another mechanism to automate things you find yourself doing often is user macros.
    User macros allow you to code some functionality or formatting, which your users
    can reuse. User macros can easily be added via the Confluence user interface,
    but they do require a bit of knowledge about HTML and XML. With the example in
    this chapter, you should have a solid base to start building your own macros.
  id: totrans-305
  prefs: []
  type: TYPE_NORMAL
  zh: 另一个自动化你经常做的事情的机制是用户宏。用户宏允许你编写一些功能或格式，供你的用户重复使用。用户宏可以通过 Confluence 用户界面轻松添加，但它们确实需要一些
    HTML 和 XML 的知识。通过本章中的示例，你应该能够有一个坚实的基础，开始构建自己的宏。
- en: That macros can be really powerful is demonstrated by the Page Properties macro
    that you can use to get metadata from pages and show this in an overview table.
  id: totrans-306
  prefs: []
  type: TYPE_NORMAL
  zh: 宏的强大功能通过页面属性宏得到了证明，您可以使用它从页面中提取元数据，并在概览表中显示这些信息。
- en: There are many add-ons available that add templates, macros, and other functionalities
    to Confluence. These add-ons can be installed via the Atlassian Marketplace, which
    we will learn about in the next chapter.
  id: totrans-307
  prefs: []
  type: TYPE_NORMAL
  zh: 有许多附加组件可用，它们向 Confluence 添加模板、宏和其他功能。这些附加组件可以通过 Atlassian 市场安装，接下来的章节我们将学习如何使用它。
