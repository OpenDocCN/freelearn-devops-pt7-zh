["```\n$ MYIP=$(curl https://api.ipify.org 2>/dev/null)\n$ VMPASSWORD=$(openssl rand -base64 24)\n$ echo $VMPASSWORD > VMPASSWORD\n```", "```\n$ az login\n```", "```\n$ az group create \\\n    --name rg-ansible-windows-server-uks \\\n    --location uksouth\n```", "```\n$ az network vnet create \\\n    --resource-group rg-ansible-windows-server-uks \\\n    --name vnet-ansible-windows-server-uks \\\n    --address-prefix 10.0.0.0/24 \\\n    --subnet-name sub-vms \\\n    --subnet-prefix 10.0.0.0/27\n```", "```\n$ az network nsg create \\\n    --resource-group rg-ansible-windows-server-uks \\\n    --name nsg-ansible-windows-server-uks\n```", "```\n$ az network nsg rule create \\\n   --resource-group rg-ansible-windows-server-uks \\\n   --nsg-name nsg-ansible-windows-server-uks \\\n   --name allowHTTP \\\n   --protocol tcp \\\n   --priority 100 \\\n   --destination-port-range 80 \\\n   --access allow\n```", "```\n$ az network nsg rule create \\\n    --resource-group rg-ansible-windows-server-uks \\\n    --nsg-name nsg-ansible-windows-server-uks \\\n    --name allowRDP \\\n    --protocol tcp \\\n    --priority 1000 \\\n    --destination-port-range 3389 \\\n    --source-address-prefix $MYIP/32 \\\n    --access allow\n```", "```\n$ az network nsg rule create \\\n    --resource-group rg-ansible-windows-server-uks \\\n    --nsg-name nsg-ansible-windows-server-uks \\\n    --name allowWinRM \\\n    --protocol tcp \\\n    --priority 1050 \\\n    --destination-port-range 5985-5986 \\\n    --source-address-prefix $MYIP/32 \\\n    --access allow\n```", "```\n$ az vm create \\\n     --resource-group rg-ansible-windows-server-uks \\\n     --name vm-ansible-windows-server-uks \\\n     --computer-name ansibleWindows \\\n     --image Win2022Datacenter \\\n     --admin-username azureuser \\\n     --admin-password $VMPASSWORD \\\n     --vnet-name vnet-ansible-windows-server-uks \\\n     --subnet sub-vms \\\n     --nsg nsg-ansible-windows-server-uks \\\n     --public-ip-sku Standard \\\n     --public-ip-address-allocation static\n```", "```\n$ az vm extension set \\\n    --resource-group rg-ansible-windows-server-uks \\\n    --vm-name vm-ansible-windows-server-uks \\\n    --name CustomScriptExtension \\\n    --publisher Microsoft.Compute \\\n    --version 1.10 \\\n    --settings \"{'fileUrls': ['https://raw.githubusercontent.com/PacktPublishing/Learn-Ansible-Second-Edition/main/Scripts/ConfigureRemotingForAnsible.ps1'],'commandToExecute': 'powershell -ExecutionPolicy Unrestricted -File ConfigureRemotingForAnsible.ps1'}\"\n```", "```\n$ powershell -ExecutionPolicy Unrestricted -File ConfigureRemotingForAnsible.ps1\n```", "```\n$ sudo -H pip install pywinrm\n```", "```\n$ pip install pywinrm\n```", "```\nWindowsServer ansible_host=123.123.123.123.nip.io\n[ansible_hosts]\nWindowsServer\n[ansible_hosts:vars]\nansible_connection=winrm\nansible_user=\"azureuser\"\nansible_password=\"{{ lookup('ansible.builtin.file', 'VMPASSWORD') }}\"\nansible_winrm_server_cert_validation=ignore\n```", "```\n$ echo $VMPASSWORD > VMPASSWORD\n```", "```\n$ ansible WindowsServer -i hosts -m ansible.builtin.ping\n```", "```\n[WARNING]: No python interpreters found for host WindowsServer (tried ['python3.11', 'python3.10',\n'python3.9', 'python3.8', 'python3.7', 'python3.6', 'python3.5', '/usr/bin/python3',\n'/usr/libexec/platform-python', 'python2.7', '/usr/bin/python', 'python'])\n```", "```\n$ ansible WindowsServer -i hosts -m ansible.windows.win_ping\n```", "```\nWindowsServer | SUCCESS => {\n    \"changed\": false,\n    \"ping\": \"pong\"\n}\n```", "```\n$ ansible WindowsServer -i hosts -m ansible.builtin.setup\n```", "```\ndocument_root: 'C:\\inetpub\\wwwroot\\'\nhtml_file: \"ansible.html\"\nhtml_heading: \"Success !!!\"\nhtml_body: |\n  This HTML page has been deployed using Ansible to a <b>{{ ansible_distribution }}</b> host.<br><br>\n  The weboot is <b>{{ document_root }}</b> this file is called <b>{{ html_file }}</b>.<br>\n```", "```\n- name: \"Enable IIS\"\n  ansible.windows.win_feature:\n    name:\n      - \"Web-Server\"\n      - \"Web-Common-Http\"\n    state: \"present\"\n```", "```\n- name: \"Create an html file from a template\"\n  ansible.windows.win_template:\n    src: \"index.html.j2\"\n    dest: \"{{ document_root }}{{ html_file }}\"\n```", "```\n<!--{{ ansible_managed }}-->\n<title>{{ html_heading }}</title>\n<article>\n    <h1>{{ html_heading }}</h1>\n    <div>\n        <p>{{ html_body }}</p>\n    </div>\n</article>\n```", "```\naspx_document_root: 'C:\\inetpub\\wwwroot\\ansible\\'\naspx_file: \"default.aspx\"\naspx_heading: \"Success !!!\"\naspx_body: |\n  This HTML page has been deployed using Ansible to a <b>{{ ansible_distribution }}</b> host.<br><br>\n  The weboot is <b>{{ aspx_document_root }}</b> this file is called <b>{{ aspx_file }}</b>.<br><br>\n  The output below is from ASP.NET<br><br>\n  Hello from <%= Environment.MachineName %> at <%= DateTime.UtcNow %><br><br>\n```", "```\ndocument_root: 'C:\\inetpub\\wwwroot\\'\naspx_document_root: 'C:\\inetpub\\wwwroot\\ansible\\'\n```", "```\nwordpress_system:\n    home: \"/var/www/wordpress\"\n```", "```\ndocument_root: \"C:\\\\inetpub\\\\wwwroot\\\\\"\naspx_document_root: \"C:\\\\inetpub\\\\wwwroot\\\\ansible\\\\\"\n```", "```\n- name: \"Enable .NET\"\n  ansible.windows.win_feature:\n    name:\n      - \"Net-Framework-Features\"\n      - \"Web-Asp-Net45\"\n      - \"Web-Net-Ext45\"\n    state: \"present\"\n  notify: \"Restart IIS\"\n```", "```\n- name: \"Restart IIS\"\n  ansible.windows.win_service:\n    name: \"w3svc\"\n    state: \"restarted\"\n```", "```\n- name: \"Create the folder for our asp.net app\"\n  ansible.windows.win_file:\n    path: \"{{ aspx_document_root }}\"\n    state: \"directory\"\n```", "```\n- name: \"Create an aspx file from a template\"\n  ansible.windows.win_template:\n    src: \"default.aspx.j2\"\n    dest: \"{{ aspx_document_root }}{{ aspx_file }}\"\n```", "```\n- name: \"Ensure the default web application exists\"\n  community.windows.win_iis_webapplication:\n    name: \"Default\"\n    state: \"present\"\n    physical_path: \"{{ aspx_document_root }}\"\n    application_pool: \"DefaultAppPool\"\n    site: \"Default Web Site\"\n```", "```\nansible:\n  username: \"ansible\"\n  password: \"{{ lookup('password', 'group_vars/generated_password chars=ascii_letters,digits length=30') }}\"\n  groups:\n    - \"Users\"\n    - \"Administrators\"\n```", "```\n- name: \"Ensure that the ansible created users are present\"\n  ansible.windows.win_user:\n    name: \"{{ ansible.username }}\"\n    fullname: \"{{ ansible.username | capitalize }}\"\n    password: \"{{ ansible.password }}\"\n    state: \"present\"\n    groups: \"{{ ansible.groups }}\"\n```", "```\napps:\n  - \"notepadplusplus.install\"\n  - \"putty.install\"\n  - \"googlechrome\"\n```", "```\n- name: \"Install software using chocolatey\"\n  chocolatey.chocolatey.win_chocolatey:\n    name: \"{{ apps }}\"\n    state: \"present\"\n```", "```\n- name: \"Print out information on the host\"\n  ansible.builtin.debug:\n    msg: \"You can connect to '{{ ansible_host }}' using the username of '{{ ansible.username }}' with a password of '{{ ansible.password }}'.\"\n```", "```\n---\n- name: \"Install IIS, .NET, create user, install chocolatey and display info\"\n  hosts: \"ansible_hosts\"\n  gather_facts: true\n  vars_files:\n    - \"group_vars/common.yml\"\n  roles:\n    - \"iis\"\n    - \"dotnet\"\n    - \"user\"\n    - \"choco\"\n    - \"info\"\n```", "```\n$ ansible-playbook -i hosts site.yml\n```", "```\n$ az group delete \\\n    --name rg-ansible-windows-server-uks\n```"]