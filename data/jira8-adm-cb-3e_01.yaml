- en: Jira Server Administration
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: Jira 服务器管理
- en: Atlassian Jira is a popular issue tracking system used by many companies across
    the Globe. One of its strengths, unlike most other enterprise software, is that
    it does not take days or weeks to install and implement, and is very simple to
    upgrade and maintain.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: Atlassian Jira 是一个广泛使用的缺陷跟踪系统，全球许多公司都在使用它。与大多数企业软件不同，它的优势之一是安装和实现不需要几天或几周，而且升级和维护非常简单。
- en: We will assume that you already know how to install a brand-new Jira system.
    So, we will explore common administration tasks, such as upgrading and migrating
    your Jira, and we'll look at different options, ranging from using the new automated
    upgrade utility provided by Atlassian to doing everything from scratch. We will
    also look at some other neat tricks for you as an administrator, such as resetting
    the admin password to get you out of sticky situations.
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 我们假设你已经知道如何安装全新的 Jira 系统。因此，我们将探讨常见的管理任务，如升级和迁移 Jira，并且我们将看看不同的选项，包括使用 Atlassian
    提供的全新自动化升级工具，或者从头开始进行所有操作。我们还会向你展示一些其他有用的技巧，比如重置管理员密码，帮助你解决棘手问题。
- en: Since Jira is now a family of products, including Jira Core (which is the old
    Jira Classic before Jira 7), Jira Software (which is Jira Core plus agile capabilities),
    and Jira Service Desk (which is Jira Core plus the old Jira Service Desk add-on),
    recipes in this book will use the term Jira to refer to the most popular of the
    three, Jira Software.
  id: totrans-3
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Jira 现在是一个产品系列，包括 Jira Core（即 Jira 7 之前的旧版 Jira Classic）、Jira Software（即
    Jira Core 加上敏捷功能）和 Jira Service Desk（即 Jira Core 加上旧版 Jira Service Desk 插件），本书中的配方将使用
    "Jira" 这一术语来指代三者中最流行的 Jira Software。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-4
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，我们将讨论以下主题：
- en: Installing Jira for production use
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 安装 Jira 用于生产环境
- en: Upgrading Jira with an installer
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 使用安装程序升级 Jira
- en: Upgrading Jira manually
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 手动升级 Jira
- en: Migrating Jira to another environment
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 将 Jira 迁移到另一个环境
- en: Setting up the context path for Jira
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 Jira 的上下文路径
- en: Setting up SSL
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 设置 SSL
- en: Installing SSL certificates from other applications
  id: totrans-11
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从其他应用程序安装 SSL 证书
- en: Resetting the Jira administrator password
  id: totrans-12
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 重置 Jira 管理员密码
- en: Importing data from CSV
  id: totrans-13
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 CSV 导入数据
- en: Copying configurations between Jira instances
  id: totrans-14
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在 Jira 实例之间复制配置
- en: Installing Jira for production use
  id: totrans-15
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装 Jira 用于生产环境
- en: In this recipe, we will look at how to install and set up Jira in a production
    environment. This includes setting up a dedicated user to run Jira under and using
    an external database.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 在本示例中，我们将探讨如何在生产环境中安装和设置 Jira。这包括设置一个专用用户来运行 Jira，并使用外部数据库。
- en: We will use the archive distribution since the steps are consistent across both
    the Windows and Linux platforms. This will also provide you with an insight into
    the exact steps required to get a Jira instance deployed and running; these would
    otherwise be hidden by an automated installer. This will provide you with the
    information needed for subsequent maintenance and further configurations.
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将使用归档分发版，因为这些步骤在 Windows 和 Linux 平台上是一致的。这也会让你了解部署和运行 Jira 实例所需的确切步骤；这些步骤通常会被自动安装程序隐藏。这将为你提供后续维护和进一步配置所需的信息。
- en: Getting ready
  id: totrans-18
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following things need to be checked before you begin with this recipe:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始之前需要检查以下事项：
- en: Download the latest Jira archive distribution from [https://www.atlassian.com/software/jira/download](https://www.atlassian.com/software/jira/download)
    and select a package based on your server, such as Linux or Windows. For this
    recipe, we will be using the TAR.GZ Archive.
  id: totrans-20
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从 [https://www.atlassian.com/software/jira/download](https://www.atlassian.com/software/jira/download)
    下载最新的 Jira 归档分发版，并根据你的服务器选择合适的包，例如 Linux 或 Windows。对于本示例，我们将使用 TAR.GZ 归档文件。
- en: Make sure your server environment meets Jira's requirements by visiting [https://confluence.atlassian.com/adminjiraserver/supported-platforms-938846830.html](https://confluence.atlassian.com/adminjiraserver/supported-platforms-938846830.html).
  id: totrans-21
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你的服务器环境满足 Jira 的要求，访问 [https://confluence.atlassian.com/adminjiraserver/supported-platforms-938846830.html](https://confluence.atlassian.com/adminjiraserver/supported-platforms-938846830.html)
    查看详细信息。
- en: Install Java on the system. At the time of writing, Jira 8 requires Java 8 (either
    Oracle JDK or OpenJDK). You can download Java from [https://www.oracle.com/technetwork/java/javase/downloads/index.html](https://www.oracle.com/technetwork/java/javase/downloads/index.html).
  id: totrans-22
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 在系统上安装 Java。撰写本文时，Jira 8 需要 Java 8（无论是 Oracle JDK 还是 OpenJDK）。你可以从 [https://www.oracle.com/technetwork/java/javase/downloads/index.html](https://www.oracle.com/technetwork/java/javase/downloads/index.html)
    下载 Java。
- en: Make sure that the `JAVA_HOME` or `JRE_HOME` environment variable is configured.
  id: totrans-23
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保已配置 `JAVA_HOME` 或 `JRE_HOME` 环境变量。
- en: Have a database system available, either on the server hosting Jira, or a different
    server accessible over the network. For this recipe, we will use **MySQL**. If
    you are using a different database, change the commands and queries accordingly.
  id: totrans-24
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保有一个可用的数据库系统，可以在托管 Jira 的服务器上，也可以在通过网络访问的其他服务器上。本示例中，我们将使用 **MySQL**。如果你使用的是其他数据库，请相应地更改命令和查询。
- en: Download the necessary database driver. For MySQL, you can download it from [https://dev.mysql.com/downloads/connector/j](https://dev.mysql.com/downloads/connector/j).
  id: totrans-25
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载必要的数据库驱动程序。对于 MySQL，可以从 [https://dev.mysql.com/downloads/connector/j](https://dev.mysql.com/downloads/connector/j)
    下载。
- en: How to do it...
  id: totrans-26
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何执行此操作...
- en: 'We first need to create an empty MySQL database for Jira:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先需要为 Jira 创建一个空的 MySQL 数据库：
- en: Open up a new Command Prompt on the MySQL server.
  id: totrans-28
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 MySQL 服务器上打开一个新的命令提示符。
- en: 'Run the following command (you can also use another user instead of `root`
    as long as the user has permission to create new users and databases):'
  id: totrans-29
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 运行以下命令（你也可以使用其他用户替代 `root`，只要该用户具有创建新用户和数据库的权限）：
- en: '[PRE0]'
  id: totrans-30
  prefs: []
  type: TYPE_PRE
  zh: '[PRE0]'
- en: Enter the password for the user when prompted.
  id: totrans-31
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在提示时输入用户的密码。
- en: 'Create a new database for Jira by running the following command:'
  id: totrans-32
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行以下命令为 Jira 创建一个新数据库：
- en: '[PRE1]'
  id: totrans-33
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'Create a new user for Jira in the database and grant the user access to the `jiradb`
    database we just created using the following command:'
  id: totrans-34
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在数据库中为 Jira 创建一个新用户，并使用以下命令授予该用户对我们刚创建的 `jiradb` 数据库的访问权限：
- en: '[PRE2]'
  id: totrans-35
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: In the previous five steps, we created a new database named `jiradb` and a new
    database user named `jirauser`. We will use these details later to connect Jira
    with MySQL. The next step is to install Jira.
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前五个步骤中，我们创建了一个名为 `jiradb` 的新数据库和一个名为 `jirauser` 的新数据库用户。稍后我们将使用这些信息将 Jira 与
    MySQL 连接。下一步是安装 Jira。
- en: 'Create a dedicated user account to run Jira under. If you''re using Linux,
    run the following command as root or with `sudo`:'
  id: totrans-37
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 创建一个专用用户账户来运行 Jira。如果你使用的是 Linux，请作为 root 用户或使用 `sudo` 运行以下命令：
- en: '[PRE3]'
  id: totrans-38
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: It is good practice to reduce security risks by locking down the user account
    so that it does not have login permissions.
  id: totrans-39
  prefs: []
  type: TYPE_NORMAL
  zh: 为了减少安全风险，最好将用户账户锁定，确保其没有登录权限。
- en: Create a new directory on the filesystem where Jira will be installed. This
    directory will be referred to as `JIRA_INSTALL`.
  id: totrans-40
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件系统中创建一个新目录，将在此目录下安装 Jira。该目录将被称为 `JIRA_INSTALL`。
- en: Create another directory on the filesystem. This will be used for Jira to store
    its attachments, search indexes, application data, and other information. You
    can create this directory on a different drive with more hard disk capacity, such
    as a network drive (this could slow down performance). This directory will be
    referred to as `JIRA_HOME`.
  id: totrans-41
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件系统中创建另一个目录。此目录将用于 Jira 存储其附件、搜索索引、应用程序数据和其他信息。你可以将此目录创建在具有更大硬盘容量的其他驱动器上，例如网络驱动器（这可能会导致性能下降）。此目录将被称为
    `JIRA_HOME`。
- en: It is good practice to keep the `JIRA_INSTALL` and `JIRA_HOME` directories separate;
    that is, the `JIRA_HOME` directory should not be a subdirectory inside `JIRA_INSTALL`.
    This will make future upgrading and maintenance easier.
  id: totrans-42
  prefs: []
  type: TYPE_NORMAL
  zh: 最好将 `JIRA_INSTALL` 和 `JIRA_HOME` 目录分开；即 `JIRA_HOME` 目录不应是 `JIRA_INSTALL` 目录的子目录。这样将使未来的升级和维护更加方便。
- en: Unzip the Jira archive file in the `JIRA_INSTALL` directory.
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在 `JIRA_INSTALL` 目录中解压 Jira 压缩文件。
- en: Change both the `JIRA_INSTALL` and `JIRA_HOME` directories' owner to the new
    Jira user.
  id: totrans-44
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将 `JIRA_INSTALL` 和 `JIRA_HOME` 目录的所有权更改为新创建的 Jira 用户。
- en: Open the `JIRA_INSTALL/atlassian-jira/WEB-INF/classes/jira-application.properties`
    file in a text editor.
  id: totrans-45
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文本编辑器中打开 `JIRA_INSTALL/atlassian-jira/WEB-INF/classes/jira-application.properties`
    文件。
- en: Locate the `jira.home=` line in this file.
  id: totrans-46
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在此文件中找到 `jira.home=` 这一行。
- en: 'Copy and paste this in the full path to the `JIRA_HOME` directory and remove
    the `#` symbol if present. Make sure you use the forward slash (`/`). The following
    line shows how it looks on a Linux system:'
  id: totrans-47
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制并粘贴完整路径到 `JIRA_HOME` 目录，并在有 `#` 符号时将其删除。确保使用正斜杠（`/`）。以下行展示了在 Linux 系统上的样子：
- en: '[PRE4]'
  id: totrans-48
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: Windows uses the backward slash (`\`) in the file path. You should still use
    the forward slash (`/`) while specifying the `jira.home` directory.
  id: totrans-49
  prefs: []
  type: TYPE_NORMAL
  zh: Windows 使用反斜杠（`\`）作为文件路径。尽管如此，在指定 `jira.home` 目录时，仍然应该使用正斜杠（`/`）。
- en: Copy the database driver JAR file (obtained from the *Getting ready *section)
    to the `JIRA_INSTALL/lib` directory.
  id: totrans-50
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将数据库驱动程序 JAR 文件（从 *准备工作* 部分获得）复制到 `JIRA_INSTALL/lib` 目录。
- en: Start up Jira by running the `start-jira.sh` (for Linux) or `start-jira.bat` (for
    Windows) script from the `JIRA_INSTALL/bin` directory as the Jira user. You should
    see the output, `Tomcat`, started in your console; this means that Jira is up
    and running.
  id: totrans-51
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过在`JIRA_INSTALL/bin`目录下以Jira用户身份运行`start-jira.sh`（适用于Linux）或`start-jira.bat`（适用于Windows）脚本来启动Jira。您应该能在控制台看到`Tomcat`的输出，这意味着Jira已启动并运行。
- en: Jira comes with a setup wizard that will help guide us through the final phase
    of the installation.
  id: totrans-52
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: Jira带有一个安装向导，可以帮助我们完成安装的最后阶段。
- en: Open up a browser and go to `http://localhost:8080` (replace localhost with
    the actual server name). By default, Jira runs on port `8080`. You can change
    this by changing the connector port value in the `JIRA_INSTALL/conf/server.xml` file.
  id: totrans-53
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开浏览器并访问`http://localhost:8080`（将localhost替换为实际的服务器名称）。默认情况下，Jira运行在端口`8080`上。您可以通过更改`JIRA_INSTALL/conf/server.xml`文件中的连接器端口值来更改此端口。
- en: 'The first step in setup is to select how you want Jira to be set up. Select
    the **I''ll set it up myself **option and click on the **Next** button:'
  id: totrans-54
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置的第一步是选择如何设置Jira。选择**我自己设置**选项，然后点击**下一步**按钮：
- en: '![](img/985bb420-3288-4004-aeee-320aa629a849.png)'
  id: totrans-55
  prefs: []
  type: TYPE_IMG
  zh: '![](img/985bb420-3288-4004-aeee-320aa629a849.png)'
- en: The second step is to set up database information. Select the **My Own Database**
    **(recommended for production environments)** option.
  id: totrans-56
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 第二步是设置数据库信息。选择**我的数据库**（**推荐用于生产环境**）选项。
- en: Select a value for the **Database Type **option. For this recipe, select the MySQL
    5.7+ option.
  id: totrans-57
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**数据库类型**选项的值。对于本教程，选择MySQL 5.7+选项。
- en: 'Enter the details for our new `jiradb` database:'
  id: totrans-58
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入新建的`jiradb`数据库的详细信息：
- en: '![](img/23e5dff7-5076-4a7e-90e2-4b06169eb3f8.png)'
  id: totrans-59
  prefs: []
  type: TYPE_IMG
  zh: '![](img/23e5dff7-5076-4a7e-90e2-4b06169eb3f8.png)'
- en: Click on Test Connectionto check whether Jira is able to connect to the database.
  id: totrans-60
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**测试连接**，检查Jira是否能够连接到数据库。
- en: Click on the Next button to proceed if the database connection test is successful
    and move to the next step of the wizard.
  id: totrans-61
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果数据库连接测试成功，点击**下一步**按钮继续，进入向导的下一步。
- en: Enter the Application Titlevalue for this Jira instance.
  id: totrans-62
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入此Jira实例的应用程序标题值。
- en: Select **Public **if you would like to let people sign up for accounts, or Private if
    you want only administrators to create accounts. Most organizations that use Jira
    to track internal projects will require **Private** mode.
  id: totrans-63
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您希望用户能够注册帐户，选择**公共**；如果您只希望管理员创建帐户，选择**私有**。大多数使用Jira来跟踪内部项目的组织将需要**私有**模式。
- en: Set the Base URLoption. The base URL is the one that users will use to access Jira.
    Usually, this should be a fully qualified domain name or the hostname—that is,
    not localhost or an IP address.
  id: totrans-64
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 设置**基础URL**选项。基础URL是用户用来访问Jira的网址。通常，这应该是一个完全合格的域名或主机名——即不能是localhost或IP地址。
- en: 'Click on **Next **to go to the third step of the wizard, as shown in the following
    screenshot:'
  id: totrans-65
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**，进入向导的第三步，如下图所示：
- en: '![](img/169ce61b-5ebe-4a86-bd13-fd7dea52c814.png)'
  id: totrans-66
  prefs: []
  type: TYPE_IMG
  zh: '![](img/169ce61b-5ebe-4a86-bd13-fd7dea52c814.png)'
- en: Enter your Jira license key if you have one. If you do not have a license key,
    you can generate a temporary trial license by clicking the G**enerate a Jira trial
    license link **and following the instructions.
  id: totrans-67
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果您有Jira许可密钥，请输入。如果没有许可密钥，您可以通过点击**生成Jira试用许可链接**并按照指示生成临时试用许可。
- en: 'Click on **Next **to go to the fourth step in the wizard, as shown in the following
    screenshot:'
  id: totrans-68
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**，进入向导的第四步，如下图所示：
- en: '![](img/3e47921a-7863-4f6b-92c1-6f2a3e1c69f5.png)'
  id: totrans-69
  prefs: []
  type: TYPE_IMG
  zh: '![](img/3e47921a-7863-4f6b-92c1-6f2a3e1c69f5.png)'
- en: Enter the details for the initial administrator account. The user account will
    have access to all the configuration options in Jira, so make sure you do not
    lose its login credentials.
  id: totrans-70
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入初始管理员帐户的详细信息。该用户帐户将可以访问Jira中的所有配置选项，因此请确保不要丢失其登录凭据。
- en: 'Click on **Next **to go to the fifth and final step of the wizard, as shown
    in the following screenshot:'
  id: totrans-71
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**下一步**，进入向导的第五步和最后一步，如下图所示：
- en: '![](img/52788c09-482f-4654-b5e8-a9454cc2a3b6.png)'
  id: totrans-72
  prefs: []
  type: TYPE_IMG
  zh: '![](img/52788c09-482f-4654-b5e8-a9454cc2a3b6.png)'
- en: Choose whether you want to set up an outgoing SMTP server Now or Later. If you
    do not have an SMTP server ready right now, you can always come back and configure
    it later.
  id: totrans-73
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择是否要现在或稍后设置外发SMTP服务器。如果您现在没有准备好SMTP服务器，可以随时回来稍后配置。
- en: Click on **Finish **to complete the setup process.
  id: totrans-74
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**完成**以完成设置过程。
- en: 'You will see the following Welcome! screen:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 您将看到以下欢迎屏幕：
- en: '![](img/0a58f177-0060-4211-99eb-818dfa437fd3.png)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0a58f177-0060-4211-99eb-818dfa437fd3.png)'
- en: This ends the general configuration part of the setup process. Your Jira system
    is up and running. Next, Jira will walk you through its onboarding process as
    a first-time user. You will be asked to select the default language to use, upload
    a user avatar, and create your very first project.
  id: totrans-77
  prefs: []
  type: TYPE_NORMAL
  zh: 这部分是设置过程的通用配置部分。您的 Jira 系统已经启动并运行。接下来，Jira 将引导您完成首次使用的入门过程。您将被要求选择使用的默认语言、上传用户头像并创建您的第一个项目。
- en: There's more...
  id: totrans-78
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: By default, Jira is set to use a maximum of 768 MB of memory. For a production
    deployment, you might need to increase the amount of memory allocated to Jira.
    You can increase this by opening up the `setenv.sh` (on Linux) or `setenv.bat` (on
    Windows) files in the `JIRA_INSTALL/bin` directory and changing the value of the
    `JVM_MAXIMUM_MEMORY` parameter.
  id: totrans-79
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Jira 设置为使用最多 768 MB 的内存。对于生产部署，您可能需要增加分配给 Jira 的内存量。您可以通过打开 `JIRA_INSTALL/bin`
    目录中的 `setenv.sh`（Linux）或 `setenv.bat`（Windows）文件并更改 `JVM_MAXIMUM_MEMORY` 参数的值来增加内存。
- en: For example, if we want to set the maximum memory to 2 GB, we will change it
    to `JVM_MAXIMUM_MEMORY="2048m"`. You will need to restart Jira after performing
    this change. For production uses, it is recommended that you allocate at least
    4 GB (4096 MB) of memory to the Jira JVM. Make sure you have sufficient physical
    memory available on your server first.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 例如，如果我们想将最大内存设置为 2 GB，我们将其更改为 `JVM_MAXIMUM_MEMORY="2048m"`。完成此更改后，您需要重新启动 Jira。对于生产环境，建议您为
    Jira JVM 分配至少 4 GB（4096 MB）的内存。首先确保您的服务器上有足够的物理内存。
- en: If you are using LDAP for user management in your organization, refer to the *Integrating
    with LDAP for authentication only* recipe in [Chapter 4](a872df29-8ee1-4a43-a1be-ba30c2904ec3.xhtml), *User
    Management*.
  id: totrans-81
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您在组织中使用 LDAP 进行用户管理，请参考 [第 4 章](a872df29-8ee1-4a43-a1be-ba30c2904ec3.xhtml)
    中的 *仅用于认证的 LDAP 集成* 配方，位于 *用户管理* 部分。
- en: Detailed steps for downloading the code bundle are mentioned in the *Preface*
    of this book. Please have a look. The code bundle for the book is also hosted
    on GitHub at [https://github.com/PacktPublishing/Jira-8-Administration-Cookbook-Third-Edition](https://github.com/PacktPublishing/Jira-8-Administration-Cookbook-Third-Edition).
    We also have other code bundles from our rich catalog of books and videos available
    at [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/).
    Check them out!
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: 下载代码包的详细步骤已在本书的 *前言* 中提及，请查看。本书的代码包也托管在 GitHub 上，链接为 [https://github.com/PacktPublishing/Jira-8-Administration-Cookbook-Third-Edition](https://github.com/PacktPublishing/Jira-8-Administration-Cookbook-Third-Edition)。我们还提供了来自我们丰富书籍和视频目录的其他代码包，您可以访问
    [https://github.com/PacktPublishing/](https://github.com/PacktPublishing/) 查看。
- en: Upgrading Jira with an installer
  id: totrans-83
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 使用安装程序升级 Jira
- en: For both Windows and Linux, Atlassian provides an installer package that can
    guide you through the upgrade process. The installer will detect your current
    Jira installation and perform all the necessary tasks to upgrade it to the target
    version.
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 对于 Windows 和 Linux，Atlassian 提供了一个安装程序包，可以指导您完成升级过程。安装程序将自动检测您当前的 Jira 安装并执行所有必要的任务，将其升级到目标版本。
- en: In this recipe, we will show you how to upgrade your Jira instance with the
    standard Jira installer.
  id: totrans-85
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章节中，我们将向您展示如何使用标准的 Jira 安装程序来升级您的 Jira 实例。
- en: Getting ready
  id: totrans-86
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备就绪
- en: 'As the Jira installer is only available for standalone installations on Windows
    and Linux, we will run you through the installer on Windows in this recipe:'
  id: totrans-87
  prefs: []
  type: TYPE_NORMAL
  zh: 由于 Jira 安装程序仅适用于 Windows 和 Linux 的独立安装，因此我们将在本章节中通过 Windows 上的安装程序进行演示：
- en: Check the upgrade notes for any special instructions as well as the target Jira
    version to make sure you can perform a direct upgrade.
  id: totrans-88
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查升级说明，了解任何特殊的操作指南以及目标 Jira 版本，确保您可以进行直接升级。
- en: Make sure you have a valid Jira license.
  id: totrans-89
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保您有有效的 Jira 许可证。
- en: Verify whether your current host environment is compatible with the target Jira
    version. This includes the Java version, database, and OS.
  id: totrans-90
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证您的当前主机环境是否与目标 Jira 版本兼容，包括 Java 版本、数据库和操作系统。
- en: Verify whether your operating environment is compatible with the target's Jira
    version, specifically, the browser requirements.
  id: totrans-91
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 验证您的操作环境是否与目标 Jira 版本兼容，特别是浏览器的要求。
- en: Make sure that the add-ons you are using are compatible with the new version
    of Jira.
  id: totrans-92
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保您使用的插件与新版本的 Jira 兼容。
- en: Download the installer binary for your target Jira version.
  id: totrans-93
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 下载目标 Jira 版本的安装包。
- en: You can use the Universal Plugin Manager's Jira update check utility to check
    for add-on compatibility.
  id: totrans-94
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以使用 Universal Plugin Manager 的 Jira 更新检查工具来检查插件的兼容性。
- en: How to do it...
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Upgrade your Jira system with the installer using the following steps:'
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 使用以下步骤使用安装程序升级您的 Jira 系统：
- en: Take your current Jira offline, for example, by running the `stop-jira.bat`
    script.
  id: totrans-97
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭当前的 Jira 服务，例如通过运行 `stop-jira.bat` 脚本。
- en: Back up the Jira database with its native backup utility.
  id: totrans-98
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用其原生备份工具备份 Jira 数据库。
- en: Launch the installer and select the **Upgrade an existing JIRA installation **option.
  id: totrans-99
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动安装程序并选择**升级现有 JIRA 安装**选项。
- en: 'Now, select the directory where the current Jira is installed:'
  id: totrans-100
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 现在，选择当前安装了 Jira 的目录：
- en: '![](img/b58bd1f3-d5a4-4e6b-9a3a-b84a5c8e09f7.png)'
  id: totrans-101
  prefs: []
  type: TYPE_IMG
  zh: '![](img/b58bd1f3-d5a4-4e6b-9a3a-b84a5c8e09f7.png)'
- en: Check the backup JIRA home directory option and click on the **Next **button.
  id: totrans-102
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选中备份 JIRA 主目录选项，然后点击**下一步**按钮。
- en: If your `JIRA_HOME` directory is big, you might want to manually back it up
    or remove some of the `cache` and `tmp` folders as it would take a long time for
    the installer to back these up.
  id: totrans-103
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你的 `JIRA_HOME` 目录很大，你可能需要手动备份它或删除一些 `cache` 和 `tmp` 文件夹，因为安装程序备份这些内容会花费很长时间。
- en: 'Review the Upgrade checklist and click on the **Upgrade **button:'
  id: totrans-104
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 查看升级检查列表并单击**升级**按钮：
- en: '![](img/88b46af0-1c34-497e-8422-084e5fda10e4.png)'
  id: totrans-105
  prefs: []
  type: TYPE_IMG
  zh: '![](img/88b46af0-1c34-497e-8422-084e5fda10e4.png)'
- en: Wait for the installer to complete the upgrade process. Once the upgrade is
    complete, the installer will automatically launch Jira.
  id: totrans-106
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 等待安装程序完成升级过程。升级完成后，安装程序将自动启动 Jira。
- en: Update any add-ons once Jira starts successfully.
  id: totrans-107
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 更新任何插件后，Jira 成功启动。
- en: The installer will detect and provide you with a list of customized files in
    the `JIRA_INSTALL` directory, which you will need to copy manually after the upgrade.
  id: totrans-108
  prefs: []
  type: TYPE_NORMAL
  zh: 安装程序将检测并提供位于 `JIRA_INSTALL` 目录中的自定义文件列表，您需要在升级后手动复制这些文件。
- en: See also
  id: totrans-109
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另请参阅
- en: If you cannot use the installer to upgrade Jira, refer to the *Upgrading Jira
    manually* recipe.
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果无法使用安装程序升级 Jira，请参阅*手动升级 Jira*说明。
- en: Upgrading Jira manually
  id: totrans-111
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 手动升级 Jira
- en: If you find yourself in a situation where you cannot use the installer to upgrade Jira—for
    example, if you are hosting Jira on an OS that does not have an installer binary
    or on a cloud platform, then you can use the manual upgrade method to upgrade
    your Jira instance.
  id: totrans-112
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您无法使用安装程序升级 Jira，例如如果您在没有安装程序二进制文件的操作系统上托管 Jira 或在云平台上托管 Jira，则可以使用手动升级方法来升级您的
    Jira 实例。
- en: Getting ready
  id: totrans-113
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The tasks required to upgrade Jira manually will remain the same as those for
    the installer. Refer to the previous recipe for common tasks involved. As the
    installer automates many backup tasks while upgrading Jira manually, you will
    have to do the following:'
  id: totrans-114
  prefs: []
  type: TYPE_NORMAL
  zh: 手动升级 Jira 实例所需的任务与使用安装程序的任务相同。请参考前面的说明以了解涉及的常见任务。由于安装程序在升级 Jira 时自动化了许多备份任务，因此你需要执行以下操作：
- en: Back up the Jira database with its native backup utility.
  id: totrans-115
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用其原生备份工具备份 Jira 数据库。
- en: Back up the `JIRA_INSTALL` directory.
  id: totrans-116
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 备份 `JIRA_INSTALL` 目录。
- en: Back up the `JIRA_HOME` directory.
  id: totrans-117
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 备份 `JIRA_HOME` 目录。
- en: Get a list of all the customized files in the `JIRA_INSTALL` directory from
    the **System Info** page in Jira.
  id: totrans-118
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从 Jira 的**系统信息**页面中获取 `JIRA_INSTALL` 目录中所有自定义文件的列表。
- en: How to do it...
  id: totrans-119
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To manually upgrade your Jira instance, perform the following steps:'
  id: totrans-120
  prefs: []
  type: TYPE_NORMAL
  zh: 要手动升级你的 Jira 实例，请执行以下步骤：
- en: Take your current Jira offline.
  id: totrans-121
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭当前的 Jira 服务。
- en: Install the new version of Jira in a different directory.
  id: totrans-122
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在不同的目录中安装新版本的 Jira。
- en: Edit the `jira-application.properties` file in the `JIRA_INSTALL/atlassian-jira/WEB-INF/classes`
    directory to point to the existing `JIRA_HOME` directory.
  id: totrans-123
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 编辑位于 `JIRA_INSTALL/atlassian-jira/WEB-INF/classes` 目录下的 `jira-application.properties`
    文件，将其指向现有的 `JIRA_HOME` 目录。
- en: Copy any modified files from the old Jira instance to the new one.
  id: totrans-124
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制任何从旧的 Jira 实例修改过的文件到新的实例中。
- en: Start up the new Jira instance.
  id: totrans-125
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动新的 Jira 实例。
- en: Update the add-ons once Jira starts successfully.
  id: totrans-126
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 成功启动 Jira 后，请更新插件。
- en: Remove the previous installation directory to avoid confusion.
  id: totrans-127
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 删除先前的安装目录以避免混淆。
- en: How it works...
  id: totrans-128
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 工作原理...
- en: What we did here essentially involved setting up a new instance of Jira and
    pointing it at the old Jira instance's data. When we start up the new Jira instance,
    it will connect to the existing Jira database by reading the `dbconfig.xml` file
    from the `JIRA_HOME` directory, and will perform an in-place upgrade to make all
    the necessary schema changes.
  id: totrans-129
  prefs: []
  type: TYPE_NORMAL
  zh: 我们在这里做的基本上是设置了一个新的 Jira 实例，并将其指向旧的 Jira 实例的数据。当我们启动新的 Jira 实例时，它将通过从 `JIRA_HOME`
    目录中的 `dbconfig.xml` 文件读取来连接到现有的 Jira 数据库，并执行就地升级以进行所有必要的模式更改。
- en: Migrating Jira to another environment
  id: totrans-130
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 将Jira迁移到另一个环境
- en: Now that we have gone through upgrading a Jira instance, we will look at how
    to move a Jira instance to another server environment. This is a common use case
    when you need to move an application to a virtualized environment or data center.
  id: totrans-131
  prefs: []
  type: TYPE_NORMAL
  zh: 现在我们已经完成了Jira实例的升级，我们将探讨如何将Jira实例迁移到另一个服务器环境。这是在将应用程序迁移到虚拟化环境或数据中心时常见的使用场景。
- en: Getting ready
  id: totrans-132
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'The following things need to be checked before you start with this recipe:'
  id: totrans-133
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始本步骤之前，需要检查以下内容：
- en: Make sure you have a valid Jira license.
  id: totrans-134
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保你拥有有效的Jira许可证。
- en: Check whether your new environment is compatible with Jira system requirements.
  id: totrans-135
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 检查你的新环境是否符合Jira的系统要求。
- en: Ensure that both the old and new Jira instances are of the same major or minor
    version. If you intend to run a newer version of Jira in the new environment,
    it is recommended that you upgrade once the migration is successful.
  id: totrans-136
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保旧的和新的Jira实例具有相同的大版本或小版本。如果你打算在新环境中运行更新版本的Jira，建议在迁移成功后进行升级。
- en: Migrating a system can be very disruptive for users. Make sure you communicate
    this to your users and allocate sufficient time for rollbacks.
  id: totrans-137
  prefs: []
  type: TYPE_NORMAL
  zh: 系统迁移可能会对用户造成很大的干扰。确保你已通知用户，并为回滚分配了足够的时间。
- en: How to do it...
  id: totrans-138
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To migrate an existing Jira instance to another server, perform the following
    steps:'
  id: totrans-139
  prefs: []
  type: TYPE_NORMAL
  zh: 要将现有的Jira实例迁移到另一个服务器，执行以下步骤：
- en: Download and install a brand-new Jira instance in your new environment with
    an empty database.
  id: totrans-140
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在新的环境中下载并安装一个全新的Jira实例，使用空数据库。
- en: 'Note down the files listed under **Modified Files **and **Removed Files** in
    the **System Info** page for your current Jira. The following screenshot shows
    an example:'
  id: totrans-141
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 记下**系统信息**页面中列出的**已修改文件**和**已删除文件**，以下截图显示了一个示例：
- en: '![](img/6c2fb69f-dc03-4953-b613-12a98e22e051.png)'
  id: totrans-142
  prefs: []
  type: TYPE_IMG
  zh: '![](img/6c2fb69f-dc03-4953-b613-12a98e22e051.png)'
- en: Shut down your current Jira instance.
  id: totrans-143
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭当前的Jira实例。
- en: Back up your current Jira database with the database's native backup utility.
  id: totrans-144
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用数据库的原生备份工具备份当前的Jira数据库。
- en: Back up your current `JIRA_HOME` directory.
  id: totrans-145
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 备份你当前的`JIRA_HOME`目录。
- en: Take your new Jira offline.
  id: totrans-146
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 将你的新Jira下线。
- en: Copy over your `JIRA_HOME` backup and replace the new `JIRA_HOME` directory
    with it.
  id: totrans-147
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制你的`JIRA_HOME`备份并用它替换新的`JIRA_HOME`目录。
- en: Update the `dbconfig.xml` file with the new Jira database details.
  id: totrans-148
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用新的Jira数据库详细信息更新`dbconfig.xml`文件。
- en: Copy your database backup and restore the new Jira database.
  id: totrans-149
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 复制你的数据库备份并恢复新的Jira数据库。
- en: Start up the new Jira instance.
  id: totrans-150
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 启动新的Jira实例。
- en: Apply the same changes to the new Jira instance from step 2.
  id: totrans-151
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 对第2步中的新Jira实例应用相同的更改。
- en: Setting up the context path for Jira
  id: totrans-152
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置Jira的上下文路径
- en: If you have multiple web applications running on the same domain, you might
    want to set up a context path for Jira—for example, `http://example.com/jira`,
    where `/jira` is the context path.
  id: totrans-153
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你在同一域上运行多个Web应用程序，你可能需要为Jira设置一个上下文路径——例如，`http://example.com/jira`，其中`/jira`是上下文路径。
- en: How to do it...
  id: totrans-154
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to set up a context path for Jira:'
  id: totrans-155
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤来为Jira设置上下文路径：
- en: Shut down Jira if it is running.
  id: totrans-156
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果Jira正在运行，请先关闭Jira。
- en: Open up `JIRA_INSTALL/conf/server.xml` in a text editor.
  id: totrans-157
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文本编辑器中打开`JIRA_INSTALL/conf/server.xml`。
- en: 'Locate the following line and enter the context path for the `path` attribute—for
    example, `path="/jira"`:'
  id: totrans-158
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 找到以下行并为`path`属性输入上下文路径——例如，`path="/jira"`：
- en: '[PRE5]'
  id: totrans-159
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: Save the file and restart Jira. If you are doing this after Jira has been installed,
    you will have to update Jira's base URL option so that its links will reflect
    the change.
  id: totrans-160
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 保存文件并重启Jira。如果你在Jira安装之后进行此操作，你需要更新Jira的基本URL选项，以便其链接反映这一变化。
- en: Log into Jira as an administrator.
  id: totrans-161
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录Jira。
- en: Navigate to **Administration** > **Systems** > **General Configuration**.
  id: totrans-162
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** > **系统** > **常规配置**。
- en: Click on the **Edit Settings **button.
  id: totrans-163
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**编辑设置**按钮。
- en: Enter the fully qualified URL in Jira, including the context path, in the **Base
    URL **field.
  id: totrans-164
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在**基本URL**字段中输入包括上下文路径的Jira完全合格URL。
- en: Click on **Update **to apply the change.
  id: totrans-165
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**更新**以应用更改。
- en: After you have all this set up, you will be able to access Jira with the new
    context path, and all the links, including those from Jira's notification emails,
    will be the context path in the URL.
  id: totrans-166
  prefs: []
  type: TYPE_NORMAL
  zh: 在你完成所有设置后，你将能够通过新的上下文路径访问Jira，所有链接，包括来自Jira通知邮件的链接，将在URL中显示上下文路径。
- en: Setting up SSL
  id: totrans-167
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 设置SSL
- en: By default, Jira runs with a standard non-encrypted HTTP protocol. This is acceptable
    if you are running Jira in a secure environment, such as an internal network.
    However, if you plan to open up access to Jira over the internet, you need to
    tighten up security by encrypting sensitive data, such as the usernames and passwords
    that are sent, by enabling HTTP over **SSL** (**HTTPS**).
  id: totrans-168
  prefs: []
  type: TYPE_NORMAL
  zh: 默认情况下，Jira使用标准的未加密HTTP协议运行。如果你在安全的环境中运行Jira，如内部网络，这种方式是可以接受的。但是，如果你计划通过互联网开放Jira的访问，你需要通过启用**SSL**（**HTTPS**）加密敏感数据（如发送的用户名和密码）来增强安全性。
- en: This recipe describes how to install SSL on the Jira Tomcat application server.
    If you have an HTTP web server such as Apache in front of Jira, you can install
    the SSL certificate on the web server instead.
  id: totrans-169
  prefs: []
  type: TYPE_NORMAL
  zh: 本教程描述了如何在Jira Tomcat应用服务器上安装SSL。如果你在Jira前面有像Apache这样的HTTP web服务器，你也可以选择在web服务器上安装SSL证书。
- en: Getting ready
  id: totrans-170
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'You need to have the following set up before you can step through this recipe:'
  id: totrans-171
  prefs: []
  type: TYPE_NORMAL
  zh: 在开始本教程之前，你需要设置以下内容：
- en: '**Obtain a valid SSL certificate**: You can either use a self-signed certificate
    or obtain one from a **certificate authority **(**CA**) such as **Verisign**.
    Using a self-signed certificate will display a warning message when users first
    visit the site, as shown in the following screenshot:'
  id: totrans-172
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: '**获取有效的SSL证书**：你可以使用自签名证书，或者从**证书颁发机构**（**CA**）如**Verisign**获取一个证书。使用自签名证书时，当用户首次访问网站时会显示警告信息，如下所示的截图所示：'
- en: '![](img/aabe9ac8-5bab-4a7a-9441-a5b9cf8e6ba6.png)'
  id: totrans-173
  prefs: []
  type: TYPE_IMG
  zh: '![](img/aabe9ac8-5bab-4a7a-9441-a5b9cf8e6ba6.png)'
- en: Ensure that the `JAVA_HOME` environment variable is set properly.
  id: totrans-174
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保`JAVA_HOME`环境变量已正确设置。
- en: Make sure you know which JDK/JRE Jira is using. You can find this information
    from the **System Info **page in Jira, where you need to look for the `java.home`
    property.
  id: totrans-175
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你知道Jira使用的是哪个JDK/JRE。你可以从Jira中的**系统信息**页面找到此信息，查找`java.home`属性。
- en: 'Make sure your JRE/JDK''s `bin` directory is added to your `PATH` environment
    variable, and the `keytool` command will output its usage, as shown in the following
    screenshot:'
  id: totrans-176
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 确保你的JRE/JDK的`bin`目录已添加到`PATH`环境变量中，`keytool`命令将输出其使用方法，如下图所示：
- en: '![](img/f5ccb9bf-75b2-4cc7-8f08-4b0e8353673f.png)'
  id: totrans-177
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f5ccb9bf-75b2-4cc7-8f08-4b0e8353673f.png)'
- en: Now let's get started with the steps for this recipe.
  id: totrans-178
  prefs: []
  type: TYPE_NORMAL
  zh: 现在让我们开始本教程的步骤。
- en: How to do it...
  id: totrans-179
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Perform the following steps to import an SSL certificate:'
  id: totrans-180
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤导入SSL证书：
- en: Open up a command window and go to the directory where the certificate file
    resides.
  id: totrans-181
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令窗口并进入证书文件所在的目录。
- en: Generate a **Java KeyStore **(**JKS**) for Jira by running the `keytool -genkey
    -alias jira -keyalg RSA -keystore $JIRA_HOME/jira.jks` command.
  id: totrans-182
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行`keytool -genkey -alias jira -keyalg RSA -keystore $JIRA_HOME/jira.jks`命令，为Jira生成一个**Java
    KeyStore**（**JKS**）。
- en: Import the certificate into the KeyStore repository by running the `keytool
    -import -alias jira -keystore $JIRA_HOME/jira.jks -file file.crt` command, where `file.crt` is
    the certificate file.
  id: totrans-183
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行`keytool -import -alias jira -keystore $JIRA_HOME/jira.jks -file file.crt`命令，将证书导入到KeyStore存储库中，其中`file.crt`是证书文件。
- en: Open the `server.xml` file located in the `JIRA_INSTALL/conf` directory in a
    text editor.
  id: totrans-184
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开位于`JIRA_INSTALL/conf`目录中的`server.xml`文件并使用文本编辑器编辑。
- en: 'Locate and uncomment the following XML configuration snippet:'
  id: totrans-185
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 定位并取消注释以下XML配置片段：
- en: '[PRE6]'
  id: totrans-186
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: 'Add a few new attributes to the `Connector` tag and save the file, as follows:'
  id: totrans-187
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 向`Connector`标签添加一些新的属性并保存文件，如下所示：
- en: '[PRE7]'
  id: totrans-188
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: Restart Jira to apply the changes.
  id: totrans-189
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重启Jira以应用更改。
- en: How it works...
  id: totrans-190
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: We first created a new Java KeyStore repository for Jira to store its own SSL certificate
    with Java's keytool utility. During this step, you are prompted to provide information
    about the store as well as a password to access the KeyStore repository.
  id: totrans-191
  prefs: []
  type: TYPE_NORMAL
  zh: 我们首先使用Java的keytool工具为Jira创建了一个新的Java KeyStore存储库来存储其SSL证书。在此步骤中，系统会提示你提供关于存储库的信息以及用于访问KeyStore存储库的密码。
- en: Do not lose the password to the KeyStore repository.
  id: totrans-192
  prefs: []
  type: TYPE_NORMAL
  zh: 不要忘记KeyStore存储库的密码。
- en: After we created the KeyStore repository, we imported the certificate (and then
    enabled an additional connector to listen for HTTPS connections) by uncommenting
    the connector XML tag. We also added new attributes to the tag so that Tomcat
    knows where our new KeyStore repository is and how to access it to get to the
    certificate.
  id: totrans-193
  prefs: []
  type: TYPE_NORMAL
  zh: 在创建了KeyStore存储库后，我们导入了证书（然后启用了一个额外的连接器来监听HTTPS连接），通过取消注释连接器的XML标签。我们还向标签中添加了新的属性，以便Tomcat知道我们的新KeyStore存储库在哪里，并且如何访问它以获取证书。
- en: 'You can also change the port number for the connector if you want to run HTTPS
    on a more common port, `443`, instead of the default port, `8443`, and your final
    XML snippet will look something similar to the following:'
  id: totrans-194
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您希望将HTTPS运行在更常见的端口`443`上，而不是默认的端口`8443`，您还可以更改连接器的端口号，最终的XML片段可能如下所示：
- en: '[PRE8]'
  id: totrans-195
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: There's more...
  id: totrans-196
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: At this point, users can access Jira with both HTTP and HTTPS, and you need
    to configure Jira so that it will automatically redirect all HTTP traffic to HTTPS.
    Jira comes with a handy configuration utility that can help you set up this configuration.
  id: totrans-197
  prefs: []
  type: TYPE_NORMAL
  zh: 此时，用户可以通过HTTP和HTTPS访问Jira，您需要配置Jira，以便自动将所有HTTP流量重定向到HTTPS。Jira附带了一个方便的配置工具，帮助您完成此配置。
- en: You should first make sure your HTTPS configuration is working correctly before
    attempting this recipe.
  id: totrans-198
  prefs: []
  type: TYPE_NORMAL
  zh: 在尝试本教程之前，您应先确保HTTPS配置正常工作。
- en: 'Perform the following steps:'
  id: totrans-199
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Open the Command Prompt and go to the `JIRA_INSTALL/bin` directory.
  id: totrans-200
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符并进入`JIRA_INSTALL/bin`目录。
- en: Depending on your OS, run the `config.bat` (Windows) or `config.sh` (Linux /
    OS X) file.
  id: totrans-201
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 根据您的操作系统，运行`config.bat`（Windows）或`config.sh`（Linux / OS X）文件。
- en: Select the Web Servertab from the JIRA Configuration Tool window.
  id: totrans-202
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在JIRA配置工具窗口中选择**Web Server**选项卡。
- en: Select the **HTTP and HTTPs (redirect HTTP to HTTPs) **option for **Profile**.
  id: totrans-203
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 为**Profile**选择**HTTP和HTTPS（将HTTP重定向到HTTPS）**选项。
- en: Click on the **Save **button at the bottom of the window, as shown in the following
    screenshot.
  id: totrans-204
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击窗口底部的**保存**按钮，如以下截图所示。
- en: 'Restart Jira to apply the change:'
  id: totrans-205
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重启Jira以应用更改：
- en: '![](img/836ef919-db10-4d1f-9a16-83238bb2f394.png)'
  id: totrans-206
  prefs: []
  type: TYPE_IMG
  zh: '![](img/836ef919-db10-4d1f-9a16-83238bb2f394.png)'
- en: 'If you cannot use the JIRA Configuration Tool, you can perform the following
    steps to set up the configuration manually:'
  id: totrans-207
  prefs: []
  type: TYPE_NORMAL
  zh: 如果无法使用JIRA配置工具，您可以按照以下步骤手动设置配置：
- en: Open the `web.xml` file located in the `JIRA_INSTALL/atlassian-jira/WEB-INF` directory.
  id: totrans-208
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开位于`JIRA_INSTALL/atlassian-jira/WEB-INF`目录下的`web.xml`文件。
- en: 'Add the following XML snippet at the end of the file just before the closing `</webapp>` tag:'
  id: totrans-209
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在文件末尾添加以下XML片段，紧接在`</webapp>`标签之前：
- en: '[PRE9]'
  id: totrans-210
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Restart Jira to apply the change.
  id: totrans-211
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重启Jira以应用更改。
- en: See also
  id: totrans-212
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 另见
- en: For information on connecting Jira to other applications that run on SSL, refer
    to the next recipe.
  id: totrans-213
  prefs: []
  type: TYPE_NORMAL
  zh: 有关将Jira连接到运行在SSL上的其他应用程序的信息，请参考下一个教程。
- en: Installing SSL certificates from other applications
  id: totrans-214
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 安装来自其他应用程序的SSL证书
- en: 'You might need to connect Jira to other services, such as LDAP, mail servers,
    and other websites. Often, these services make use of SSL. In such cases, the
    connection will fail, and you will see the following errors in your Jira log file:'
  id: totrans-215
  prefs: []
  type: TYPE_NORMAL
  zh: 您可能需要将Jira连接到其他服务，如LDAP、邮件服务器和其他网站。这些服务通常使用SSL。在这种情况下，连接将失败，您将在Jira日志文件中看到以下错误：
- en: '[PRE10]'
  id: totrans-216
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: Getting ready
  id: totrans-217
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'For this recipe, we will use the Java keytool utility, so make sure you have
    the following configuration set up:'
  id: totrans-218
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将使用Java的keytool工具，确保您已完成以下配置：
- en: Obtain the required SSL certificate from the target system.
  id: totrans-219
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 从目标系统获取所需的SSL证书。
- en: Ensure that the `JAVA_HOME` environment variable is set properly.
  id: totrans-220
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保`JAVA_HOME`环境变量已正确设置。
- en: Make sure you know which JDK/JRE Jira is using. You can find this information
    on the **System Info **page, where you need to look for the `java.home` property.
  id: totrans-221
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保您知道Jira正在使用哪个JDK/JRE。您可以在**系统信息**页面找到此信息，查找`java.home`属性。
- en: Make sure your JRE/JDK's `bin` directory is added to your `PATH` environment
    variable, and the `keytool` command will output its usage.
  id: totrans-222
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 确保将JRE/JDK的`bin`目录添加到`PATH`环境变量中，`keytool`命令将输出其用法。
- en: Obtain the password for the Java trust store used by Jira.
  id: totrans-223
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 获取Jira使用的Java信任库的密码。
- en: How to do it...
  id: totrans-224
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'In this recipe, let''s assume we want to connect Jira to an LDAP server that
    is running on SSL. Perform the following steps to make it a trusted site inside
    Jira:'
  id: totrans-225
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，假设我们希望将Jira连接到一个运行在SSL上的LDAP服务器。执行以下步骤，将其设置为Jira中的受信任站点：
- en: Open up a Command Prompt and go to the directory where the certificate file
    resides.
  id: totrans-226
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 打开命令提示符并进入存放证书文件的目录。
- en: Import the certificate into the trust store by running `keytool -import -alias
    tomcat -file file.cer $JAVA_HOME/jre/lib/security/cacertscommand`, where `file.cer` is
    the certificate file.
  id: totrans-227
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行`keytool -import -alias tomcat -file file.cer $JAVA_HOME/jre/lib/security/cacertscommand`将证书导入信任库，其中`file.cer`为证书文件。
- en: Restart Jira to apply the changes.
  id: totrans-228
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重启Jira以应用更改。
- en: How it works...
  id: totrans-229
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: When Jira attempts to connect to an SSL-protected service, it will first check
    whether the target service's certificate can be trusted. This is done by checking
    to see whether the certificate is present in what is called the Java trust store.
    If the certificate is not present, the connection will fail.
  id: totrans-230
  prefs: []
  type: TYPE_NORMAL
  zh: 当Jira尝试连接到一个SSL保护的服务时，它会首先检查目标服务的证书是否可信。这是通过检查证书是否存在于所谓的Java信任存储中来完成的。如果证书不存在，连接将失败。
- en: The trust store is a special KeyStore repository, usually called `cacerts`,
    and is located in the `$JAVA_HOME/lib/security` directory on the server.
  id: totrans-231
  prefs: []
  type: TYPE_NORMAL
  zh: 信任存储是一个特殊的KeyStore库，通常称为`cacerts`，并位于服务器的`$JAVA_HOME/lib/security`目录中。
- en: We used the keytool utility to import the certificate to our local trust store,
    so the target service will be registered as a trusted service and will allow Jira
    to connect to it successfully.
  id: totrans-232
  prefs: []
  type: TYPE_NORMAL
  zh: 我们使用了`keytool`工具将证书导入到本地信任存储中，这样目标服务将被注册为受信任的服务，允许Jira成功连接到该服务。
- en: Resetting the Jira administrator password
  id: totrans-233
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 重置Jira管理员密码
- en: Sometimes, you might forget or lose the password to the account with the Jira
    administrator or Jira System Administrator permission, and you cannot retrieve
    it using the password reset option. For example, suppose Jira does not have an
    SMTP server configured, or you restored Jira from a data dump and do not know
    the account and/or password. In these cases, you need to reset the administrator
    password directly in the database.
  id: totrans-234
  prefs: []
  type: TYPE_NORMAL
  zh: 有时你可能会忘记或丢失Jira管理员或Jira系统管理员权限账户的密码，而且无法通过密码重置选项找回。例如，假设Jira没有配置SMTP服务器，或者你从数据备份恢复了Jira并不知道账户和/或密码。在这些情况下，你需要直接在数据库中重置管理员密码。
- en: This recipe only applies to Jira instances that use the default internal user
    directory option. External user management, such as LDAP, will not work with this
    recipe.
  id: totrans-235
  prefs: []
  type: TYPE_NORMAL
  zh: 此方法仅适用于使用默认内部用户目录选项的Jira实例。外部用户管理（如LDAP）将无法与此方法一起使用。
- en: Getting ready
  id: totrans-236
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'As we will reset the password stored in Jira''s database, make sure you do
    the following:'
  id: totrans-237
  prefs: []
  type: TYPE_NORMAL
  zh: 由于我们将重置存储在Jira数据库中的密码，请确保你执行以下操作：
- en: Connect to the Jira database via either the command line or a GUI.
  id: totrans-238
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 通过命令行或GUI连接到Jira数据库。
- en: Update the Jira database records.
  id: totrans-239
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 更新Jira数据库记录。
- en: How to do it...
  id: totrans-240
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'Let''s assume we use the default `mysql` command-line tool and MySQL as the
    backend database for Jira. If you are using a different database, you may need
    to change the following SQL statements accordingly:'
  id: totrans-241
  prefs: []
  type: TYPE_NORMAL
  zh: 假设我们使用默认的`mysql`命令行工具和MySQL作为Jira的后端数据库。如果你使用的是其他数据库，可能需要相应地更改以下SQL语句：
- en: Connect to the Jira database with a client tool by running the `mysql -u jirauser
    -p` command, where `jirauser` is the username used by Jira to access the Jira
    database.
  id: totrans-242
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行`mysql -u jirauser -p`命令使用客户端工具连接到Jira数据库，其中`jirauser`是Jira用来访问Jira数据库的用户名。
- en: You can find Jira's database details from the `dbconfig.xml` file located in `JIRA_HOME`.
  id: totrans-243
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 你可以从`JIRA_HOME`中的`dbconfig.xml`文件找到Jira的数据库详细信息。
- en: Change to the Jira database by running the `use jiradb` command, where `jiradb` is
    the name of Jira's database.
  id: totrans-244
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行`use jiradb`命令切换到Jira数据库，其中`jiradb`是Jira数据库的名称。
- en: 'Determine the groups that have the Jira System Administrator global permission
    with the following SQL statement:'
  id: totrans-245
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下SQL语句确定具有Jira系统管理员全局权限的组：
- en: '[PRE11]'
  id: totrans-246
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: 'Find users that belong to the groups returned in the previous step by running
    the following SQL statement, where `jira-administrators` is a group returned from
    the previous step:'
  id: totrans-247
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 通过运行以下SQL语句查找属于前一步骤中返回的组的用户，其中`jira-administrators`是从前一步骤返回的组：
- en: '[PRE12]'
  id: totrans-248
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: The `jira-administrators` group is the default group that administrators belong
    to. You might get a different group if you customize the permission configurations.
    The table column for the username is `child-name`.
  id: totrans-249
  prefs: []
  type: TYPE_NORMAL
  zh: '`jira-administrators`组是管理员默认所属的组。如果你自定义了权限配置，可能会有不同的组。用户名的表列为`child-name`。'
- en: 'Reset the user''s password in the database with the following SQL statement,
    where `admin` is a user returned in the previous step:'
  id: totrans-250
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下SQL语句在数据库中重置用户的密码，其中`admin`是前一步骤中返回的用户：
- en: '[PRE13]'
  id: totrans-251
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: Restart Jira to apply the change.
  id: totrans-252
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 重启Jira以应用更改。
- en: How it works...
  id: totrans-253
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 它是如何工作的...
- en: With Jira's internal user directory, all user and group data is stored in the
    Jira database. The value `44` is the ID of the Jira System Administrator global
    permission.
  id: totrans-254
  prefs: []
  type: TYPE_NORMAL
  zh: 使用Jira的内部用户目录时，所有用户和组数据都会存储在Jira数据库中。值`44`是Jira系统管理员全局权限的ID。
- en: If you do not know which groups or users are granted the Jira System Administrator
    global permission, you will first have to find this information using steps 4 and
    5\. Otherwise, you can skip to step 6 in order to reset the password.
  id: totrans-255
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你不知道哪些组或用户被授予Jira系统管理员全局权限，你首先需要通过步骤4和5找到这些信息。否则，你可以跳到步骤6来重置密码。
- en: Jira's user password is stored in the `cwd_user` table. As Jira only stores
    the hash value of the password, we changed the user's admin password hash to `uQieO/1CGMUIXXftw3ynrsaYLShI+GTcPS4LdUGWbIusFvHPfUzD7CZvms6yMMvA8I7FViHVEqr6Mj4pCLKAFQ==`,
    which is the UTF-8-encoded hash value of `sphere`.
  id: totrans-256
  prefs: []
  type: TYPE_NORMAL
  zh: Jira的用户密码存储在`cwd_user`表中。由于Jira只存储密码的哈希值，我们将用户的管理员密码哈希值更改为`uQieO/1CGMUIXXftw3ynrsaYLShI+GTcPS4LdUGWbIusFvHPfUzD7CZvms6yMMvA8I7FViHVEqr6Mj4pCLKAFQ==`，这是`sphere`的UTF-8编码哈希值。
- en: Importing data from CSV
  id: totrans-257
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 从CSV导入数据
- en: Often, you will need to import data from other systems into Jira. For example,
    you might want to migrate data from an older bug-tracking system, or if you have
    data coming out of other systems, you may want to use this output to populate
    your project.
  id: totrans-258
  prefs: []
  type: TYPE_NORMAL
  zh: 经常需要将其他系统的数据导入Jira。例如，你可能想要迁移来自旧的缺陷跟踪系统的数据，或者如果你从其他系统中获得数据，可能希望使用这些输出填充你的项目。
- en: As systems often have their own data structure, it is often not this straightforward
    to perform data migration. However, the good news is that most systems can export
    data in CSV (or Excel, which can be easily transformed into CSV format); we will
    look at using CSV as a way to import data into Jira in this recipe.
  id: totrans-259
  prefs: []
  type: TYPE_NORMAL
  zh: 由于系统通常有自己的数据结构，因此数据迁移通常不是这么简单。不过，好消息是，大多数系统都可以导出CSV格式的数据（或者是Excel格式，可以很容易地转换为CSV格式）；我们将在这个步骤中使用CSV作为将数据导入Jira的方式。
- en: Getting ready
  id: totrans-260
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: 'When importing data into Jira, the most important thing is to prepare your
    input data file and make sure it is formatted correctly and contains all the necessary
    information. To help the importer, keep the following in mind:'
  id: totrans-261
  prefs: []
  type: TYPE_NORMAL
  zh: 导入数据到Jira时，最重要的是准备好输入数据文件，并确保其格式正确且包含所有必要的信息。为了帮助导入器，记住以下几点：
- en: Remove any non-data-related content, especially if you created your CSV file
    from a spreadsheet, which will help to keep the file size down.
  id: totrans-262
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 删除任何与数据无关的内容，特别是如果你是从电子表格中创建了CSV文件，这有助于减小文件大小。
- en: If your file contains users who need to be imported into fields such as **Assignee**,
    make sure you use either their usernames or email addresses that can be matched
    against corresponding accounts in Jira.
  id: totrans-263
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你的文件包含需要导入到字段中的用户（例如**受指派人**），确保使用他们的用户名或电子邮件地址，这些信息可以与Jira中的对应账户匹配。
- en: If your file contains dates that need to be imported into fields, such as `Due
    date`, make sure they are all formatted using the same date format. This is so
    that Jira can process date values consistently.
  id: totrans-264
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 如果你的文件包含需要导入到字段中的日期（例如`到期日期`），确保它们都使用相同的日期格式进行格式化。这是为了确保Jira能够一致地处理日期值。
- en: How to do it...
  id: totrans-265
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: 'To import data from other systems, perform the following steps:'
  id: totrans-266
  prefs: []
  type: TYPE_NORMAL
  zh: 要从其他系统导入数据，执行以下步骤：
- en: Log in to Jira as an administrator.
  id: totrans-267
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录Jira。
- en: Select the **Projects **menu from the top and select the **Import External Project** option.
  id: totrans-268
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 从顶部选择**项目**菜单，然后选择**导入外部项目**选项。
- en: Select the **CSV **option. If, however, you see your system in the list, you
    can choose that instead. The process of using a system-specific importer will
    be mostly the same as the CSV importer, with some minor differences.
  id: totrans-269
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**CSV**选项。然而，如果你在列表中看到了你的系统，可以选择该系统。使用特定系统的导入工具与CSV导入器的过程大致相同，只是会有一些小的差异。
- en: Select the CSV file for the **CSV Source File **field. If you are performing
    an import for the first time, do not select the **Use an existing configuration** option.
    We will generate the configuration at the end of the import, and you will be able
    to use this to fast-track future imports.
  id: totrans-270
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择CSV文件作为**CSV源文件**字段。如果这是你第一次进行导入，请不要选择**使用现有配置**选项。我们将在导入结束时生成配置，并且你可以使用此配置来加快未来的导入。
- en: 'Expand the **Advanced **option if your file uses a different file encoding
    or uses a character other than a comma (`,`) as its separators. Click on the **Next** button to
    proceed to step 2 of the wizard:'
  id: totrans-271
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果你的文件使用不同的文件编码或使用除逗号（`,`）之外的字符作为分隔符，请展开**高级**选项。点击**下一步**按钮继续向导的第2步：
- en: '![](img/66fdc8e4-80d0-48a7-a049-ab5d0fd5a2bc.png)'
  id: totrans-272
  prefs: []
  type: TYPE_IMG
  zh: '![](img/66fdc8e4-80d0-48a7-a049-ab5d0fd5a2bc.png)'
- en: Select the project to import your data into. If you do not have a project, you
    can select the **Select New **option and create a project on-the-fly.
  id: totrans-273
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择要将数据导入到的项目。如果没有项目，可以选择**选择新建**选项并即时创建一个项目。
- en: Generally, it is best to have the project created beforehand to ensure that
    it is set up with the correct configuration schemes, such as the workflow and
    fields.
  id: totrans-274
  prefs: []
  type: TYPE_NORMAL
  zh: 一般来说，最好事先创建项目，以确保其配置了正确的配置方案，例如工作流和字段。
- en: 'Verify the **E-mail Suffix for New Users **and **Date format** values used
    in your CSV file. This will ensure that data such as dates will be correctly parsed
    while being imported and saved in Jira''s date fields, such as `Due dates`:'
  id: totrans-275
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 验证 CSV 文件中使用的**新用户电子邮件后缀**和**日期格式**值。这将确保诸如日期之类的数据在导入时能够正确解析，并保存在 Jira 的日期字段中，例如`到期日期`。
- en: '![](img/428c337c-3c50-46bc-b21e-7769dd56a008.png)'
  id: totrans-276
  prefs: []
  type: TYPE_IMG
  zh: '![](img/428c337c-3c50-46bc-b21e-7769dd56a008.png)'
- en: Select and map the CSV columns to Jira fields. Certain fields, such as the **Summary **field,
    must have a corresponding column in the file; otherwise, Jira will not allow you
    to proceed. If you do not want to map a column, you can select the **Don't map
    this field** option.
  id: totrans-277
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择并映射 CSV 列到 Jira 字段。某些字段，例如**摘要**字段，必须在文件中有对应的列，否则 Jira 将不允许你继续。如果你不想映射某一列，可以选择**不映射此字段**选项。
- en: 'Select the **Map field value **option for any columns mapping to a selected
    list style field. This will allow you to map individual values from the CSV file
    column to options available in Jira. Unless you are sure that your file contents
    can be mapped to the Jira field options exactly, it is best to manually verify
    this; otherwise, you will end up with duplicated values due to, for example, case
    sensitivity:'
  id: totrans-278
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**映射字段值**选项，用于任何映射到选定列表类型字段的列。这样，你可以将 CSV 文件列中的单个值映射到 Jira 中可用的选项。除非你确定文件内容可以精确映射到
    Jira 字段选项，否则最好手动验证；否则，可能会由于例如大小写敏感问题导致重复值。
- en: '![](img/fcbbc146-13f5-4109-b30c-cc6b2623d47b.png)'
  id: totrans-279
  prefs: []
  type: TYPE_IMG
  zh: '![](img/fcbbc146-13f5-4109-b30c-cc6b2623d47b.png)'
- en: If you opt to map field values, review all of the listed values and map them
    to their corresponding field options in Jira. If a value does not have an option,
    you can type in the desired option and Jira will create it.
  id: totrans-280
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 如果选择映射字段值，请检查所有列出的值，并将它们映射到 Jira 中相应的字段选项。如果某个值没有选项，你可以输入所需的选项，Jira 会创建该选项。
- en: 'Click on the **Begin Import **button to start importing your data into Jira:'
  id: totrans-281
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**开始导入**按钮开始将数据导入到 Jira 中：
- en: '![](img/a383d060-d2b0-4c79-aa84-e0d6edc5d81a.png)'
  id: totrans-282
  prefs: []
  type: TYPE_IMG
  zh: '![](img/a383d060-d2b0-4c79-aa84-e0d6edc5d81a.png)'
- en: After the import process is completed, review the result. You can click on the
    D**ownload a detailed log **link to get a full log of the process if the import
    fails. You can also click on the S**ave the configuration **link to get a copy
    of the mapping files so that, next time, you do not have to remap everything from
    scratch.
  id: totrans-283
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导入过程完成后，检查结果。如果导入失败，你可以点击**下载详细日志**链接，获取完整的导入日志。你也可以点击**保存配置**链接，获取映射文件的副本，以便下次导入时，不必从头开始重新映射。
- en: There's more...
  id: totrans-284
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 还有更多内容...
- en: Using CSV files to import custom data into Jira is the most versatile approach
    since many systems can export their data into CSV. However, as you will have noted
    already, Jira comes with a number of specialized importers for various systems.
    These importers often have additional features to help with data import. The Atlassian
    Marketplace website ([https://marketplace.atlassian.com](https://marketplace.atlassian.com/))
    also has a number of importers created by third parties. If you do not see your
    system listed in the out-of-the-box importers, make sure you do a search in the
    marketplace and check whether someone has already created an importer for it.
  id: totrans-285
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 CSV 文件将自定义数据导入到 Jira 是最灵活的方法，因为许多系统可以将其数据导出为 CSV 格式。然而，正如你已经注意到的，Jira 提供了多个为各种系统设计的专用导入工具。这些导入工具通常具有一些附加功能，有助于数据导入。[Atlassian
    市场网站](https://marketplace.atlassian.com/)也提供了许多第三方创建的导入工具。如果你在现成的导入工具中没有找到你的系统，确保在市场中进行搜索，看看是否有人已经为其创建了导入工具。
- en: Copying configuration settings between Jira instances
  id: totrans-286
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 在 Jira 实例之间复制配置设置
- en: If you have a controlled IT environment where changes need to go through development,
    testing/staging, and production processes, then, without a doubt, you will know
    how painful it is to promote Jira configuration changes across different environments.
    Since Jira does not provide a way to export configurations out of the box, all
    changes will need to be manually applied to each environment, which is both time-consuming
    and error-prone.
  id: totrans-287
  prefs: []
  type: TYPE_NORMAL
  zh: 如果您有一个受控的IT环境，其中更改需要通过开发、测试/暂存和生产过程，那么您无疑知道在不同环境之间推广Jira配置更改是多么痛苦。由于Jira未提供原生的配置导出功能，所有更改需要手动应用到每个环境，这既费时又容易出错。
- en: In this recipe, we will look at using a specialized tool that can help to make
    this process easier.
  id: totrans-288
  prefs: []
  type: TYPE_NORMAL
  zh: 在本教程中，我们将使用一个专业工具，帮助简化这一过程。
- en: Getting ready
  id: totrans-289
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 准备工作
- en: For this recipe, we need to have the Configuration Manager for Jira add-on installed
    on both the source Jira instance as well as the target Jira instance. You can
    install it directly from the Universal Plugin Manager, or download it from the
    following link: [https://marketplace.atlassian.com/plugins/com.botronsoft.jira.configurationmanager](https://marketplace.atlassian.com/plugins/com.botronsoft.jira.configurationmanager).
  id: totrans-290
  prefs: []
  type: TYPE_NORMAL
  zh: 对于本教程，我们需要在源Jira实例和目标Jira实例上都安装Jira配置管理器插件。您可以直接从通用插件管理器安装，或通过以下链接下载：[https://marketplace.atlassian.com/plugins/com.botronsoft.jira.configurationmanager](https://marketplace.atlassian.com/plugins/com.botronsoft.jira.configurationmanager)。
- en: How to do it...
  id: totrans-291
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 如何操作...
- en: The Configuration Manager for Jira add-on requires you to first create a snapshot.
    A snapshot contains all the configuration settings you want to copy over to a
    different Jira instance.
  id: totrans-292
  prefs: []
  type: TYPE_NORMAL
  zh: Jira配置管理器插件要求您首先创建一个快照。快照包含所有您希望复制到另一个Jira实例的配置设置。
- en: 'You can create two types of snapshot:'
  id: totrans-293
  prefs: []
  type: TYPE_NORMAL
  zh: 您可以创建两种类型的快照：
- en: '**System**: This includes all configurations in Jira.'
  id: totrans-294
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**系统**：这包括Jira中的所有配置。'
- en: '**Project**: This includes only configurations required for the selected project.'
  id: totrans-295
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '**项目**：这仅包括选定项目所需的配置。'
- en: 'Proceed with the following steps to create a configuration snapshot:'
  id: totrans-296
  prefs: []
  type: TYPE_NORMAL
  zh: 按照以下步骤创建配置快照：
- en: Navigate to **Administration** > **Configuration Management** > **Snapshots**.
  id: totrans-297
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** > **配置管理** > **快照**。
- en: Click on the Add Snapshot button.
  id: totrans-298
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击“添加快照”按钮。
- en: Opt to create either a **System Configuration** or **Project Configuration**
    snapshot.
  id: totrans-299
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择创建**系统配置**或**项目配置**快照。
- en: Enter a name for the snapshot.
  id: totrans-300
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 输入快照的名称。
- en: 'Click on the **Create** button. The following screenshot shows the details
    of the snapshot we created:'
  id: totrans-301
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**创建**按钮。以下截图展示了我们创建的快照的详细信息：
- en: '![](img/f282d195-9eb8-4007-bd5c-6aeebc23d474.png)'
  id: totrans-302
  prefs: []
  type: TYPE_IMG
  zh: '![](img/f282d195-9eb8-4007-bd5c-6aeebc23d474.png)'
- en: 'Having created the snapshot, there are several ways in which we can promote
    and deploy changes to another Jira instance. We can either download the snapshot
    ZIP file and upload it or link the two Jira instances together with Application
    Link and load the snapshot remotely. We will use the snapshot file option in this
    recipe. Proceed with the following steps to deploy a snapshot:'
  id: totrans-303
  prefs: []
  type: TYPE_NORMAL
  zh: 创建了快照后，我们有几种方式可以将更改推广并部署到另一个Jira实例。我们可以下载快照ZIP文件并上传，或者通过应用链接将两个Jira实例连接起来并远程加载快照。在本教程中，我们将使用快照文件选项。请按照以下步骤部署快照：
- en: Log in to the other Jira instance as an administrator.
  id: totrans-304
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 以管理员身份登录到另一个Jira实例。
- en: Navigate to **Administration** > **Configuration Management** > Deploy.
  id: totrans-305
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 导航到**管理** > **配置管理** > **部署**。
- en: Select the **From Snapshot File** option.
  id: totrans-306
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择**从快照文件**选项。
- en: Choose the snapshot ZIP file.
  id: totrans-307
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 选择快照ZIP文件。
- en: Click on the **Deploy** link to start the deployment.
  id: totrans-308
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**部署**链接以开始部署。
- en: 'The add-on will walk you through a deployment wizard, where it will analyze
    the contents of the snapshot and determine whether your current Jira system meets
    all the necessary requirements. For example, in the following screenshot, it has
    informed us that there is an add-on version mismatch:'
  id: totrans-309
  prefs: []
  type: TYPE_NORMAL
  zh: 插件将引导您完成一个部署向导，在此过程中它会分析快照的内容并确定当前的Jira系统是否满足所有必要的要求。例如，在以下截图中，它已经通知我们存在插件版本不匹配的问题：
- en: '![](img/9b7e78a4-d9c3-4d0f-91e1-0322cf53b10a.png)'
  id: totrans-310
  prefs: []
  type: TYPE_IMG
  zh: '![](img/9b7e78a4-d9c3-4d0f-91e1-0322cf53b10a.png)'
- en: 'After the add-on has determined that all the requirements are met, it will
    provide a quick summary of all the changes that will be applied (seen in the following
    screenshot). This is a good time to review the list of items to make sure we are
    not introducing unwanted changes accidentally, as shown in the following screenshot:'
  id: totrans-311
  prefs: []
  type: TYPE_NORMAL
  zh: 在插件确定所有要求都已满足后，它将提供一个简要总结，列出所有将要应用的变更（如下图所示）。这是一个很好的时机，可以检查变更列表，确保我们不会不小心引入不必要的变更，如下图所示：
- en: '![](img/0e8f181f-8f56-4fe7-b157-e03ae4218b51.png)'
  id: totrans-312
  prefs: []
  type: TYPE_IMG
  zh: '![](img/0e8f181f-8f56-4fe7-b157-e03ae4218b51.png)'
- en: If everything looks good, we can finish migrating the configuration changes
    and deploy them to the target instance.
  id: totrans-313
  prefs: []
  type: TYPE_NORMAL
  zh: 如果一切看起来正常，我们可以完成配置变更的迁移，并将其部署到目标实例。
