- en: Chapter 13. Database Access
  id: totrans-0
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 第13章 数据库访问
- en: JIRA offers a lot of project reports to keep track of a project's progress,
    analyze trends over the past few months, and make decisions based on various statistics
    regarding time estimates, status, and workload. In most cases, these reports are
    enough to reach conclusions, but there are times when desirable information cannot
    be fetched from the existing JIRA reports. However, it's possible to generate
    complex reports directly from the database. In this chapter, we will discuss common
    databases that JIRA can use and the schemas these databases use. We will take
    a look at some reports that can only be generated by querying the database directly.
  id: totrans-1
  prefs: []
  type: TYPE_NORMAL
  zh: JIRA 提供了许多项目报告，用于跟踪项目进度、分析过去几个月的趋势，并基于时间估算、状态和工作负载等各种统计数据做出决策。在大多数情况下，这些报告足以得出结论，但有时现有的
    JIRA 报告无法提供所需的信息。不过，可以直接从数据库生成复杂的报告。在本章中，我们将讨论 JIRA 可以使用的常见数据库以及这些数据库使用的模式。我们将查看一些只能通过直接查询数据库生成的报告。
- en: 'In this chapter, we will cover the following topics:'
  id: totrans-2
  prefs: []
  type: TYPE_NORMAL
  zh: 本章将涵盖以下主题：
- en: JIRA's database schema
  id: totrans-3
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: JIRA 的数据库模式
- en: Accessing **MySQL**
  id: totrans-4
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问 **MySQL**
- en: Accessing **PostgreSQL**
  id: totrans-5
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 访问 **PostgreSQL**
- en: User table
  id: totrans-6
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 用户表
- en: The `jiraissue` table
  id: totrans-7
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`jiraissue` 表'
- en: The `customfield` table
  id: totrans-8
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`customfield` 表'
- en: The `customfieldvalue` table
  id: totrans-9
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: '`customfieldvalue` 表'
- en: Some useful SQL queries
  id: totrans-10
  prefs:
  - PREF_UL
  type: TYPE_NORMAL
  zh: 一些有用的 SQL 查询
- en: JIRA's database schema
  id: totrans-11
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: JIRA 的数据库模式
- en: JIRA stores its configuration and data in a database; if you are evaluating
    JIRA, it's possible to use the embedded **Hyper SQL Database** (**HSQLDB**) written
    in Java. This is suitable for small applications, and JIRA uses it only in its
    evaluation version. HSQLDB is not recommended for production usage. For that,
    JIRA recommends MySQL or PostgreSQL.
  id: totrans-12
  prefs: []
  type: TYPE_NORMAL
  zh: JIRA 将其配置和数据存储在数据库中；如果您正在评估 JIRA，可以使用嵌入式的 **Hyper SQL 数据库**（**HSQLDB**），这是用
    Java 编写的。它适用于小型应用程序，JIRA 仅在评估版本中使用它。HSQLDB 不推荐用于生产环境，JIRA 推荐使用 MySQL 或 PostgreSQL。
- en: No matter what type of database is used, the database schema that is, the tables
    and the relationship between them, is the same. If you want to take a look at
    the schema, you can refer to `JIRA_INSTALL/atlassian-jira/WEB-INF/classes/entitydefs/entitymodel.xml`.
  id: totrans-13
  prefs: []
  type: TYPE_NORMAL
  zh: 无论使用何种类型的数据库，数据库模式（即表格及其关系）都是相同的。如果您想查看模式，可以参考 `JIRA_INSTALL/atlassian-jira/WEB-INF/classes/entitydefs/entitymodel.xml`。
- en: 'The contents of the file are as displayed in the following screenshot:'
  id: totrans-14
  prefs: []
  type: TYPE_NORMAL
  zh: 文件的内容如下所示：
- en: '![JIRA''s database schema](img/image_13_001.jpg)'
  id: totrans-15
  prefs: []
  type: TYPE_IMG
  zh: '![JIRA 的数据库模式](img/image_13_001.jpg)'
- en: This is an XML file that contains the definition of all the tables in JIRA and
    their relationship with other tables.
  id: totrans-16
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个 XML 文件，包含 JIRA 中所有表的定义以及它们与其他表的关系。
- en: Alternatively, you can also check the database schema on the Atlassian website,
    at [https://developer.atlassian.com/display/JIRADEV/Database+Schema](https://developer.atlassian.com/display/JIRADEV/Database+Schema).
  id: totrans-17
  prefs: []
  type: TYPE_NORMAL
  zh: 或者，您还可以在 Atlassian 网站上查看数据库模式，网址为 [https://developer.atlassian.com/display/JIRADEV/Database+Schema](https://developer.atlassian.com/display/JIRADEV/Database+Schema)。
- en: Accessing HSQLDB
  id: totrans-18
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 访问 HSQLDB
- en: 'As previously mentioned, HSQLDB is used only for evaluation purposes and should
    not be used for production instances. You may, however, want to run queries to
    generate reports from the database. Luckily, HSQLDB comes with a built-in console
    that can be invoked by performing the following steps:'
  id: totrans-19
  prefs: []
  type: TYPE_NORMAL
  zh: 如前所述，HSQLDB 仅用于评估目的，不应在生产环境中使用。然而，您可能希望运行查询以从数据库生成报告。幸运的是，HSQLDB 附带一个内置控制台，可以通过执行以下步骤调用：
- en: Shut down your JIRA service.
  id: totrans-20
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 关闭您的 JIRA 服务。
- en: 'Use the following command to start the HSQLDB console:'
  id: totrans-21
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 使用以下命令启动 HSQLDB 控制台：
- en: '[PRE0]'
  id: totrans-22
  prefs:
  - PREF_IND
  type: TYPE_PRE
  zh: '[PRE0]'
- en: In the preceding command, replace `JIRA_INSTALL` and `JIRA_HOME` with the directory
    locations, as per your installation. If you have installed JIRA using the Windows
    installer, the following procedure should work.
  id: totrans-23
  prefs: []
  type: TYPE_NORMAL
  zh: 在上述命令中，将 `JIRA_INSTALL` 和 `JIRA_HOME` 替换为根据您的安装位置的目录。如果您是通过 Windows 安装程序安装 JIRA，以下步骤应该可行。
- en: First, navigate to the `C:\Program Files\Atlassian\Application Data\JIRA\database`
    directory.
  id: totrans-24
  prefs: []
  type: TYPE_NORMAL
  zh: 首先，导航到 `C:\Program Files\Atlassian\Application Data\JIRA\database` 目录。
- en: 'Then, run the following command:'
  id: totrans-25
  prefs: []
  type: TYPE_NORMAL
  zh: 然后，运行以下命令：
- en: '[PRE1]'
  id: totrans-26
  prefs: []
  type: TYPE_PRE
  zh: '[PRE1]'
- en: 'The **HSQL Database Manager** will be displayed on your screen:'
  id: totrans-27
  prefs: []
  type: TYPE_NORMAL
  zh: '**HSQL 数据库管理器** 将显示在您的屏幕上：'
- en: '![Accessing HSQLDB](img/image_13_002.jpg)'
  id: totrans-28
  prefs: []
  type: TYPE_IMG
  zh: '![访问 HSQLDB](img/image_13_002.jpg)'
- en: You can now run SQL queries in the **HSQL Database Manager** and check the output
    in the same window.
  id: totrans-29
  prefs: []
  type: TYPE_NORMAL
  zh: 现在，您可以在 **HSQL 数据库管理器** 中运行 SQL 查询，并在同一窗口中查看输出。
- en: Accessing MySQL
  id: totrans-30
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问 MySQL
- en: The **HSQL Database Manager** should never be used in the production instance
    because it's prone to data loss. The recommended database is either MySQL or PostgreSQL.
    Earlier in this book, we discussed how to create a database in MySQL to store
    JIRA's data and configure it during the setup phase. To access your database in
    order to run SQL queries, you can either use the MySQL console, which comes with
    the MySQL server, or you can use **phpMyAdmin**.
  id: totrans-31
  prefs: []
  type: TYPE_NORMAL
  zh: '**HSQL 数据库管理器**绝不应在生产实例中使用，因为它容易导致数据丢失。推荐使用的数据库是 MySQL 或 PostgreSQL。本书早些时候我们讨论了如何创建
    MySQL 数据库以存储 JIRA 数据，并在安装阶段进行配置。要访问您的数据库并运行 SQL 查询，您可以使用 MySQL 控制台（MySQL 服务器自带的工具），或者使用**phpMyAdmin**。'
- en: phpMyAdmin
  id: totrans-32
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: phpMyAdmin
- en: The phpMyAdmin application can be downloaded from [http://www.phpmyadmin.net/](http://www.phpmyadmin.net/).
  id: totrans-33
  prefs: []
  type: TYPE_NORMAL
  zh: 可以从[http://www.phpmyadmin.net/](http://www.phpmyadmin.net/)下载 phpMyAdmin 应用程序。
- en: This is a great web-based tool to manage your MySQL database and it's usually
    accessed using `http://localhost/phpmyadmin/`. The exact URL can be different,
    depending on your installation.
  id: totrans-34
  prefs: []
  type: TYPE_NORMAL
  zh: 这是一个非常棒的基于 web 的工具，用于管理您的 MySQL 数据库，通常通过`http://localhost/phpmyadmin/`访问。具体的
    URL 可能会有所不同，取决于您的安装方式。
- en: 'Perform these following steps:'
  id: totrans-35
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下步骤：
- en: Open the previous URL in your browser to launch **phpMyAdmin**:![phpMyAdmin](img/image_13_003.jpg)
  id: totrans-36
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在浏览器中打开上面的 URL 来启动**phpMyAdmin**：![phpMyAdmin](img/image_13_003.jpg)
- en: You will notice that the list of databases appears on the left-hand side. Our
    `jiradb` database also appears in this list. We created this database for our
    JIRA instance.
  id: totrans-37
  prefs:
  - PREF_IND
  type: TYPE_NORMAL
  zh: 您会注意到数据库列表出现在左侧。我们的`jiradb`数据库也出现在该列表中。我们为我们的 JIRA 实例创建了这个数据库。
- en: Click on the plus (**+**) sign before the database name to expand the table
    for this database.
  id: totrans-38
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击数据库名称前的加号（**+**）以展开该数据库的表格。
- en: You can click on any table to browse its content:![phpMyAdmin](img/image_13_004.jpg)
  id: totrans-39
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 您可以点击任何表格来浏览其内容：![phpMyAdmin](img/image_13_004.jpg)
- en: As you can see, we clicked on the `cwd_user` table and on the right-hand side,
    we have the list of users in our JIRA instance.
  id: totrans-40
  prefs: []
  type: TYPE_NORMAL
  zh: 如您所见，我们点击了`cwd_user`表，右侧显示了我们 JIRA 实例中的用户列表。
- en: Similarly, you can browse any table you want in your JIRA instance. You should
    have some knowledge of JIRA's database schema to make sense out of this data.
    Also, if you want to generate complex reports that involve more than one table,
    you can write SQL queries as well.
  id: totrans-41
  prefs: []
  type: TYPE_NORMAL
  zh: 同样，您可以浏览 JIRA 实例中的任何表格。您应该了解一些 JIRA 数据库模式，以便理解这些数据。此外，如果您希望生成涉及多个表格的复杂报告，您也可以编写
    SQL 查询。
- en: Click on the **SQL** tab in the top navigation bar:![phpMyAdmin](img/image_13_005.jpg)
  id: totrans-42
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击顶部导航栏中的**SQL**选项卡：![phpMyAdmin](img/image_13_005.jpg)
- en: 'To execute your query, perform the following steps:'
  id: totrans-43
  prefs:
  - PREF_OL
  type: TYPE_NORMAL
  zh: 要执行您的查询，请执行以下步骤：
- en: In the preceding screenshot, you can enter your SQL queries under **Run SQL
    query/queries on database jiradb:**.
  id: totrans-44
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 在前面的截图中，您可以在**在数据库 jiradb 上运行 SQL 查询**区域输入 SQL 查询。
- en: Click on the **Go** button to run the SQL query.
  id: totrans-45
  prefs:
  - PREF_IND
  - PREF_OL
  type: TYPE_NORMAL
  zh: 点击**Go**按钮以运行 SQL 查询。
- en: The MySQL console
  id: totrans-46
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: MySQL 控制台
- en: When you install the MySQL server on your machine, it comes with the MySQL console.
    This console can also be used to manage your database. It's not very user-friendly
    compared to phpMyAdmin, but once you remember the basic commands, you will likely
    prefer the MySQL console for quick access to the database.
  id: totrans-47
  prefs: []
  type: TYPE_NORMAL
  zh: 当您在机器上安装 MySQL 服务器时，它会附带 MySQL 控制台。这个控制台也可以用来管理您的数据库。与 phpMyAdmin 相比，它的用户界面不太友好，但一旦您记住了基本命令，您可能会更喜欢使用
    MySQL 控制台进行快速访问数据库。
- en: 'Run the following command to enter the MySQL console:'
  id: totrans-48
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下命令以进入 MySQL 控制台：
- en: '[PRE2]'
  id: totrans-49
  prefs: []
  type: TYPE_PRE
  zh: '[PRE2]'
- en: 'In the preceding command, replace `USERNAME` with your username. In our case,
    it''s `root`. The command will ask you to enter your password, after which you
    will enter the MySQL console:'
  id: totrans-50
  prefs: []
  type: TYPE_NORMAL
  zh: 在前面的命令中，将`USERNAME`替换为您的用户名。在我们的例子中是`root`。该命令会要求您输入密码，之后您将进入 MySQL 控制台：
- en: '![The MySQL console](img/image_13_006.jpg)'
  id: totrans-51
  prefs: []
  type: TYPE_IMG
  zh: '![MySQL 控制台](img/image_13_006.jpg)'
- en: In the MySQL console, you can enter your commands and run queries.
  id: totrans-52
  prefs: []
  type: TYPE_NORMAL
  zh: 在 MySQL 控制台中，您可以输入命令并运行查询。
- en: Let's take a look at the structure of a few common JIRA tables and generate
    reports combining these multiple tables. For the following example queries, you
    may use either phpMyAdmin or the MySQL console, depending on your comfort level.
  id: totrans-53
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看一下几个常见的 JIRA 表格的结构，并生成结合多个表格的报表。在以下示例查询中，您可以根据自己的舒适度选择使用 phpMyAdmin 或 MySQL
    控制台。
- en: Accessing PostgreSQL
  id: totrans-54
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 访问 PostgreSQL
- en: 'When you install PostgreSQL using the Windows installer, it comes with **pgAdmin
    III**, which is another tool for PostgreSQL''s administration and management:'
  id: totrans-55
  prefs: []
  type: TYPE_NORMAL
  zh: 当你使用 Windows 安装程序安装 PostgreSQL 时，它会附带 **pgAdmin III**，这是 PostgreSQL 的另一个管理和操作工具：
- en: '![Accessing PostgreSQL](img/image_13_007.jpg)'
  id: totrans-56
  prefs: []
  type: TYPE_IMG
  zh: '![访问 PostgreSQL](img/image_13_007.jpg)'
- en: Let's take a look at some JIRA database tables that store useful information.
  id: totrans-57
  prefs: []
  type: TYPE_NORMAL
  zh: 让我们来看看一些存储有用信息的 JIRA 数据库表。
- en: User table
  id: totrans-58
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 用户表
- en: The `cwd_user` table is used to store a user in the system. Let's check the
    structure of this table.
  id: totrans-59
  prefs: []
  type: TYPE_NORMAL
  zh: '`cwd_user` 表用于存储系统中的用户。让我们来查看一下该表的结构。'
- en: The table structure
  id: totrans-60
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表格结构
- en: 'Run the following query:'
  id: totrans-61
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下查询：
- en: '[PRE3]'
  id: totrans-62
  prefs: []
  type: TYPE_PRE
  zh: '[PRE3]'
- en: 'The output of the query is as follows:'
  id: totrans-63
  prefs: []
  type: TYPE_NORMAL
  zh: 查询的输出结果如下：
- en: '![The table structure](img/image_13_008.jpg)'
  id: totrans-64
  prefs: []
  type: TYPE_IMG
  zh: '![表格结构](img/image_13_008.jpg)'
- en: Finding the list of inactive JIRA users
  id: totrans-65
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 查找非活跃的 JIRA 用户列表
- en: One of the main responsibilities of JIRA administrators is user management.
    Let's say you want to find the list of inactive users, along with their directory
    information. In big JIRA instances, it may be possible that there are users in
    JIRA's internal directory, as well as users from corporate LDAP.
  id: totrans-66
  prefs: []
  type: TYPE_NORMAL
  zh: JIRA 管理员的主要职责之一是用户管理。假设你想找到非活跃用户的列表及其目录信息。在大型 JIRA 实例中，可能会有来自 JIRA 内部目录的用户，以及来自公司
    LDAP 的用户。
- en: 'The following query will return the list of inactive users in JIRA:'
  id: totrans-67
  prefs: []
  type: TYPE_NORMAL
  zh: 以下查询将返回 JIRA 中非活跃用户的列表：
- en: '[PRE4]'
  id: totrans-68
  prefs: []
  type: TYPE_PRE
  zh: '[PRE4]'
- en: The preceding query relies on another table, called `cwd_directory`. This directory
    stores the user directory information, whereas whether the user is active or not
    is stored in the `cwd_user` table under the `active` table field.
  id: totrans-69
  prefs: []
  type: TYPE_NORMAL
  zh: 上述查询依赖于另一个表，叫做 `cwd_directory`。该目录存储用户目录信息，而用户是否活跃则存储在 `cwd_user` 表的 `active`
    字段中。
- en: The jiraissue table
  id: totrans-70
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: jiraissue 表
- en: The `jiraissue` table is used to store JIRA issues. Let's check the structure
    of this table.
  id: totrans-71
  prefs: []
  type: TYPE_NORMAL
  zh: '`jiraissue` 表用于存储 JIRA 问题。让我们来查看一下该表的结构。'
- en: The table structure
  id: totrans-72
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表格结构
- en: 'Run the following query:'
  id: totrans-73
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下查询：
- en: '[PRE5]'
  id: totrans-74
  prefs: []
  type: TYPE_PRE
  zh: '[PRE5]'
- en: 'The output of this query is as follows:'
  id: totrans-75
  prefs: []
  type: TYPE_NORMAL
  zh: 该查询的输出结果如下：
- en: '![The table structure](img/image_13_009.jpg)'
  id: totrans-76
  prefs: []
  type: TYPE_IMG
  zh: '![表格结构](img/image_13_009.jpg)'
- en: Finding issues of a specific project
  id: totrans-77
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 查找特定项目的问题
- en: 'It''s quite easy to find the list of issues of a specific project using the
    JIRA **Issue Navigator**, but as we are exploring the database schema and its
    various tables, let''s fetch the issues of a specific project directly from the
    database:'
  id: totrans-78
  prefs: []
  type: TYPE_NORMAL
  zh: 使用 JIRA **问题导航器** 查找特定项目的所有问题非常简单，但由于我们正在探索数据库架构及其各个表，下面让我们直接从数据库中获取特定项目的问题：
- en: '[PRE6]'
  id: totrans-79
  prefs: []
  type: TYPE_PRE
  zh: '[PRE6]'
- en: The preceding query will display the list of issues of the project with the
    `SSP` key. You can replace the project key with your own and try the previous
    query. The project name and a few other fields are fetched from the `project`
    table.
  id: totrans-80
  prefs: []
  type: TYPE_NORMAL
  zh: 上述查询将显示 `SSP` 键所对应项目的问题列表。你可以将项目键替换为你自己的，尝试执行之前的查询。项目名称和一些其他字段会从 `project` 表中提取。
- en: The customfield table
  id: totrans-81
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: customfield 表
- en: The `customfield` table is used to store all the custom fields. Let's check
    the structure of this table.
  id: totrans-82
  prefs: []
  type: TYPE_NORMAL
  zh: '`customfield` 表用于存储所有自定义字段。让我们来查看一下该表的结构。'
- en: The table structure
  id: totrans-83
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表格结构
- en: 'Execute the following query:'
  id: totrans-84
  prefs: []
  type: TYPE_NORMAL
  zh: 执行以下查询：
- en: '[PRE7]'
  id: totrans-85
  prefs: []
  type: TYPE_PRE
  zh: '[PRE7]'
- en: 'The output of the query is as follows:'
  id: totrans-86
  prefs: []
  type: TYPE_NORMAL
  zh: 查询的输出结果如下：
- en: '![The table structure](img/image_13_010.jpg)'
  id: totrans-87
  prefs: []
  type: TYPE_IMG
  zh: '![表格结构](img/image_13_010.jpg)'
- en: The customfieldvalue table
  id: totrans-88
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: customfieldvalue 表
- en: The `customfieldvalue` table is used to store custom field values. Let's check
    the structure of this table.
  id: totrans-89
  prefs: []
  type: TYPE_NORMAL
  zh: '`customfieldvalue` 表用于存储自定义字段值。让我们来查看一下该表的结构。'
- en: The table structure
  id: totrans-90
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 表格结构
- en: 'Run the following query:'
  id: totrans-91
  prefs: []
  type: TYPE_NORMAL
  zh: 运行以下查询：
- en: '[PRE8]'
  id: totrans-92
  prefs: []
  type: TYPE_PRE
  zh: '[PRE8]'
- en: 'The output of the query is as follows:'
  id: totrans-93
  prefs: []
  type: TYPE_NORMAL
  zh: 查询的输出结果如下：
- en: '![The table structure](img/image_13_011.jpg)'
  id: totrans-94
  prefs: []
  type: TYPE_IMG
  zh: '![表格结构](img/image_13_011.jpg)'
- en: Some useful SQL queries
  id: totrans-95
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 一些有用的 SQL 查询
- en: We will list a few useful SQL queries that can help JIRA administrators quickly
    find the information they are looking for. It's important to mention that new
    versions of JIRA are released quite regularly, with new features and bug fixes.
    The database schema may change slightly in new versions. Therefore, verify your
    SQL queries on the new version of JIRA before using them.
  id: totrans-96
  prefs: []
  type: TYPE_NORMAL
  zh: 我们将列出一些有用的 SQL 查询，帮助 JIRA 管理员快速找到他们所需的信息。需要特别提到的是，JIRA 新版本发布相对频繁，通常包含新的功能和错误修复。数据库架构可能会在新版本中发生一些变化。因此，在使用
    SQL 查询之前，请在新版 JIRA 上验证它们的有效性。
- en: List of shared filters
  id: totrans-97
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 共享过滤器列表
- en: 'The following SQL query will list the filters created in the JIRA instance
    that are shared with others:'
  id: totrans-98
  prefs: []
  type: TYPE_NORMAL
  zh: 以下 SQL 查询将列出在 JIRA 实例中创建并与他人共享的过滤器：
- en: '[PRE9]'
  id: totrans-99
  prefs: []
  type: TYPE_PRE
  zh: '[PRE9]'
- en: Fetching users of a specific group
  id: totrans-100
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 获取特定组的用户
- en: 'It''s quite easy to find users of a specific group from the JIRA interface,
    but you should know how to fetch this information using SQL. The following query
    will list the users of the `jira-software-users` group. You can change it to any
    group in your instance:'
  id: totrans-101
  prefs: []
  type: TYPE_NORMAL
  zh: 从 JIRA 界面中查找特定组的用户非常简单，但你应该知道如何使用 SQL 获取这些信息。以下查询将列出 `jira-software-users` 组的用户。你可以将其更改为实例中的任何组：
- en: '[PRE10]'
  id: totrans-102
  prefs: []
  type: TYPE_PRE
  zh: '[PRE10]'
- en: List of users with count of comments
  id: totrans-103
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 包含评论数的用户列表
- en: 'One of the main responsibilities of JIRA administrators is to find users that
    are either inactive or not using JIRA a lot in a given month. The next query will
    fetch the list of users, along with the number of comments they posted in a particular
    month. This will be useful in cases where it''s necessary to find users who are
    active in system, but not performing much activity:'
  id: totrans-104
  prefs: []
  type: TYPE_NORMAL
  zh: JIRA 管理员的主要责任之一是查找那些在给定月份内不活跃或使用 JIRA 较少的用户。以下查询将提取用户列表，并列出他们在特定月份发布的评论数量。在某些情况下，这对于查找那些在系统中活跃但并未进行太多操作的用户非常有用：
- en: '[PRE11]'
  id: totrans-105
  prefs: []
  type: TYPE_PRE
  zh: '[PRE11]'
- en: Fetching the count of issues per component
  id: totrans-106
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 获取每个组件的问题数
- en: 'Let''s say you want to find the list of not only all the components in the
    system, but also the number of issues they are connected to. The following query
    will give you that information quickly:'
  id: totrans-107
  prefs: []
  type: TYPE_NORMAL
  zh: 假设你想找到系统中不仅所有组件的列表，还包括它们所关联的问题数量。以下查询将快速为你提供这些信息：
- en: '[PRE12]'
  id: totrans-108
  prefs: []
  type: TYPE_PRE
  zh: '[PRE12]'
- en: Listing projects of a specific project category
  id: totrans-109
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 列出特定项目类别的项目
- en: 'If you want to retrieve the list of projects in a specific category, use the
    following query:'
  id: totrans-110
  prefs: []
  type: TYPE_NORMAL
  zh: 如果你想检索特定类别下的项目列表，可以使用以下查询：
- en: '[PRE13]'
  id: totrans-111
  prefs: []
  type: TYPE_PRE
  zh: '[PRE13]'
- en: List of assignees or reporters in a particular project
  id: totrans-112
  prefs:
  - PREF_H2
  type: TYPE_NORMAL
  zh: 特定项目中的分配人或报告人列表
- en: 'Sometimes you have to find the list of users who are involved in a particular
    project as either an assignee or as a reporter. This is particularly useful when
    you want to migrate a few projects from one instance to another and you also need
    to migrate the associated users:'
  id: totrans-113
  prefs: []
  type: TYPE_NORMAL
  zh: 有时候你需要查找参与某个特定项目的用户列表，作为分配人或报告人。这在你需要将一些项目从一个实例迁移到另一个实例，并且还需要迁移相关用户时特别有用：
- en: '[PRE14]'
  id: totrans-114
  prefs: []
  type: TYPE_PRE
  zh: '[PRE14]'
- en: Summary
  id: totrans-115
  prefs:
  - PREF_H1
  type: TYPE_NORMAL
  zh: 总结
- en: In this chapter, you learned how to retrieve information directly from the database.
    This is quite useful when information cannot easily be fetched from the JIRA interface.
    We discussed some common JIRA tables and looked at some example queries on how
    to find useful information. The ability to access the database directly empowers
    JIRA administrators to generate complex reports and seek information faster.
  id: totrans-116
  prefs: []
  type: TYPE_NORMAL
  zh: 在本章中，你学习了如何直接从数据库中检索信息。当信息无法从 JIRA 界面轻松获取时，这非常有用。我们讨论了一些常见的 JIRA 表，并查看了一些示例查询，如何查找有用的信息。直接访问数据库的能力使得
    JIRA 管理员能够生成复杂的报告，并更快地获取信息。
- en: In the next chapter, you will learn how to customize the look and feel of JIRA
    by inserting custom CSS code. You will also learn to modify the behavior of the
    HTML elements of the JIRA interface using JavaScript. We will take a look at some
    examples to show/hide JIRA fields based on the user selection of a specific value
    of a select list, and to modify the values of text fields to insert text-based
    templates.
  id: totrans-117
  prefs: []
  type: TYPE_NORMAL
  zh: 在下一章中，你将学习如何通过插入自定义 CSS 代码来定制 JIRA 的外观和感觉。你还将学习如何使用 JavaScript 修改 JIRA 界面 HTML
    元素的行为。我们将通过一些示例来展示如何根据用户选择的下拉列表的特定值来显示/隐藏 JIRA 字段，并修改文本字段的值以插入基于文本的模板。
